/*
THIS IS A GENERATED/BUNDLED FILE BY ROLLUP
if you want to view the source visit the plugins github repository
*/

'use strict';

var obsidian = require('obsidian');
var state = require('@codemirror/state');
var view = require('@codemirror/view');
var language = require('@codemirror/language');

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

const matchTypes = {
    'exact': "Exact match",
    'contains': "Contains value",
    'whiteSpace': "Value within whitespace separated words",
    'startswith': "Starts with this value",
    'endswith': "Ends with this value"
};
const matchSign = {
    'exact': "",
    'contains': "*",
    'startswith': "^",
    'endswith': "$",
    'whiteSpace': "~"
};
const matchPreview = {
    'exact': "with value",
    'contains': "containing",
    'whiteSpace': "containing",
    'startswith': "starting with",
    'endswith': "ending with"
};
const matchPreviewPath = {
    'exact': "is",
    'contains': "contains",
    'whiteSpace': "contains",
    'startswith': "starts with",
    'endswith': "ends with"
};
const selectorType = {
    'attribute': 'Attribute value',
    'tag': 'Tag',
    'path': 'Note path'
};
class CSSLink {
    constructor() {
        this.type = 'attribute';
        this.name = "";
        this.value = "";
        this.matchCaseSensitive = false;
        this.match = "exact";
        let s4 = () => {
            return Math.floor((1 + Math.random()) * 0x10000)
                .toString(16)
                .substring(1);
        };
        //return id of format 'aaaaaaaa'-'aaaa'-'aaaa'-'aaaa'-'aaaaaaaaaaaa'
        this.uid = s4() + "-" + s4();
        this.selectText = true;
        this.selectAppend = true;
        this.selectPrepend = true;
        this.selectBackground = true;
    }
}

function displayText(link, settings) {
    if (link.type === 'tag') {
        if (!link.value) {
            return "<b>Please choose a tag</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-tags="${link.value}">Note</span> has tag <a class="tag">#${link.value}</a>`;
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            return `<b>No attributes added to "Target attributes". Go to plugin settings to add them.</b>`;
        }
        if (!link.name) {
            return "<b>Please choose an attribute name.</b>";
        }
        if (!link.value) {
            return "<b>Please choose an attribute value.</b>";
        }
        return `<span class="data-link-icon data-link-text data-link-icon-after" data-link-${link.name}="${link.value}">Note</span> has attribute <b>${link.name}</b> ${matchPreview[link.match]} <b>${link.value}</b>.`;
    }
    if (!link.value) {
        return "<b>Please choose a path.</b>";
    }
    return `The path of the <span class="data-link-icon data-link-text data-link-icon-after" data-link-path="${link.value}">note</span> ${matchPreviewPath[link.match]} <b>${link.value}</b>`;
}
function updateDisplay(textArea, link, settings) {
    let toDisplay = displayText(link, settings);
    let disabled = false;
    if (link.type === 'tag') {
        if (!link.value) {
            disabled = true;
        }
    }
    else if (link.type === 'attribute') {
        if (settings.targetAttributes.length === 0) {
            disabled = true;
        }
        else if (!link.name) {
            disabled = true;
        }
        else if (!link.value) {
            disabled = true;
        }
    }
    else {
        if (!link.value) {
            disabled = true;
        }
    }
    textArea.innerHTML = toDisplay;
    return disabled;
}
class CSSBuilderModal extends obsidian.Modal {
    constructor(plugin, saveCallback, cssLink = null) {
        super(plugin.app);
        this.cssLink = cssLink;
        if (!cssLink) {
            this.cssLink = new CSSLink();
        }
        this.plugin = plugin;
        this.saveCallback = saveCallback;
    }
    onOpen() {
        this.titleEl.setText(`Select what links to style!`);
        // is tag
        const matchAttrPlaceholder = "Attribute value to match.";
        const matchTagPlaceholder = "Note tag to match (without #).";
        const matchPathPlaceholder = "File path to match.";
        const matchAttrTxt = "Attribute value";
        const matchTagTxt = "Tag";
        const matchPathTxt = "Path";
        const cssLink = this.cssLink;
        const plugin = this.plugin;
        this.contentEl.addClass("supercharged-modal");
        // Type
        new obsidian.Setting(this.contentEl)
            .setName("Type of selector")
            .setDesc("Attributes selects YAML and DataView attributes" +
            ", tags chooses the tags of a note, and path considers the name of the note including in what folder it is.")
            .addDropdown(dc => {
            Object.keys(selectorType).forEach((type) => {
                dc.addOption(type, selectorType[type]);
                if (type === this.cssLink.type) {
                    dc.setValue(type);
                }
            });
            dc.onChange((type) => {
                cssLink.type = type;
                updateContainer(cssLink.type);
                saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
            });
        });
        // attribute name
        const attrName = new obsidian.Setting(this.contentEl)
            .setName("Attribute name")
            .setDesc("What attribute to target? Make sure to first add target attributes to the settings at the top!")
            .addDropdown(dc => {
            plugin.settings.targetAttributes.forEach((attribute) => {
                dc.addOption(attribute, attribute);
                if (attribute === cssLink.name) {
                    dc.setValue(attribute);
                }
            });
            dc.onChange(name => {
                cssLink.name = name;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // attribute value
        const attrValue = new obsidian.Setting(this.contentEl)
            .setName("Value to match")
            .setDesc("TODO")
            .addText(t => {
            t.setValue(cssLink.value);
            t.onChange(value => {
                cssLink.value = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        this.contentEl.createEl('h4', { text: 'Advanced' });
        // matching type
        const matchingType = new obsidian.Setting(this.contentEl)
            .setName("Matching type")
            .setDesc("How to compare the attribute or path with the given value.")
            .addDropdown(dc => {
            Object.keys(matchTypes).forEach((key) => {
                dc.addOption(key, matchTypes[key]);
                if (key == cssLink.match) {
                    dc.setValue(key);
                }
            });
            dc.onChange((value) => {
                cssLink.match = value;
                saveButton.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        // case sensitive
        const caseSensitiveTogglerContainer = new obsidian.Setting(this.contentEl)
            .setName("Case sensitive matching")
            .setDesc("Should the matching of the value be case sensitive?")
            .addToggle(b => {
            b.setValue(cssLink.matchCaseSensitive);
            b.onChange(value => {
                cssLink.matchCaseSensitive = value;
                b.setDisabled(updateDisplay(preview, cssLink, plugin.settings));
            });
        });
        if (!this.cssLink.name && this.plugin.settings.targetAttributes.length > 0) {
            this.cssLink.name = this.plugin.settings.targetAttributes[0];
        }
        const updateContainer = function (type) {
            if (type === 'attribute') {
                attrName.settingEl.show();
                attrValue.nameEl.setText(matchAttrTxt);
                attrValue.descEl.setText(matchAttrPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
            else if (type === 'tag') {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchTagTxt);
                attrValue.descEl.setText(matchTagPlaceholder);
                matchingType.settingEl.hide();
                caseSensitiveTogglerContainer.settingEl.hide();
            }
            else {
                attrName.settingEl.hide();
                attrValue.nameEl.setText(matchPathTxt);
                attrValue.descEl.setText(matchPathPlaceholder);
                matchingType.settingEl.show();
                caseSensitiveTogglerContainer.settingEl.show();
            }
        };
        new obsidian.Setting(this.contentEl)
            .setName("Style options")
            .setDesc("What styling options are active? " +
            "Disabling options you won't use can improve performance slightly.")
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectText = value;
            });
            t.setValue(cssLink.selectText);
            t.setTooltip("Style link text");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectPrepend = value;
            });
            t.setValue(cssLink.selectPrepend);
            t.setTooltip("Add content before link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectAppend = value;
            });
            t.setValue(cssLink.selectAppend);
            t.setTooltip("Add content after link");
        })
            .addToggle(t => {
            t.onChange(value => {
                cssLink.selectBackground = value;
            });
            t.setValue(cssLink.selectBackground);
            t.setTooltip("Add optional background or underline to link");
        });
        this.contentEl.createEl('h4', { text: 'Result' });
        const modal = this;
        const saveButton = new obsidian.Setting(this.contentEl)
            .setName("Preview")
            .setDesc("")
            .addButton(b => {
            b.setButtonText("Save");
            b.onClick(() => {
                modal.saveCallback(cssLink);
                modal.close();
            });
        });
        // generate button
        const preview = saveButton.nameEl;
        updateContainer(cssLink.type);
        saveButton.setDisabled(updateDisplay(preview, this.cssLink, this.plugin.settings));
    }
}

const colorSet = [[
        '#0089BA',
        '#2C73D2',
        '#008E9B',
        '#0081CF',
        '#008F7A',
        '#008E9B',
    ], [
        '#D65DB1',
        '#0082C1',
        '#9270D3',
        '#007F93',
        '#007ED9',
        '#007660',
    ], [
        '#FF9671',
        '#A36AAA',
        '#F27D88',
        '#6967A9',
        '#D26F9D',
        '#1b6299',
    ], [
        '#FFC75F',
        '#4C9A52',
        '#C3BB4E',
        '#00855B',
        '#88AC4B',
        '#006F61',
    ], [
        '#FF6F91',
        '#6F7F22',
        '#E07250',
        '#257A3E',
        '#AC7C26',
        '#006F5F',
    ], [
        '#d9d867',
        '#2FAB63',
        '#B8E067',
        '#008E63',
        '#78C664',
        '#007160',
    ]];
const colors = [];
for (const i of Array(6).keys()) {
    for (const j of Array(6).keys()) {
        colors.push(colorSet[j][i]);
    }
}
function hash(uid) {
    let hash = 0;
    for (let i = 0; i < uid.length; i++) {
        const char = uid.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; // Convert to 32bit integer
    }
    hash = Math.abs(hash);
    return hash;
}
function buildCSS(selectors, plugin) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const instructions = [
            "/* WARNING: This file will be overwritten by the plugin.",
            "Do not edit this file directly! First copy this file and rename it if you want to edit things. */",
            "",
            ":root {"
        ];
        selectors.forEach((selector, i) => {
            if (selector.selectText) {
                instructions.push(`    --${selector.uid}-color: ${colors[hash(selector.uid) % 36]};`);
                instructions.push(`    --${selector.uid}-weight: initial;`);
            }
            if (selector.selectPrepend) {
                instructions.push(`    --${selector.uid}-before: '';`);
            }
            if (selector.selectAppend) {
                instructions.push(`    --${selector.uid}-after: '';`);
            }
            if (selector.selectBackground) {
                instructions.push(`    --${selector.uid}-background-color: #ffffff;`);
                instructions.push(`    --${selector.uid}-decoration: initial;`);
            }
        });
        instructions.push("}");
        selectors.forEach(selector => {
            let cssSelector;
            if (selector.type === 'attribute') {
                cssSelector = `[data-link-${selector.name}${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : " i"}]`;
            }
            else if (selector.type === 'tag') {
                cssSelector = `[data-link-tags*="${selector.value}" i]`;
            }
            else {
                cssSelector = `[data-link-path${matchSign[selector.match]}="${selector.value}" ${selector.matchCaseSensitive ? "" : "i"}]`;
            }
            if (selector.selectText) {
                instructions.push(...[
                    "",
                    `div[data-id="${selector.uid}"] div.setting-item-description,`,
                    cssSelector + " {",
                    `    color: var(--${selector.uid}-color) !important;`,
                    `    font-weight: var(--${selector.uid}-weight);`,
                    "}"
                ]);
            }
            if (selector.selectBackground) {
                instructions.push(...["",
                    `.c-${selector.uid}-use-background div[data-id="${selector.uid}"] div.setting-item-description,`,
                    `.c-${selector.uid}-use-background .data-link-text${cssSelector} {`,
                    `    background-color: var(--${selector.uid}-background-color) !important;`,
                    `    border-radius: 5px;`,
                    `    padding-left: 2px;`,
                    `    padding-right: 2px;`,
                    `    text-decoration: var(--${selector.uid}-decoration) !important;`,
                    "}"]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::before,`,
                    `.data-link-icon${cssSelector}::before {`,
                    `    content: var(--${selector.uid}-before);`,
                    "}"]);
            }
            if (selector.selectAppend) {
                instructions.push(...["",
                    `div[data-id="${selector.uid}"] div.setting-item-description::after,`,
                    `.data-link-icon-after${cssSelector}::after {`,
                    `    content: var(--${selector.uid}-after);`,
                    "}"]);
            }
        });
        instructions.push(...[
            "/* @settings",
            "name: Supercharged Links",
            "id: supercharged-links",
            "settings:",
        ]);
        selectors.forEach((selector, i) => {
            let name = selector.name;
            let value = selector.value;
            if (selector.type === 'tag') {
                name = 'tag';
                // value = "\#" + value;
            }
            else if (selector.type === 'path') {
                name = 'path';
            }
            instructions.push(...[
                "    - ",
                `        id: ${selector.uid}`,
                `        title: ${name} is ${value}`,
                `        description: Example note`,
                "        type: heading",
                "        collapsed: true",
                "        level: 3"
            ]);
            if (selector.selectText) {
                instructions.push(...[
                    "    - ",
                    `        id: ${selector.uid}-color`,
                    `        title: Link color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '${colors[hash(selector.uid) % 36]}'`,
                    "    - ",
                    `        id: ${selector.uid}-weight`,
                    `        title: Font weight`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - lighter`,
                    `            - normal`,
                    `            - bold`,
                    `            - bolder`,
                    "    - ",
                    `        id: ${selector.uid}-decoration`,
                    `        title: Font decoration`,
                    "        type: variable-select",
                    `        default: initial`,
                    `        options:`,
                    `            - initial`,
                    `            - underline`,
                    `            - overline`,
                    `            - line-through`
                ]);
            }
            if (selector.selectPrepend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-before`,
                    `        title: Prepend text`,
                    `        description: Add some text, such as an emoji, before the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectAppend) {
                instructions.push(...["    - ",
                    `        id: ${selector.uid}-after`,
                    `        title: Append text`,
                    `        description: Add some text, such as an emoji, after the links.`,
                    "        type: variable-text",
                    `        default: ''`,
                    `        quotes: true`]);
            }
            if (selector.selectBackground) {
                instructions.push(...["    - ",
                    `        id: c-${selector.uid}-use-background`,
                    `        title: Use background color`,
                    `        description: Adds a background color to the link. This can look buggy in live preview.`,
                    "        type: class-toggle",
                    "    - ",
                    `        id: ${selector.uid}-background-color`,
                    `        title: Background color`,
                    "        type: variable-color",
                    "        format: hex",
                    `        default: '#ffffff'`]);
            }
        });
        instructions.push("*/");
        const vault = plugin.app.vault;
        const configDir = (_a = vault.configDir) !== null && _a !== void 0 ? _a : ".obsidian";
        const pathDir = configDir + "/snippets";
        yield vault.adapter.mkdir(pathDir);
        const path = pathDir + "/supercharged-links-gen.css";
        if (yield vault.adapter.exists(path)) {
            yield vault.adapter.remove(path);
        }
        yield plugin.app.vault.create(path, instructions.join('\n'));
        // Activate snippet
        if (plugin.settings.activateSnippet) {
            // @ts-ignore
            const customCss = plugin.app.customCss;
            customCss.readCssFolders();
            customCss.setCssEnabledStatus('supercharged-links-gen', true);
        }
        // Ensure Style Settings reads changes
        plugin.app.workspace.trigger("parse-style-settings");
    });
}

class SuperchargedLinksSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
        this.debouncedGenerate = obsidian.debounce(this._generateSnippet, 1000, true);
    }
    display() {
        let { containerEl } = this;
        containerEl.empty();
        /* Managing extra attirbutes for a.internal-link */
        new obsidian.Setting(containerEl)
            .setName('Target Attributes for styling')
            .setDesc('Frontmatter attributes to target, comma separated')
            .addTextArea((text) => {
            text
                .setPlaceholder('Enter attributes as string, comma separated')
                .setValue(this.plugin.settings.targetAttributes.join(', '))
                .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetAttributes = value.replace(/\s/g, '').split(',');
                if (this.plugin.settings.targetAttributes.length === 1 && !this.plugin.settings.targetAttributes[0]) {
                    this.plugin.settings.targetAttributes = [];
                }
                yield this.plugin.saveSettings();
            }));
            text.inputEl.rows = 6;
            text.inputEl.cols = 25;
        });
        containerEl.createEl('h4', { text: 'Styling' });
        const styleSettingDescription = containerEl.createDiv();
        styleSettingDescription.innerHTML = `
Styling can be done using the Style Settings plugin. 
 <ol>
 <li>Create selectors down below.</li>
 <li>Go to the Style Settings tab and style your links!</li>
</ol>`;
        const selectorDiv = containerEl.createDiv();
        this.drawSelectors(selectorDiv);
        containerEl.createEl('h4', { text: 'Settings' });
        new obsidian.Setting(containerEl)
            .setName('Enable in Editor')
            .setDesc('If true, this will also supercharge internal links in the editor view of a note.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableEditor);
            toggle.onChange(value => {
                this.plugin.settings.enableEditor = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in File Browser')
            .setDesc('If true, this will also supercharge the file browser.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableFileList);
            toggle.onChange(value => {
                this.plugin.settings.enableFileList = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Plugins')
            .setDesc('If true, this will also supercharge plugins like the backlinks and forward links panels.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableBacklinks);
            toggle.onChange(value => {
                this.plugin.settings.enableBacklinks = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Quick Switcher')
            .setDesc('If true, this will also supercharge the quick switcher.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableQuickSwitcher);
            toggle.onChange(value => {
                this.plugin.settings.enableQuickSwitcher = value;
                this.plugin.saveSettings();
            });
        });
        new obsidian.Setting(containerEl)
            .setName('Enable in Link Autocompleter')
            .setDesc('If true, this will also supercharge the link autocompleter.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.enableSuggestor);
            toggle.onChange(value => {
                this.plugin.settings.enableSuggestor = value;
                this.plugin.saveSettings();
            });
        });
        containerEl.createEl('h4', { text: 'Advanced' });
        // Managing choice wether you want to parse tags both from normal tags and in the frontmatter
        new obsidian.Setting(containerEl)
            .setName('Parse all tags in the file')
            .setDesc('Sets the `data-link-tags`-attribute to look for tags both in the frontmatter and in the file as #tag-name')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.targetTags);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.targetTags = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Managing choice wether you get attributes from inline fields and frontmatter or only frontmater
        new obsidian.Setting(containerEl)
            .setName('Search for attribute in Inline fields like <field::>')
            .setDesc('Sets the `data-link-<field>`-attribute to the value of inline fields')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.getFromInlineField);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.getFromInlineField = value;
                yield this.plugin.saveSettings();
            }));
        });
        // Automatically activate snippet
        new obsidian.Setting(containerEl)
            .setName('Automatically activate snippet')
            .setDesc('If true, this will automatically activate the generated CSS snippet "supercharged-links-gen.css". ' +
            'Turn this off if you don\'t want this to happen.')
            .addToggle(toggle => {
            toggle.setValue(this.plugin.settings.activateSnippet);
            toggle.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.activateSnippet = value;
                yield this.plugin.saveSettings();
            }));
        });
        /* Managing predefined values for properties */
        /* Manage menu options display*/
        new obsidian.Setting(containerEl)
            .setName("Display field options in context menu")
            .setDesc("This feature has been migrated to metadata-menu plugin https://github.com/mdelobelle/metadatamenu");
    }
    generateSnippet() {
        this.debouncedGenerate();
    }
    _generateSnippet() {
        return __awaiter(this, void 0, void 0, function* () {
            yield buildCSS(this.plugin.settings.selectors, this.plugin);
            // new Notice("Generated supercharged-links-gen.css");
        });
    }
    drawSelectors(div) {
        div.empty();
        this.generateSnippet();
        const selectors = this.plugin.settings.selectors;
        selectors.forEach((selector, i) => {
            const s = new obsidian.Setting(div)
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i + 1];
                    selectors[i + 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("down-arrow-with-tail");
                button.setTooltip("Move selector down");
                if (i === selectors.length - 1) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const oldSelector = selectors[i - 1];
                    selectors[i - 1] = selector;
                    selectors[i] = oldSelector;
                    this.drawSelectors(div);
                });
                button.setIcon("up-arrow-with-tail");
                button.setTooltip("Move selector up");
                if (i === 0) {
                    button.setDisabled(true);
                }
            })
                .addButton(button => {
                button.onClick(() => {
                    const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                        this.plugin.settings.selectors[i] = newSelector;
                        this.plugin.saveSettings();
                        updateDisplay(s.nameEl, selector, this.plugin.settings);
                        this.generateSnippet();
                    }, selector);
                    formModal.open();
                });
                button.setIcon("pencil");
                button.setTooltip("Edit selector");
            })
                .addButton(button => {
                button.onClick(() => {
                    this.plugin.settings.selectors.remove(selector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                });
                button.setIcon("cross");
                button.setTooltip("Remove selector");
            });
            updateDisplay(s.nameEl, selector, this.plugin.settings);
        });
        new obsidian.Setting(div)
            .setName("New selector")
            .setDesc("Create a new selector to style with Style Settings.")
            .addButton(button => {
            button.onClick(() => {
                const formModal = new CSSBuilderModal(this.plugin, (newSelector) => {
                    this.plugin.settings.selectors.push(newSelector);
                    this.plugin.saveSettings();
                    this.drawSelectors(div);
                    // TODO: Force redraw somehow?
                });
                formModal.open();
            });
            button.setButtonText("New");
        });
    }
}

function clearExtraAttributes(link) {
    Object.values(link.attributes).forEach(attr => {
        if (attr.name.includes("data-link")) {
            link.removeAttribute(attr.name);
        }
    });
}
function fetchTargetAttributesSync(app, settings, dest, addDataHref) {
    var _a;
    let new_props = { tags: "" };
    const cache = app.metadataCache.getFileCache(dest);
    if (!cache)
        return new_props;
    const frontmatter = cache.frontmatter;
    if (frontmatter) {
        settings.targetAttributes.forEach(attribute => {
            if (Object.keys(frontmatter).includes(attribute)) {
                if (attribute === 'tag' || attribute === 'tags') {
                    new_props['tags'] += frontmatter[attribute];
                }
                else {
                    new_props[attribute] = frontmatter[attribute];
                }
            }
        });
    }
    if (settings.targetTags) {
        new_props["tags"] += obsidian.getAllTags(cache).join(' ');
    }
    if (addDataHref) {
        new_props['data-href'] = dest.basename;
    }
    new_props['path'] = dest.path;
    //@ts-ignore
    const getResults = (api) => {
        const page = api.page(dest.path);
        if (!page) {
            return;
        }
        settings.targetAttributes.forEach((field) => {
            const value = page[field];
            if (value)
                new_props[field] = value;
        });
    };
    if (settings.getFromInlineField && app.plugins.enabledPlugins.has("dataview")) {
        const api = (_a = app.plugins.plugins.dataview) === null || _a === void 0 ? void 0 : _a.api;
        if (api) {
            getResults(api);
        }
        else
            this.plugin.registerEvent(this.app.metadataCache.on("dataview:api-ready", (api) => getResults(api)));
    }
    return new_props;
}
function setLinkNewProps(link, new_props) {
    // @ts-ignore
    for (const a of link.attributes) {
        if (a.name.includes("data-link") && !(a.name in new_props)) {
            link.removeAttribute(a.name);
        }
    }
    Object.keys(new_props).forEach(key => {
        const name = "data-link-" + key;
        const newValue = new_props[key];
        const curValue = link.getAttribute(name);
        // Only update if value is different
        if (!newValue || curValue != newValue) {
            link.setAttribute("data-link-" + key, new_props[key]);
        }
    });
    if (!link.hasClass("data-link-icon")) {
        link.addClass("data-link-icon");
    }
    if (!link.hasClass("data-link-icon-after")) {
        link.addClass("data-link-icon-after");
    }
    if (!link.hasClass("data-link-text")) {
        link.addClass("data-link-text");
    }
}
function updateLinkExtraAttributes(app, settings, link, destName) {
    const linkHref = link.getAttribute('href').split('#')[0];
    const dest = app.metadataCache.getFirstLinkpathDest(linkHref, destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
        setLinkNewProps(link, new_props);
    }
}
function updateDivExtraAttributes(app, settings, link, destName, linkName) {
    if (!linkName) {
        linkName = link.textContent;
    }
    const dest = app.metadataCache.getFirstLinkpathDest(obsidian.getLinkpath(linkName), destName);
    if (dest) {
        const new_props = fetchTargetAttributesSync(app, settings, dest, true);
        setLinkNewProps(link, new_props);
    }
}
function updateElLinks(app, plugin, el, ctx) {
    const settings = plugin.settings;
    const links = el.querySelectorAll('a.internal-link');
    const destName = ctx.sourcePath.replace(/(.*).md/, "$1");
    links.forEach((link) => {
        updateLinkExtraAttributes(app, settings, link, destName);
    });
}
function updateVisibleLinks(app, plugin) {
    const settings = plugin.settings;
    app.workspace.iterateRootLeaves((leaf) => {
        if (leaf.view instanceof obsidian.MarkdownView && leaf.view.file) {
            const file = leaf.view.file;
            const cachedFile = app.metadataCache.getFileCache(file);
            if (cachedFile.links) {
                cachedFile.links.forEach((link) => {
                    const fileName = file.path.replace(/(.*).md/, "$1");
                    const dest = app.metadataCache.getFirstLinkpathDest(link.link, fileName);
                    if (dest) {
                        const new_props = fetchTargetAttributesSync(app, settings, dest, false);
                        const internalLinks = leaf.view.containerEl.querySelectorAll(`a.internal-link[href="${link.link}"]`);
                        internalLinks.forEach((internalLink) => setLinkNewProps(internalLink, new_props));
                    }
                });
            }
        }
    });
}

const DEFAULT_SETTINGS = {
    targetAttributes: [],
    targetTags: true,
    getFromInlineField: true,
    activateSnippet: true,
    enableEditor: true,
    enableFileList: true,
    enableBacklinks: true,
    enableQuickSwitcher: true,
    enableSuggestor: true,
    selectors: []
};

function buildCMViewPlugin(app, _settings) {
    // Implements the live preview supercharging
    // Code structure based on https://github.com/nothingislost/obsidian-cm6-attributes/blob/743d71b0aa616407149a0b6ea5ffea28e2154158/src/main.ts
    // Code help credits to @NothingIsLost! They have been a great help getting this to work properly.
    class HeaderWidget extends view.WidgetType {
        constructor(attributes, after) {
            super();
            this.attributes = attributes;
            this.after = after;
        }
        toDOM() {
            let headerEl = document.createElement("span");
            headerEl.setAttrs(this.attributes);
            if (this.after) {
                headerEl.addClass('data-link-icon-after');
            }
            else {
                headerEl.addClass('data-link-icon');
            }
            // create a naive bread crumb
            return headerEl;
        }
        ignoreEvent() {
            return true;
        }
    }
    const settings = _settings;
    const viewPlugin = view.ViewPlugin.fromClass(class {
        constructor(view) {
            this.decorations = this.buildDecorations(view);
        }
        update(update) {
            if (update.docChanged || update.viewportChanged) {
                this.decorations = this.buildDecorations(update.view);
            }
        }
        destroy() {
        }
        buildDecorations(view$1) {
            let builder = new state.RangeSetBuilder();
            if (!settings.enableEditor) {
                return builder.finish();
            }
            const mdView = view$1.state.field(obsidian.editorViewField);
            let lastAttributes = {};
            let iconDecoAfter = null;
            let iconDecoAfterWhere = null;
            let mdAliasFrom = null;
            let mdAliasTo = null;
            for (let { from, to } of view$1.visibleRanges) {
                language.syntaxTree(view$1.state).iterate({
                    from,
                    to,
                    enter: (node) => {
                        const tokenProps = node.type.prop(language.tokenClassNodeProp);
                        if (tokenProps) {
                            const props = new Set(tokenProps.split(" "));
                            const isLink = props.has("hmd-internal-link");
                            const isAlias = props.has("link-alias");
                            const isPipe = props.has("link-alias-pipe");
                            // The 'alias' of the md link
                            const isMDLink = props.has('link');
                            // The 'internal link' of the md link
                            const isMDUrl = props.has('url');
                            const isMDFormatting = props.has('formatting-link');
                            if (isMDLink && !isMDFormatting) {
                                // Link: The 'alias'
                                // URL: The internal link
                                mdAliasFrom = node.from;
                                mdAliasTo = node.to;
                            }
                            if (!isPipe && !isAlias) {
                                if (iconDecoAfter) {
                                    builder.add(iconDecoAfterWhere, iconDecoAfterWhere, iconDecoAfter);
                                    iconDecoAfter = null;
                                    iconDecoAfterWhere = null;
                                }
                            }
                            if (isLink && !isAlias && !isPipe || isMDUrl) {
                                let linkText = view$1.state.doc.sliceString(node.from, node.to);
                                linkText = linkText.split("#")[0];
                                let file = app.metadataCache.getFirstLinkpathDest(linkText, mdView.file.basename);
                                if (isMDUrl && !file) {
                                    try {
                                        file = app.vault.getAbstractFileByPath(decodeURIComponent(linkText));
                                    }
                                    catch (e) { }
                                }
                                if (file) {
                                    let _attributes = fetchTargetAttributesSync(app, settings, file, true);
                                    let attributes = {};
                                    for (let key in _attributes) {
                                        attributes["data-link-" + key] = _attributes[key];
                                    }
                                    let deco = view.Decoration.mark({
                                        attributes,
                                        class: "data-link-text"
                                    });
                                    let iconDecoBefore = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, false),
                                    });
                                    iconDecoAfter = view.Decoration.widget({
                                        widget: new HeaderWidget(attributes, true),
                                    });
                                    if (isMDUrl) {
                                        // Apply retroactively to the alias found before
                                        let deco = view.Decoration.mark({
                                            attributes: attributes,
                                            class: "data-link-text"
                                        });
                                        builder.add(mdAliasFrom, mdAliasFrom, iconDecoBefore);
                                        builder.add(mdAliasFrom, mdAliasTo, deco);
                                        if (iconDecoAfter) {
                                            builder.add(mdAliasTo, mdAliasTo, iconDecoAfter);
                                            iconDecoAfter = null;
                                            iconDecoAfterWhere = null;
                                            mdAliasFrom = null;
                                            mdAliasTo = null;
                                        }
                                    }
                                    else {
                                        builder.add(node.from, node.from, iconDecoBefore);
                                    }
                                    builder.add(node.from, node.to, deco);
                                    lastAttributes = attributes;
                                    iconDecoAfterWhere = node.to;
                                }
                            }
                            else if (isLink && isAlias) {
                                let deco = view.Decoration.mark({
                                    attributes: lastAttributes,
                                    class: "data-link-text"
                                });
                                builder.add(node.from, node.to, deco);
                                if (iconDecoAfter) {
                                    builder.add(node.to, node.to, iconDecoAfter);
                                    iconDecoAfter = null;
                                    iconDecoAfterWhere = null;
                                }
                            }
                        }
                    }
                });
            }
            return builder.finish();
        }
    }, {
        decorations: v => v.decorations
    });
    return viewPlugin;
}

class SuperchargedLinks extends obsidian.Plugin {
    constructor() {
        super(...arguments);
        this.modalObservers = [];
    }
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            console.log('Supercharged links loaded');
            yield this.loadSettings();
            this.addSettingTab(new SuperchargedLinksSettingTab(this.app, this));
            this.registerMarkdownPostProcessor((el, ctx) => {
                updateElLinks(this.app, this, el, ctx);
            });
            // Plugins watching
            this.registerEvent(this.app.metadataCache.on('changed', obsidian.debounce((_file) => {
                updateVisibleLinks(this.app, this);
                this.observers.forEach(([observer, type, own_class]) => {
                    const leaves = this.app.workspace.getLeavesOfType(type);
                    leaves.forEach(leaf => {
                        this.updateContainer(leaf.view.containerEl, this, own_class);
                    });
                });
                // Debounced to prevent lag when writing
            }, 4500, true)));
            // Live preview
            const ext = state.Prec.lowest(buildCMViewPlugin(this.app, this.settings));
            this.registerEditorExtension(ext);
            this.observers = [];
            this.app.workspace.onLayoutReady(() => {
                this.initViewObservers(this);
                this.initModalObservers(this, document);
            });
            this.registerEvent(this.app.workspace.on("window-open", (window, win) => this.initModalObservers(this, window.getContainer().doc)));
            this.registerEvent(this.app.workspace.on("layout-change", () => this.initViewObservers(this)));
        });
    }
    initViewObservers(plugin) {
        var _a, _b, _c, _d, _e, _f;
        // Reset observers
        plugin.observers.forEach(([observer, type]) => {
            observer.disconnect();
        });
        plugin.observers = [];
        // Register new observers
        plugin.registerViewType('backlink', plugin, ".tree-item-inner", true);
        plugin.registerViewType('outgoing-link', plugin, ".tree-item-inner", true);
        plugin.registerViewType('search', plugin, ".tree-item-inner");
        plugin.registerViewType('BC-matrix', plugin, '.BC-Link');
        plugin.registerViewType('BC-ducks', plugin, '.internal-link');
        plugin.registerViewType('BC-tree', plugin, 'a.internal-link');
        plugin.registerViewType('graph-analysis', plugin, '.internal-link');
        plugin.registerViewType('starred', plugin, '.nav-file-title-content');
        plugin.registerViewType('file-explorer', plugin, '.nav-file-title-content');
        plugin.registerViewType('recent-files', plugin, '.nav-file-title-content');
        // If backlinks in editor is on
        // @ts-ignore
        if ((_f = (_e = (_d = (_c = (_b = (_a = plugin.app) === null || _a === void 0 ? void 0 : _a.internalPlugins) === null || _b === void 0 ? void 0 : _b.plugins) === null || _c === void 0 ? void 0 : _c.backlink) === null || _d === void 0 ? void 0 : _d.instance) === null || _e === void 0 ? void 0 : _e.options) === null || _f === void 0 ? void 0 : _f.backlinkInDocument) {
            plugin.registerViewType('markdown', plugin, '.tree-item-inner', true);
        }
    }
    initModalObservers(plugin, doc) {
        const config = {
            subtree: false,
            childList: true,
            attributes: false
        };
        this.modalObservers.push(new MutationObserver(records => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach(n => {
                        if ('className' in n &&
                            // @ts-ignore
                            (n.className.includes('modal-container') && plugin.settings.enableQuickSwitcher
                                // @ts-ignore
                                || n.className.includes('suggestion-container') && plugin.settings.enableSuggestor)) {
                            let selector = ".suggestion-title, .suggestion-note, .another-quick-switcher__item__title, .omnisearch-result__title";
                            // @ts-ignore
                            if (n.className.includes('suggestion-container')) {
                                selector = ".suggestion-title, .suggestion-note";
                            }
                            plugin.updateContainer(n, plugin, selector);
                            plugin._watchContainer(null, n, plugin, selector);
                        }
                    });
                }
            });
        }));
        this.modalObservers.last().observe(doc.body, config);
    }
    registerViewType(viewTypeName, plugin, selector, updateDynamic = false) {
        const leaves = this.app.workspace.getLeavesOfType(viewTypeName);
        if (leaves.length > 1) {
            for (let i = 0; i < leaves.length; i++) {
                const container = leaves[i].view.containerEl;
                if (updateDynamic) {
                    plugin._watchContainerDynamic(viewTypeName + i, container, plugin, selector);
                }
                else {
                    plugin._watchContainer(viewTypeName + i, container, plugin, selector);
                }
            }
        }
        else if (leaves.length < 1)
            return;
        else {
            const container = leaves[0].view.containerEl;
            this.updateContainer(container, plugin, selector);
            if (updateDynamic) {
                plugin._watchContainerDynamic(viewTypeName, container, plugin, selector);
            }
            else {
                plugin._watchContainer(viewTypeName, container, plugin, selector);
            }
        }
    }
    updateContainer(container, plugin, selector) {
        if (!plugin.settings.enableBacklinks)
            return;
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            updateDivExtraAttributes(plugin.app, plugin.settings, el, "");
        }
    }
    removeFromContainer(container, selector) {
        const nodes = container.findAll(selector);
        for (let i = 0; i < nodes.length; ++i) {
            const el = nodes[i];
            clearExtraAttributes(el);
        }
    }
    _watchContainer(viewType, container, plugin, selector) {
        let observer = new MutationObserver((records, _) => {
            plugin.updateContainer(container, plugin, selector);
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        if (viewType) {
            plugin.observers.push([observer, viewType, selector]);
        }
    }
    _watchContainerDynamic(viewType, container, plugin, selector, own_class = 'tree-item-inner', parent_class = 'tree-item') {
        // Used for efficient updating of the backlinks panel
        // Only loops through newly added DOM nodes instead of changing all of them
        let observer = new MutationObserver((records, _) => {
            records.forEach((mutation) => {
                if (mutation.type === 'childList') {
                    mutation.addedNodes.forEach((n) => {
                        if ('className' in n) {
                            // @ts-ignore
                            if (n.className.includes && typeof n.className.includes === 'function' && n.className.includes(parent_class)) {
                                const fileDivs = n.getElementsByClassName(own_class);
                                for (let i = 0; i < fileDivs.length; ++i) {
                                    const link = fileDivs[i];
                                    updateDivExtraAttributes(plugin.app, plugin.settings, link, "");
                                }
                            }
                        }
                    });
                }
            });
        });
        observer.observe(container, { subtree: true, childList: true, attributes: false });
        plugin.observers.push([observer, viewType, selector]);
    }
    onunload() {
        this.observers.forEach(([observer, type, own_class]) => {
            observer.disconnect();
            const leaves = this.app.workspace.getLeavesOfType(type);
            leaves.forEach(leaf => {
                this.removeFromContainer(leaf.view.containerEl, own_class);
            });
        });
        for (const observer of this.modalObservers) {
            observer.disconnect();
        }
        console.log('Supercharged links unloaded');
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.saveData(this.settings);
        });
    }
}

module.exports = SuperchargedLinks;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy9jc3NCdWlsZGVyL2Nzc0xpbmsudHMiLCJzcmMvY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWwudHMiLCJzcmMvY3NzQnVpbGRlci9jc3NCdWlsZGVyLnRzIiwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ1RhYi50cyIsInNyYy9saW5rQXR0cmlidXRlcy9saW5rQXR0cmlidXRlcy50cyIsInNyYy9zZXR0aW5ncy9TdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLnRzIiwic3JjL2xpbmtBdHRyaWJ1dGVzL2xpdmVQcmV2aWV3LnRzIiwibWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImV4cG9ydCB0eXBlIE1hdGNoVHlwZXMgPSAnZXhhY3QnIHwgJ2NvbnRhaW5zJyB8ICdzdGFydHN3aXRoJyB8ICdlbmRzd2l0aCcgfCAnd2hpdGVTcGFjZSc7XG5leHBvcnQgdHlwZSBTZWxlY3RvclR5cGVzID0gJ2F0dHJpYnV0ZScgfCAndGFnJyB8ICdwYXRoJztcbmludGVyZmFjZSBDU1NMaW5rIHtcbiAgICB0eXBlOiBTZWxlY3RvclR5cGVzXG4gICAgbmFtZTogc3RyaW5nXG4gICAgdmFsdWU6IHN0cmluZ1xuICAgIG1hdGNoQ2FzZVNlbnNpdGl2ZTogYm9vbGVhblxuICAgIG1hdGNoOiBNYXRjaFR5cGVzXG4gICAgdWlkOiBzdHJpbmdcbiAgICBzZWxlY3RUZXh0OiBib29sZWFuXG4gICAgc2VsZWN0QmFja2dyb3VuZDogYm9vbGVhblxuICAgIHNlbGVjdEFwcGVuZDogYm9vbGVhblxuICAgIHNlbGVjdFByZXBlbmQ6IGJvb2xlYW5cbn1cblxuY29uc3QgbWF0Y2hUeXBlczogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJFeGFjdCBtYXRjaFwiLFxuICAgICdjb250YWlucyc6IFwiQ29udGFpbnMgdmFsdWVcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiVmFsdWUgd2l0aGluIHdoaXRlc3BhY2Ugc2VwYXJhdGVkIHdvcmRzXCIsXG4gICAgJ3N0YXJ0c3dpdGgnOiBcIlN0YXJ0cyB3aXRoIHRoaXMgdmFsdWVcIixcbiAgICAnZW5kc3dpdGgnOiBcIkVuZHMgd2l0aCB0aGlzIHZhbHVlXCJcbn1cblxuZXhwb3J0IGNvbnN0IG1hdGNoU2lnbjogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJcIixcbiAgICAnY29udGFpbnMnOiBcIipcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwiXlwiLFxuICAgICdlbmRzd2l0aCc6IFwiJFwiLFxuICAgICd3aGl0ZVNwYWNlJzogXCJ+XCJcbn1cblxuZXhwb3J0IGNvbnN0IG1hdGNoUHJldmlldzogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJ3aXRoIHZhbHVlXCIsXG4gICAgJ2NvbnRhaW5zJzogXCJjb250YWluaW5nXCIsXG4gICAgJ3doaXRlU3BhY2UnOiBcImNvbnRhaW5pbmdcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwic3RhcnRpbmcgd2l0aFwiLFxuICAgICdlbmRzd2l0aCc6IFwiZW5kaW5nIHdpdGhcIlxufVxuXG5leHBvcnQgY29uc3QgbWF0Y2hQcmV2aWV3UGF0aDogUmVjb3JkPE1hdGNoVHlwZXMsIHN0cmluZz4gPSB7XG4gICAgJ2V4YWN0JzogXCJpc1wiLFxuICAgICdjb250YWlucyc6IFwiY29udGFpbnNcIixcbiAgICAnd2hpdGVTcGFjZSc6IFwiY29udGFpbnNcIixcbiAgICAnc3RhcnRzd2l0aCc6IFwic3RhcnRzIHdpdGhcIixcbiAgICAnZW5kc3dpdGgnOiBcImVuZHMgd2l0aFwiXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvclR5cGU6IFJlY29yZDxTZWxlY3RvclR5cGVzLCBzdHJpbmc+ID0ge1xuICAgICdhdHRyaWJ1dGUnOiAnQXR0cmlidXRlIHZhbHVlJyxcbiAgICAndGFnJzogJ1RhZycsXG4gICAgJ3BhdGgnOiAnTm90ZSBwYXRoJ1xufVxuXG5jbGFzcyBDU1NMaW5rIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gJ2F0dHJpYnV0ZSc7XG4gICAgICAgIHRoaXMubmFtZSA9IFwiXCI7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLm1hdGNoQ2FzZVNlbnNpdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLm1hdGNoID0gXCJleGFjdFwiO1xuICAgICAgICBsZXQgczQgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMClcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAgICAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICAgICAgfVxuICAgICAgICAvL3JldHVybiBpZCBvZiBmb3JtYXQgJ2FhYWFhYWFhJy0nYWFhYSctJ2FhYWEnLSdhYWFhJy0nYWFhYWFhYWFhYWFhJ1xuICAgICAgICB0aGlzLnVpZCA9IHM0KCkgKyBcIi1cIiArIHM0KCk7XG4gICAgICAgIHRoaXMuc2VsZWN0VGV4dCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VsZWN0QXBwZW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3RQcmVwZW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWxlY3RCYWNrZ3JvdW5kID0gdHJ1ZTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IG1hdGNoVHlwZXMsIENTU0xpbmsgfSIsImltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQge1xuICAgIE1vZGFsLFxuICAgIFNldHRpbmdcbn0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7bWF0Y2hUeXBlcywgbWF0Y2hQcmV2aWV3LCBDU1NMaW5rLCBtYXRjaFByZXZpZXdQYXRoLCBzZWxlY3RvclR5cGUsIFNlbGVjdG9yVHlwZXMsIE1hdGNoVHlwZXN9IGZyb20gJy4vY3NzTGluaydcbmltcG9ydCB7U3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc30gZnJvbSBcIi4uL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3NcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlUZXh0KGxpbms6IENTU0xpbmssIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKTogc3RyaW5nIHtcbiAgICBpZiAobGluay50eXBlID09PSAndGFnJykge1xuICAgICAgICBpZiAoIWxpbmsudmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYSB0YWc8L2I+XCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGA8c3BhbiBjbGFzcz1cImRhdGEtbGluay1pY29uIGRhdGEtbGluay10ZXh0IGRhdGEtbGluay1pY29uLWFmdGVyXCIgZGF0YS1saW5rLXRhZ3M9XCIke2xpbmsudmFsdWV9XCI+Tm90ZTwvc3Bhbj4gaGFzIHRhZyA8YSBjbGFzcz1cInRhZ1wiPiMke2xpbmsudmFsdWV9PC9hPmA7XG4gICAgfVxuICAgIGVsc2UgaWYgKGxpbmsudHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gYDxiPk5vIGF0dHJpYnV0ZXMgYWRkZWQgdG8gXCJUYXJnZXQgYXR0cmlidXRlc1wiLiBHbyB0byBwbHVnaW4gc2V0dGluZ3MgdG8gYWRkIHRoZW0uPC9iPmBcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWxpbmsubmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIFwiPGI+UGxlYXNlIGNob29zZSBhbiBhdHRyaWJ1dGUgbmFtZS48L2I+XCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFsaW5rLnZhbHVlKXtcbiAgICAgICAgICAgIHJldHVybiBcIjxiPlBsZWFzZSBjaG9vc2UgYW4gYXR0cmlidXRlIHZhbHVlLjwvYj5cIlxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJkYXRhLWxpbmstaWNvbiBkYXRhLWxpbmstdGV4dCBkYXRhLWxpbmstaWNvbi1hZnRlclwiIGRhdGEtbGluay0ke2xpbmsubmFtZX09XCIke2xpbmsudmFsdWV9XCI+Tm90ZTwvc3Bhbj4gaGFzIGF0dHJpYnV0ZSA8Yj4ke2xpbmsubmFtZX08L2I+ICR7bWF0Y2hQcmV2aWV3W2xpbmsubWF0Y2hdfSA8Yj4ke2xpbmsudmFsdWV9PC9iPi5gO1xuICAgIH1cbiAgICBpZiAoIWxpbmsudmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIFwiPGI+UGxlYXNlIGNob29zZSBhIHBhdGguPC9iPlwiXG4gICAgfVxuICAgIHJldHVybiBgVGhlIHBhdGggb2YgdGhlIDxzcGFuIGNsYXNzPVwiZGF0YS1saW5rLWljb24gZGF0YS1saW5rLXRleHQgZGF0YS1saW5rLWljb24tYWZ0ZXJcIiBkYXRhLWxpbmstcGF0aD1cIiR7bGluay52YWx1ZX1cIj5ub3RlPC9zcGFuPiAke21hdGNoUHJldmlld1BhdGhbbGluay5tYXRjaF19IDxiPiR7bGluay52YWx1ZX08L2I+YFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRGlzcGxheSh0ZXh0QXJlYTogSFRNTEVsZW1lbnQsIGxpbms6IENTU0xpbmssIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKTogYm9vbGVhbiB7XG4gICAgbGV0IHRvRGlzcGxheTogc3RyaW5nID0gZGlzcGxheVRleHQobGluaywgc2V0dGluZ3MpO1xuICAgIGxldCBkaXNhYmxlZCA9IGZhbHNlO1xuICAgIGlmIChsaW5rLnR5cGUgPT09ICd0YWcnKSB7XG4gICAgICAgIGlmICghbGluay52YWx1ZSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGxpbmsudHlwZSA9PT0gJ2F0dHJpYnV0ZScpIHtcbiAgICAgICAgaWYgKHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIWxpbmsubmFtZSkge1xuICAgICAgICAgICAgZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFsaW5rLnZhbHVlKXtcbiAgICAgICAgICAgIGRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFsaW5rLnZhbHVlKSB7XG4gICAgICAgICAgICBkaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdGV4dEFyZWEuaW5uZXJIVE1MID0gdG9EaXNwbGF5O1xuICAgIHJldHVybiBkaXNhYmxlZDtcbn1cblxuY2xhc3MgQ1NTQnVpbGRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXG4gICAgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rc1xuICAgIGNzc0xpbms6IENTU0xpbmtcbiAgICBzYXZlQ2FsbGJhY2s6IChjc3NMaW5rOiBDU1NMaW5rKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgc2F2ZUNhbGxiYWNrOiAoY3NzTGluazogQ1NTTGluaykgPT4gdm9pZCwgY3NzTGluazogQ1NTTGluaz1udWxsKSB7XG4gICAgICAgIHN1cGVyKHBsdWdpbi5hcHApXG4gICAgICAgIHRoaXMuY3NzTGluayA9IGNzc0xpbms7XG4gICAgICAgIGlmICghY3NzTGluaykge1xuICAgICAgICAgICAgdGhpcy5jc3NMaW5rID0gbmV3IENTU0xpbmsoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5zYXZlQ2FsbGJhY2sgPSBzYXZlQ2FsbGJhY2s7XG4gICAgfVxuXG5cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoYFNlbGVjdCB3aGF0IGxpbmtzIHRvIHN0eWxlIWApXG4gICAgICAgIC8vIGlzIHRhZ1xuICAgICAgICBjb25zdCBtYXRjaEF0dHJQbGFjZWhvbGRlciA9IFwiQXR0cmlidXRlIHZhbHVlIHRvIG1hdGNoLlwiO1xuICAgICAgICBjb25zdCBtYXRjaFRhZ1BsYWNlaG9sZGVyID0gXCJOb3RlIHRhZyB0byBtYXRjaCAod2l0aG91dCAjKS5cIjtcbiAgICAgICAgY29uc3QgbWF0Y2hQYXRoUGxhY2Vob2xkZXIgPSBcIkZpbGUgcGF0aCB0byBtYXRjaC5cIjtcbiAgICAgICAgY29uc3QgbWF0Y2hBdHRyVHh0ID0gXCJBdHRyaWJ1dGUgdmFsdWVcIjtcbiAgICAgICAgY29uc3QgbWF0Y2hUYWdUeHQgPSBcIlRhZ1wiO1xuICAgICAgICBjb25zdCBtYXRjaFBhdGhUeHQgPSBcIlBhdGhcIjtcblxuICAgICAgICBjb25zdCBjc3NMaW5rID0gdGhpcy5jc3NMaW5rO1xuICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLnBsdWdpbjtcblxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5hZGRDbGFzcyhcInN1cGVyY2hhcmdlZC1tb2RhbFwiKTtcblxuICAgICAgICAvLyBUeXBlXG4gICAgICAgIG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJUeXBlIG9mIHNlbGVjdG9yXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkF0dHJpYnV0ZXMgc2VsZWN0cyBZQU1MIGFuZCBEYXRhVmlldyBhdHRyaWJ1dGVzXCIgK1xuICAgICAgICAgICAgICAgIFwiLCB0YWdzIGNob29zZXMgdGhlIHRhZ3Mgb2YgYSBub3RlLCBhbmQgcGF0aCBjb25zaWRlcnMgdGhlIG5hbWUgb2YgdGhlIG5vdGUgaW5jbHVkaW5nIGluIHdoYXQgZm9sZGVyIGl0IGlzLlwiKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRjID0+IHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzZWxlY3RvclR5cGUpLmZvckVhY2goKHR5cGU6IFNlbGVjdG9yVHlwZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGMuYWRkT3B0aW9uKHR5cGUsIHNlbGVjdG9yVHlwZVt0eXBlXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNzc0xpbmsudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGMuc2V0VmFsdWUodHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkYy5vbkNoYW5nZSgodHlwZTogU2VsZWN0b3JUeXBlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVDb250YWluZXIoY3NzTGluay50eXBlKTtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zZXREaXNhYmxlZCh1cGRhdGVEaXNwbGF5KHByZXZpZXcsIHRoaXMuY3NzTGluaywgdGhpcy5wbHVnaW4uc2V0dGluZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIGF0dHJpYnV0ZSBuYW1lXG4gICAgICAgIGNvbnN0IGF0dHJOYW1lID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkF0dHJpYnV0ZSBuYW1lXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIldoYXQgYXR0cmlidXRlIHRvIHRhcmdldD8gTWFrZSBzdXJlIHRvIGZpcnN0IGFkZCB0YXJnZXQgYXR0cmlidXRlcyB0byB0aGUgc2V0dGluZ3MgYXQgdGhlIHRvcCFcIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkYyA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cmlidXRlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGMuYWRkT3B0aW9uKGF0dHJpYnV0ZSwgYXR0cmlidXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gY3NzTGluay5uYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYy5zZXRWYWx1ZShhdHRyaWJ1dGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGMub25DaGFuZ2UobmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNzc0xpbmsubmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVCdXR0b24uc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCBjc3NMaW5rLCBwbHVnaW4uc2V0dGluZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAvLyBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgICAgY29uc3QgYXR0clZhbHVlID0gbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlZhbHVlIHRvIG1hdGNoXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlRPRE9cIilcbiAgICAgICAgICAgIC5hZGRUZXh0KHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYXZlQnV0dG9uLnNldERpc2FibGVkKHVwZGF0ZURpc3BsYXkocHJldmlldywgY3NzTGluaywgcGx1Z2luLnNldHRpbmdzKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDQnLCB7dGV4dDogJ0FkdmFuY2VkJ30pO1xuICAgICAgICAvLyBtYXRjaGluZyB0eXBlXG4gICAgICAgIGNvbnN0IG1hdGNoaW5nVHlwZSA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJNYXRjaGluZyB0eXBlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhvdyB0byBjb21wYXJlIHRoZSBhdHRyaWJ1dGUgb3IgcGF0aCB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cIilcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkYyA9PiB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXMobWF0Y2hUeXBlcykuZm9yRWFjaCgoa2V5OiBNYXRjaFR5cGVzKT0+IHtcbiAgICAgICAgICAgICAgICAgICAgZGMuYWRkT3B0aW9uKGtleSwgbWF0Y2hUeXBlc1trZXldKVxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09IGNzc0xpbmsubWF0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRjLnNldFZhbHVlKGtleSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgZGMub25DaGFuZ2UoKHZhbHVlOiBcImV4YWN0XCIgfCBcImNvbnRhaW5zXCIgfCBcInN0YXJ0c3dpdGhcIiB8IFwiZW5kc3dpdGhcIikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLm1hdGNoID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHNhdmVCdXR0b24uc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCBjc3NMaW5rLCBwbHVnaW4uc2V0dGluZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG5cblxuICAgICAgICAvLyBjYXNlIHNlbnNpdGl2ZVxuICAgICAgICBjb25zdCBjYXNlU2Vuc2l0aXZlVG9nZ2xlckNvbnRhaW5lciA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJDYXNlIHNlbnNpdGl2ZSBtYXRjaGluZ1wiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJTaG91bGQgdGhlIG1hdGNoaW5nIG9mIHRoZSB2YWx1ZSBiZSBjYXNlIHNlbnNpdGl2ZT9cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoYiA9PiB7XG4gICAgICAgICAgICAgICAgYi5zZXRWYWx1ZShjc3NMaW5rLm1hdGNoQ2FzZVNlbnNpdGl2ZSk7XG4gICAgICAgICAgICAgICAgYi5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNzc0xpbmsubWF0Y2hDYXNlU2Vuc2l0aXZlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGIuc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCBjc3NMaW5rLCBwbHVnaW4uc2V0dGluZ3MpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCF0aGlzLmNzc0xpbmsubmFtZSAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgdGhpcy5jc3NMaW5rLm5hbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdXBkYXRlQ29udGFpbmVyID0gZnVuY3Rpb24odHlwZTogU2VsZWN0b3JUeXBlcykge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgICAgICAgYXR0ck5hbWUuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgICAgICBhdHRyVmFsdWUubmFtZUVsLnNldFRleHQobWF0Y2hBdHRyVHh0KTtcbiAgICAgICAgICAgICAgICBhdHRyVmFsdWUuZGVzY0VsLnNldFRleHQobWF0Y2hBdHRyUGxhY2Vob2xkZXIpO1xuICAgICAgICAgICAgICAgIG1hdGNoaW5nVHlwZS5zZXR0aW5nRWwuc2hvdygpO1xuICAgICAgICAgICAgICAgIGNhc2VTZW5zaXRpdmVUb2dnbGVyQ29udGFpbmVyLnNldHRpbmdFbC5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSAndGFnJykge1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lLnNldHRpbmdFbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLm5hbWVFbC5zZXRUZXh0KG1hdGNoVGFnVHh0KTtcbiAgICAgICAgICAgICAgICBhdHRyVmFsdWUuZGVzY0VsLnNldFRleHQobWF0Y2hUYWdQbGFjZWhvbGRlcik7XG4gICAgICAgICAgICAgICAgbWF0Y2hpbmdUeXBlLnNldHRpbmdFbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZVRvZ2dsZXJDb250YWluZXIuc2V0dGluZ0VsLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGF0dHJOYW1lLnNldHRpbmdFbC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLm5hbWVFbC5zZXRUZXh0KG1hdGNoUGF0aFR4dCk7XG4gICAgICAgICAgICAgICAgYXR0clZhbHVlLmRlc2NFbC5zZXRUZXh0KG1hdGNoUGF0aFBsYWNlaG9sZGVyKTtcbiAgICAgICAgICAgICAgICBtYXRjaGluZ1R5cGUuc2V0dGluZ0VsLnNob3coKTtcbiAgICAgICAgICAgICAgICBjYXNlU2Vuc2l0aXZlVG9nZ2xlckNvbnRhaW5lci5zZXR0aW5nRWwuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFNldHRpbmcodGhpcy5jb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlN0eWxlIG9wdGlvbnNcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiV2hhdCBzdHlsaW5nIG9wdGlvbnMgYXJlIGFjdGl2ZT8gXCIgK1xuICAgICAgICAgICAgICAgIFwiRGlzYWJsaW5nIG9wdGlvbnMgeW91IHdvbid0IHVzZSBjYW4gaW1wcm92ZSBwZXJmb3JtYW5jZSBzbGlnaHRseS5cIilcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNzc0xpbmsuc2VsZWN0VGV4dCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZShjc3NMaW5rLnNlbGVjdFRleHQpO1xuICAgICAgICAgICAgICAgIHQuc2V0VG9vbHRpcChcIlN0eWxlIGxpbmsgdGV4dFwiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnNlbGVjdFByZXBlbmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RQcmVwZW5kKTtcbiAgICAgICAgICAgICAgICB0LnNldFRvb2x0aXAoXCJBZGQgY29udGVudCBiZWZvcmUgbGlua1wiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnNlbGVjdEFwcGVuZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdC5zZXRWYWx1ZShjc3NMaW5rLnNlbGVjdEFwcGVuZCk7XG4gICAgICAgICAgICAgICAgdC5zZXRUb29sdGlwKFwiQWRkIGNvbnRlbnQgYWZ0ZXIgbGlua1wiKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjc3NMaW5rLnNlbGVjdEJhY2tncm91bmQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIHQuc2V0VmFsdWUoY3NzTGluay5zZWxlY3RCYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICB0LnNldFRvb2x0aXAoXCJBZGQgb3B0aW9uYWwgYmFja2dyb3VuZCBvciB1bmRlcmxpbmUgdG8gbGlua1wiKTtcbiAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ2g0Jywge3RleHQ6ICdSZXN1bHQnfSk7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcztcbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJQcmV2aWV3XCIpXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlwiKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbihiID0+IHtcbiAgICAgICAgICAgICAgICBiLnNldEJ1dHRvblRleHQoXCJTYXZlXCIpXG4gICAgICAgICAgICAgICAgYi5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuc2F2ZUNhbGxiYWNrKGNzc0xpbmspO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIGdlbmVyYXRlIGJ1dHRvblxuXG4gICAgICAgIGNvbnN0IHByZXZpZXcgPSBzYXZlQnV0dG9uLm5hbWVFbDtcbiAgICAgICAgdXBkYXRlQ29udGFpbmVyKGNzc0xpbmsudHlwZSk7XG4gICAgICAgIHNhdmVCdXR0b24uc2V0RGlzYWJsZWQodXBkYXRlRGlzcGxheShwcmV2aWV3LCB0aGlzLmNzc0xpbmssIHRoaXMucGx1Z2luLnNldHRpbmdzKSk7XG4gICAgfVxuXG59XG5cbmV4cG9ydCB7IENTU0J1aWxkZXJNb2RhbCB9IiwiaW1wb3J0IHtDU1NMaW5rLCBtYXRjaFNpZ259IGZyb20gXCIuL2Nzc0xpbmtcIjtcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwiLi4vLi4vbWFpblwiO1xuXG5cbmNvbnN0IGNvbG9yU2V0ID0gW1tcbiAgICAnIzAwODlCQScsXG4gICAgJyMyQzczRDInLFxuICAgICcjMDA4RTlCJyxcbiAgICAnIzAwODFDRicsXG4gICAgJyMwMDhGN0EnLFxuICAgICcjMDA4RTlCJyxcbl0sIFtcbiAgICAnI0Q2NURCMScsXG4gICAgJyMwMDgyQzEnLFxuICAgICcjOTI3MEQzJyxcbiAgICAnIzAwN0Y5MycsXG4gICAgJyMwMDdFRDknLFxuICAgICcjMDA3NjYwJyxcbl0sIFtcbiAgICAnI0ZGOTY3MScsXG4gICAgJyNBMzZBQUEnLFxuICAgICcjRjI3RDg4JyxcbiAgICAnIzY5NjdBOScsXG4gICAgJyNEMjZGOUQnLFxuICAgICcjMWI2Mjk5Jyxcbl0sIFtcbiAgICAnI0ZGQzc1RicsXG4gICAgJyM0QzlBNTInLFxuICAgICcjQzNCQjRFJyxcbiAgICAnIzAwODU1QicsXG4gICAgJyM4OEFDNEInLFxuICAgICcjMDA2RjYxJyxcbl0sIFtcbiAgICAnI0ZGNkY5MScsXG4gICAgJyM2RjdGMjInLFxuICAgICcjRTA3MjUwJyxcbiAgICAnIzI1N0EzRScsXG4gICAgJyNBQzdDMjYnLFxuICAgICcjMDA2RjVGJyxcbl0sIFtcbiAgICAnI2Q5ZDg2NycsXG4gICAgJyMyRkFCNjMnLFxuICAgICcjQjhFMDY3JyxcbiAgICAnIzAwOEU2MycsXG4gICAgJyM3OEM2NjQnLFxuICAgICcjMDA3MTYwJyxcbl1dO1xuY29uc3QgY29sb3JzOiBzdHJpbmdbXSA9IFtdO1xuZm9yIChjb25zdCBpIG9mIEFycmF5KDYpLmtleXMoKSkge1xuICAgIGZvciAoY29uc3QgaiBvZiBBcnJheSg2KS5rZXlzKCkpIHtcbiAgICAgICAgY29sb3JzLnB1c2goY29sb3JTZXRbal1baV0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaGFzaCh1aWQ6IHN0cmluZykge1xuICAgIGxldCBoYXNoID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVpZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBjaGFyID0gdWlkLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGhhc2ggPSAoKGhhc2ggPDwgNSkgLSBoYXNoKSArIGNoYXI7XG4gICAgICAgIGhhc2ggPSBoYXNoICYgaGFzaDsgLy8gQ29udmVydCB0byAzMmJpdCBpbnRlZ2VyXG4gICAgfVxuICAgIGhhc2ggPSBNYXRoLmFicyhoYXNoKTtcbiAgICByZXR1cm4gaGFzaFxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRDU1Moc2VsZWN0b3JzOiBDU1NMaW5rW10sIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MpIHtcbiAgICBjb25zdCBpbnN0cnVjdGlvbnM6IHN0cmluZ1tdID0gW1xuICAgICAgICBcIi8qIFdBUk5JTkc6IFRoaXMgZmlsZSB3aWxsIGJlIG92ZXJ3cml0dGVuIGJ5IHRoZSBwbHVnaW4uXCIsXG4gICAgICAgIFwiRG8gbm90IGVkaXQgdGhpcyBmaWxlIGRpcmVjdGx5ISBGaXJzdCBjb3B5IHRoaXMgZmlsZSBhbmQgcmVuYW1lIGl0IGlmIHlvdSB3YW50IHRvIGVkaXQgdGhpbmdzLiAqL1wiLFxuICAgICAgICBcIlwiLFxuICAgICAgICBcIjpyb290IHtcIlxuICAgIF07XG5cblxuICAgIHNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvciwgaSkgPT4ge1xuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0VGV4dCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgICAtLSR7c2VsZWN0b3IudWlkfS1jb2xvcjogJHtjb2xvcnNbaGFzaChzZWxlY3Rvci51aWQpICUgMzZdfTtgKTtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0td2VpZ2h0OiBpbml0aWFsO2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RQcmVwZW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaChgICAgIC0tJHtzZWxlY3Rvci51aWR9LWJlZm9yZTogJyc7YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdEFwcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goYCAgICAtLSR7c2VsZWN0b3IudWlkfS1hZnRlcjogJyc7YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdEJhY2tncm91bmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjtgKTtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKGAgICAgLS0ke3NlbGVjdG9yLnVpZH0tZGVjb3JhdGlvbjogaW5pdGlhbDtgKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGluc3RydWN0aW9ucy5wdXNoKFwifVwiKTtcblxuICAgIHNlbGVjdG9ycy5mb3JFYWNoKHNlbGVjdG9yID0+IHtcbiAgICAgICAgbGV0IGNzc1NlbGVjdG9yOiBzdHJpbmc7XG4gICAgICAgIGlmIChzZWxlY3Rvci50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY3NzU2VsZWN0b3IgPSBgW2RhdGEtbGluay0ke3NlbGVjdG9yLm5hbWV9JHttYXRjaFNpZ25bc2VsZWN0b3IubWF0Y2hdfT1cIiR7c2VsZWN0b3IudmFsdWV9XCIgJHtzZWxlY3Rvci5tYXRjaENhc2VTZW5zaXRpdmUgP1wiXCIgOiBcIiBpXCJ9XWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgIGNzc1NlbGVjdG9yID0gYFtkYXRhLWxpbmstdGFncyo9XCIke3NlbGVjdG9yLnZhbHVlfVwiIGldYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNzc1NlbGVjdG9yID0gYFtkYXRhLWxpbmstcGF0aCR7bWF0Y2hTaWduW3NlbGVjdG9yLm1hdGNoXX09XCIke3NlbGVjdG9yLnZhbHVlfVwiICR7c2VsZWN0b3IubWF0Y2hDYXNlU2Vuc2l0aXZlID9cIlwiIDogXCJpXCJ9XWA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0VGV4dCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1xuICAgICAgICAgICAgICAgIFwiXCIsXG4gICAgICAgICAgICAgICAgYGRpdltkYXRhLWlkPVwiJHtzZWxlY3Rvci51aWR9XCJdIGRpdi5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24sYCxcbiAgICAgICAgICAgICAgICBjc3NTZWxlY3RvciArIFwiIHtcIixcbiAgICAgICAgICAgICAgICBgICAgIGNvbG9yOiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0tY29sb3IpICFpbXBvcnRhbnQ7YCxcbiAgICAgICAgICAgICAgICBgICAgIGZvbnQtd2VpZ2h0OiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0td2VpZ2h0KTtgLFxuICAgICAgICAgICAgICAgIFwifVwiXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdG9yLnNlbGVjdEJhY2tncm91bmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcIlwiLFxuICAgICAgICAgICAgICAgIGAuYy0ke3NlbGVjdG9yLnVpZH0tdXNlLWJhY2tncm91bmQgZGl2W2RhdGEtaWQ9XCIke3NlbGVjdG9yLnVpZH1cIl0gZGl2LnNldHRpbmctaXRlbS1kZXNjcmlwdGlvbixgLFxuICAgICAgICAgICAgICAgIGAuYy0ke3NlbGVjdG9yLnVpZH0tdXNlLWJhY2tncm91bmQgLmRhdGEtbGluay10ZXh0JHtjc3NTZWxlY3Rvcn0ge2AsXG4gICAgICAgICAgICAgICAgYCAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0tYmFja2dyb3VuZC1jb2xvcikgIWltcG9ydGFudDtgLFxuICAgICAgICAgICAgICAgIGAgICAgYm9yZGVyLXJhZGl1czogNXB4O2AsXG4gICAgICAgICAgICAgICAgYCAgICBwYWRkaW5nLWxlZnQ6IDJweDtgLFxuICAgICAgICAgICAgICAgIGAgICAgcGFkZGluZy1yaWdodDogMnB4O2AsXG4gICAgICAgICAgICAgICAgYCAgICB0ZXh0LWRlY29yYXRpb246IHZhcigtLSR7c2VsZWN0b3IudWlkfS1kZWNvcmF0aW9uKSAhaW1wb3J0YW50O2AsXG4gICAgICAgICAgICAgICAgXCJ9XCJdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0UHJlcGVuZCkge1xuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1wiXCIsXG4gICAgICAgICAgICAgICAgYGRpdltkYXRhLWlkPVwiJHtzZWxlY3Rvci51aWR9XCJdIGRpdi5zZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb246OmJlZm9yZSxgLFxuICAgICAgICAgICAgICAgIGAuZGF0YS1saW5rLWljb24ke2Nzc1NlbGVjdG9yfTo6YmVmb3JlIHtgLFxuICAgICAgICAgICAgICAgIGAgICAgY29udGVudDogdmFyKC0tJHtzZWxlY3Rvci51aWR9LWJlZm9yZSk7YCxcbiAgICAgICAgICAgICAgICBcIn1cIl0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RBcHBlbmQpIHtcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcIlwiLFxuICAgICAgICAgICAgICAgIGBkaXZbZGF0YS1pZD1cIiR7c2VsZWN0b3IudWlkfVwiXSBkaXYuc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uOjphZnRlcixgLFxuICAgICAgICAgICAgICAgIGAuZGF0YS1saW5rLWljb24tYWZ0ZXIke2Nzc1NlbGVjdG9yfTo6YWZ0ZXIge2AsXG4gICAgICAgICAgICAgICAgYCAgICBjb250ZW50OiB2YXIoLS0ke3NlbGVjdG9yLnVpZH0tYWZ0ZXIpO2AsXG4gICAgICAgICAgICAgICAgXCJ9XCJdKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW5zdHJ1Y3Rpb25zLnB1c2goLi4uW1xuICAgICAgICBcIi8qIEBzZXR0aW5nc1wiLFxuICAgICAgICBcIm5hbWU6IFN1cGVyY2hhcmdlZCBMaW5rc1wiLFxuICAgICAgICBcImlkOiBzdXBlcmNoYXJnZWQtbGlua3NcIixcbiAgICAgICAgXCJzZXR0aW5nczpcIixcbiAgICBdKTtcblxuICAgIHNlbGVjdG9ycy5mb3JFYWNoKChzZWxlY3RvciwgaSkgPT4ge1xuICAgICAgICBsZXQgbmFtZSA9IHNlbGVjdG9yLm5hbWU7XG4gICAgICAgIGxldCB2YWx1ZSA9IHNlbGVjdG9yLnZhbHVlO1xuICAgICAgICBpZiAoc2VsZWN0b3IudHlwZSA9PT0gJ3RhZycpIHtcbiAgICAgICAgICAgIG5hbWUgPSAndGFnJztcbiAgICAgICAgICAgIC8vIHZhbHVlID0gXCJcXCNcIiArIHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNlbGVjdG9yLnR5cGUgPT09ICdwYXRoJyl7XG4gICAgICAgICAgICBuYW1lID0gJ3BhdGgnO1xuICAgICAgICB9XG4gICAgICAgIGluc3RydWN0aW9ucy5wdXNoKC4uLltcbiAgICAgICAgICAgIFwiICAgIC0gXCIsXG4gICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9YCxcbiAgICAgICAgICAgIGAgICAgICAgIHRpdGxlOiAke25hbWV9IGlzICR7dmFsdWV9YCxcbiAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBFeGFtcGxlIG5vdGVgLFxuICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IGhlYWRpbmdcIixcbiAgICAgICAgICAgIFwiICAgICAgICBjb2xsYXBzZWQ6IHRydWVcIixcbiAgICAgICAgICAgIFwiICAgICAgICBsZXZlbDogM1wiXSk7XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RUZXh0KSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXG4gICAgICAgICAgICAgICAgXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWNvbG9yYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogTGluayBjb2xvcmAsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIHR5cGU6IHZhcmlhYmxlLWNvbG9yXCIsXG4gICAgICAgICAgICAgICAgXCIgICAgICAgIGZvcm1hdDogaGV4XCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogJyR7Y29sb3JzW2hhc2goc2VsZWN0b3IudWlkKSAlIDM2XX0nYCxcbiAgICAgICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGlkOiAke3NlbGVjdG9yLnVpZH0td2VpZ2h0YCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogRm9udCB3ZWlnaHRgLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiB2YXJpYWJsZS1zZWxlY3RcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiBpbml0aWFsYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICBvcHRpb25zOmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gaW5pdGlhbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gbGlnaHRlcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gbm9ybWFsYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBib2xkYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICAgICAgLSBib2xkZXJgLFxuICAgICAgICAgICAgICAgIFwiICAgIC0gXCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgaWQ6ICR7c2VsZWN0b3IudWlkfS1kZWNvcmF0aW9uYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogRm9udCBkZWNvcmF0aW9uYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtc2VsZWN0XCIsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgZGVmYXVsdDogaW5pdGlhbGAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgb3B0aW9uczpgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGluaXRpYWxgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIHVuZGVybGluZWAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgICAgIC0gb3ZlcmxpbmVgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgICAgICAtIGxpbmUtdGhyb3VnaGBdKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzZWxlY3Rvci5zZWxlY3RQcmVwZW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCIgICAgLSBcIixcbiAgICAgICAgICAgIGAgICAgICAgIGlkOiAke3NlbGVjdG9yLnVpZH0tYmVmb3JlYCxcbiAgICAgICAgICAgIGAgICAgICAgIHRpdGxlOiBQcmVwZW5kIHRleHRgLFxuICAgICAgICAgICAgYCAgICAgICAgZGVzY3JpcHRpb246IEFkZCBzb21lIHRleHQsIHN1Y2ggYXMgYW4gZW1vamksIGJlZm9yZSB0aGUgbGlua3MuYCxcbiAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiB2YXJpYWJsZS10ZXh0XCIsXG4gICAgICAgICAgICBgICAgICAgICBkZWZhdWx0OiAnJ2AsXG4gICAgICAgICAgICBgICAgICAgICBxdW90ZXM6IHRydWVgXSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VsZWN0b3Iuc2VsZWN0QXBwZW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogJHtzZWxlY3Rvci51aWR9LWFmdGVyYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICB0aXRsZTogQXBwZW5kIHRleHRgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlc2NyaXB0aW9uOiBBZGQgc29tZSB0ZXh0LCBzdWNoIGFzIGFuIGVtb2ppLCBhZnRlciB0aGUgbGlua3MuYCxcbiAgICAgICAgICAgICAgICBcIiAgICAgICAgdHlwZTogdmFyaWFibGUtdGV4dFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6ICcnYCxcbiAgICAgICAgICAgICAgICBgICAgICAgICBxdW90ZXM6IHRydWVgXSlcbiAgICAgICAgfVxuICAgICAgICBpZihzZWxlY3Rvci5zZWxlY3RCYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMucHVzaCguLi5bXCIgICAgLSBcIixcbiAgICAgICAgICAgICAgICBgICAgICAgICBpZDogYy0ke3NlbGVjdG9yLnVpZH0tdXNlLWJhY2tncm91bmRgLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIHRpdGxlOiBVc2UgYmFja2dyb3VuZCBjb2xvcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgZGVzY3JpcHRpb246IEFkZHMgYSBiYWNrZ3JvdW5kIGNvbG9yIHRvIHRoZSBsaW5rLiBUaGlzIGNhbiBsb29rIGJ1Z2d5IGluIGxpdmUgcHJldmlldy5gLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiBjbGFzcy10b2dnbGVcIixcbiAgICAgICAgICAgICAgICBcIiAgICAtIFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGlkOiAke3NlbGVjdG9yLnVpZH0tYmFja2dyb3VuZC1jb2xvcmAsXG4gICAgICAgICAgICAgICAgYCAgICAgICAgdGl0bGU6IEJhY2tncm91bmQgY29sb3JgLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICB0eXBlOiB2YXJpYWJsZS1jb2xvclwiLFxuICAgICAgICAgICAgICAgIFwiICAgICAgICBmb3JtYXQ6IGhleFwiLFxuICAgICAgICAgICAgICAgIGAgICAgICAgIGRlZmF1bHQ6ICcjZmZmZmZmJ2BdKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgaW5zdHJ1Y3Rpb25zLnB1c2goXCIqL1wiKTtcblxuICAgIGNvbnN0IHZhdWx0ID0gcGx1Z2luLmFwcC52YXVsdDtcbiAgICBjb25zdCBjb25maWdEaXIgPSB2YXVsdC5jb25maWdEaXIgPz8gXCIub2JzaWRpYW5cIjtcbiAgICBjb25zdCBwYXRoRGlyID0gY29uZmlnRGlyICsgXCIvc25pcHBldHNcIjtcbiAgICBhd2FpdCB2YXVsdC5hZGFwdGVyLm1rZGlyKHBhdGhEaXIpO1xuICAgIGNvbnN0IHBhdGggPSBwYXRoRGlyICsgXCIvc3VwZXJjaGFyZ2VkLWxpbmtzLWdlbi5jc3NcIjtcbiAgICBpZiAoYXdhaXQgdmF1bHQuYWRhcHRlci5leGlzdHMocGF0aCkpIHtcbiAgICAgICAgYXdhaXQgdmF1bHQuYWRhcHRlci5yZW1vdmUocGF0aCk7XG4gICAgfVxuICAgIGF3YWl0IHBsdWdpbi5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIGluc3RydWN0aW9ucy5qb2luKCdcXG4nKSk7XG5cbiAgICAvLyBBY3RpdmF0ZSBzbmlwcGV0XG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5hY3RpdmF0ZVNuaXBwZXQpIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBjb25zdCBjdXN0b21Dc3MgPSBwbHVnaW4uYXBwLmN1c3RvbUNzcztcbiAgICAgICAgY3VzdG9tQ3NzLnJlYWRDc3NGb2xkZXJzKCk7XG4gICAgICAgIGN1c3RvbUNzcy5zZXRDc3NFbmFibGVkU3RhdHVzKCdzdXBlcmNoYXJnZWQtbGlua3MtZ2VuJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIFN0eWxlIFNldHRpbmdzIHJlYWRzIGNoYW5nZXNcbiAgICBwbHVnaW4uYXBwLndvcmtzcGFjZS50cmlnZ2VyKFwicGFyc2Utc3R5bGUtc2V0dGluZ3NcIik7XG59XG4iLCJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIGRlYm91bmNlIH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCBTdXBlcmNoYXJnZWRMaW5rcyBmcm9tIFwibWFpblwiXG5pbXBvcnQgeyBDU1NCdWlsZGVyTW9kYWwsIHVwZGF0ZURpc3BsYXkgfSBmcm9tIFwiLi4vY3NzQnVpbGRlci9jc3NCdWlsZGVyTW9kYWxcIjtcbmltcG9ydCB7IGJ1aWxkQ1NTIH0gZnJvbSBcIi4uL2Nzc0J1aWxkZXIvY3NzQnVpbGRlclwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcztcblx0ZGVib3VuY2VkR2VuZXJhdGU6IEZ1bmN0aW9uO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFN1cGVyY2hhcmdlZExpbmtzKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHRcdHRoaXMuZGVib3VuY2VkR2VuZXJhdGUgPSBkZWJvdW5jZSh0aGlzLl9nZW5lcmF0ZVNuaXBwZXQsIDEwMDAsIHRydWUpO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRsZXQgeyBjb250YWluZXJFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHQvKiBNYW5hZ2luZyBleHRyYSBhdHRpcmJ1dGVzIGZvciBhLmludGVybmFsLWxpbmsgKi9cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdUYXJnZXQgQXR0cmlidXRlcyBmb3Igc3R5bGluZycpXG5cdFx0XHQuc2V0RGVzYygnRnJvbnRtYXR0ZXIgYXR0cmlidXRlcyB0byB0YXJnZXQsIGNvbW1hIHNlcGFyYXRlZCcpXG5cdFx0XHQuYWRkVGV4dEFyZWEoKHRleHQpID0+IHtcblx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRW50ZXIgYXR0cmlidXRlcyBhcyBzdHJpbmcsIGNvbW1hIHNlcGFyYXRlZCcpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuam9pbignLCAnKSlcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzID0gdmFsdWUucmVwbGFjZSgvXFxzL2csICcnKS5zcGxpdCgnLCcpO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMubGVuZ3RoID09PSAxICYmICF0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRBdHRyaWJ1dGVzWzBdKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMgPSBbXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHRcdHRleHQuaW5wdXRFbC5yb3dzID0gNjtcblx0XHRcdFx0dGV4dC5pbnB1dEVsLmNvbHMgPSAyNTtcblx0XHRcdH0pO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU3R5bGluZycgfSk7XG5cdFx0Y29uc3Qgc3R5bGVTZXR0aW5nRGVzY3JpcHRpb24gPSBjb250YWluZXJFbC5jcmVhdGVEaXYoKTtcblx0XHRzdHlsZVNldHRpbmdEZXNjcmlwdGlvbi5pbm5lckhUTUwgPSBgXG5TdHlsaW5nIGNhbiBiZSBkb25lIHVzaW5nIHRoZSBTdHlsZSBTZXR0aW5ncyBwbHVnaW4uIFxuIDxvbD5cbiA8bGk+Q3JlYXRlIHNlbGVjdG9ycyBkb3duIGJlbG93LjwvbGk+XG4gPGxpPkdvIHRvIHRoZSBTdHlsZSBTZXR0aW5ncyB0YWIgYW5kIHN0eWxlIHlvdXIgbGlua3MhPC9saT5cbjwvb2w+YFxuXHRcdGNvbnN0IHNlbGVjdG9yRGl2ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCk7XG5cdFx0dGhpcy5kcmF3U2VsZWN0b3JzKHNlbGVjdG9yRGl2KTtcblxuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnU2V0dGluZ3MnIH0pO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBFZGl0b3InKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIGludGVybmFsIGxpbmtzIGluIHRoZSBlZGl0b3IgdmlldyBvZiBhIG5vdGUuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUVkaXRvcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVFZGl0b3IgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIEZpbGUgQnJvd3NlcicpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGFsc28gc3VwZXJjaGFyZ2UgdGhlIGZpbGUgYnJvd3Nlci4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmlsZUxpc3QpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZSh2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRmlsZUxpc3QgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIGluIFBsdWdpbnMnKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHBsdWdpbnMgbGlrZSB0aGUgYmFja2xpbmtzIGFuZCBmb3J3YXJkIGxpbmtzIHBhbmVscy4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmFja2xpbmtzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UodmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUJhY2tsaW5rcyA9IHZhbHVlXG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdFbmFibGUgaW4gUXVpY2sgU3dpdGNoZXInKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBxdWljayBzd2l0Y2hlci4nKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tTd2l0Y2hlcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVRdWlja1N3aXRjaGVyID0gdmFsdWVcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBpbiBMaW5rIEF1dG9jb21wbGV0ZXInKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRydWUsIHRoaXMgd2lsbCBhbHNvIHN1cGVyY2hhcmdlIHRoZSBsaW5rIGF1dG9jb21wbGV0ZXIuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcblx0XHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN1Z2dlc3Rvcilcblx0XHRcdFx0dG9nZ2xlLm9uQ2hhbmdlKHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdWdnZXN0b3IgPSB2YWx1ZVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdBZHZhbmNlZCcgfSk7XG5cdFx0Ly8gTWFuYWdpbmcgY2hvaWNlIHdldGhlciB5b3Ugd2FudCB0byBwYXJzZSB0YWdzIGJvdGggZnJvbSBub3JtYWwgdGFncyBhbmQgaW4gdGhlIGZyb250bWF0dGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnUGFyc2UgYWxsIHRhZ3MgaW4gdGhlIGZpbGUnKVxuXHRcdFx0LnNldERlc2MoJ1NldHMgdGhlIGBkYXRhLWxpbmstdGFnc2AtYXR0cmlidXRlIHRvIGxvb2sgZm9yIHRhZ3MgYm90aCBpbiB0aGUgZnJvbnRtYXR0ZXIgYW5kIGluIHRoZSBmaWxlIGFzICN0YWctbmFtZScpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXJnZXRUYWdzKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnRhcmdldFRhZ3MgPSB2YWx1ZVxuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdC8vIE1hbmFnaW5nIGNob2ljZSB3ZXRoZXIgeW91IGdldCBhdHRyaWJ1dGVzIGZyb20gaW5saW5lIGZpZWxkcyBhbmQgZnJvbnRtYXR0ZXIgb3Igb25seSBmcm9udG1hdGVyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU2VhcmNoIGZvciBhdHRyaWJ1dGUgaW4gSW5saW5lIGZpZWxkcyBsaWtlIDxmaWVsZDo6PicpXG5cdFx0XHQuc2V0RGVzYygnU2V0cyB0aGUgYGRhdGEtbGluay08ZmllbGQ+YC1hdHRyaWJ1dGUgdG8gdGhlIHZhbHVlIG9mIGlubGluZSBmaWVsZHMnKVxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuXHRcdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2V0RnJvbUlubGluZUZpZWxkKVxuXHRcdFx0XHR0b2dnbGUub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmdldEZyb21JbmxpbmVGaWVsZCA9IHZhbHVlXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKClcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgYWN0aXZhdGUgc25pcHBldFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0F1dG9tYXRpY2FsbHkgYWN0aXZhdGUgc25pcHBldCcpXG5cdFx0XHQuc2V0RGVzYygnSWYgdHJ1ZSwgdGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgYWN0aXZhdGUgdGhlIGdlbmVyYXRlZCBDU1Mgc25pcHBldCBcInN1cGVyY2hhcmdlZC1saW5rcy1nZW4uY3NzXCIuICcgK1xuXHRcdFx0XHQnVHVybiB0aGlzIG9mZiBpZiB5b3UgZG9uXFwndCB3YW50IHRoaXMgdG8gaGFwcGVuLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3RpdmF0ZVNuaXBwZXQpXG5cdFx0XHRcdHRvZ2dsZS5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYWN0aXZhdGVTbmlwcGV0ID0gdmFsdWVcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0LyogTWFuYWdpbmcgcHJlZGVmaW5lZCB2YWx1ZXMgZm9yIHByb3BlcnRpZXMgKi9cblx0XHQvKiBNYW5hZ2UgbWVudSBvcHRpb25zIGRpc3BsYXkqL1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJEaXNwbGF5IGZpZWxkIG9wdGlvbnMgaW4gY29udGV4dCBtZW51XCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRoaXMgZmVhdHVyZSBoYXMgYmVlbiBtaWdyYXRlZCB0byBtZXRhZGF0YS1tZW51IHBsdWdpbiBodHRwczovL2dpdGh1Yi5jb20vbWRlbG9iZWxsZS9tZXRhZGF0YW1lbnVcIilcblx0fVxuXG5cdGdlbmVyYXRlU25pcHBldCgpIHtcblx0XHR0aGlzLmRlYm91bmNlZEdlbmVyYXRlKCk7XG5cdH1cblxuXHRhc3luYyBfZ2VuZXJhdGVTbmlwcGV0KCkge1xuXHRcdGF3YWl0IGJ1aWxkQ1NTKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycywgdGhpcy5wbHVnaW4pO1xuXHRcdC8vIG5ldyBOb3RpY2UoXCJHZW5lcmF0ZWQgc3VwZXJjaGFyZ2VkLWxpbmtzLWdlbi5jc3NcIik7XG5cdH1cblxuXHRkcmF3U2VsZWN0b3JzKGRpdjogSFRNTEVsZW1lbnQpIHtcblx0XHRkaXYuZW1wdHkoKTtcblx0XHR0aGlzLmdlbmVyYXRlU25pcHBldCgpO1xuXHRcdGNvbnN0IHNlbGVjdG9ycyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycztcblx0XHRzZWxlY3RvcnMuZm9yRWFjaCgoc2VsZWN0b3IsIGkpID0+IHtcblx0XHRcdGNvbnN0IHMgPSBuZXcgU2V0dGluZyhkaXYpXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRTZWxlY3RvciA9IHNlbGVjdG9yc1tpICsgMV07XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaSArIDFdID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaV0gPSBvbGRTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJkb3duLWFycm93LXdpdGgtdGFpbFwiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIk1vdmUgc2VsZWN0b3IgZG93blwiKTtcblx0XHRcdFx0XHRpZiAoaSA9PT0gc2VsZWN0b3JzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBvbGRTZWxlY3RvciA9IHNlbGVjdG9yc1tpIC0gMV07XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaSAtIDFdID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0XHRzZWxlY3RvcnNbaV0gPSBvbGRTZWxlY3Rvcjtcblx0XHRcdFx0XHRcdHRoaXMuZHJhd1NlbGVjdG9ycyhkaXYpO1xuXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJ1cC1hcnJvdy13aXRoLXRhaWxcIik7XG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoXCJNb3ZlIHNlbGVjdG9yIHVwXCIpO1xuXHRcdFx0XHRcdGlmIChpID09PSAwKSB7XG5cdFx0XHRcdFx0XHRidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdFx0YnV0dG9uLm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgZm9ybU1vZGFsID0gbmV3IENTU0J1aWxkZXJNb2RhbCh0aGlzLnBsdWdpbiwgKG5ld1NlbGVjdG9yKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9yc1tpXSA9IG5ld1NlbGVjdG9yO1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dXBkYXRlRGlzcGxheShzLm5hbWVFbCwgc2VsZWN0b3IsIHRoaXMucGx1Z2luLnNldHRpbmdzKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5nZW5lcmF0ZVNuaXBwZXQoKTtcblx0XHRcdFx0XHRcdH0sIHNlbGVjdG9yKTtcblx0XHRcdFx0XHRcdGZvcm1Nb2RhbC5vcGVuKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJwZW5jaWxcIik7XG5cdFx0XHRcdFx0YnV0dG9uLnNldFRvb2x0aXAoXCJFZGl0IHNlbGVjdG9yXCIpXG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRCdXR0b24oYnV0dG9uID0+IHtcblx0XHRcdFx0XHRidXR0b24ub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RvcnMucmVtb3ZlKHNlbGVjdG9yKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0dGhpcy5kcmF3U2VsZWN0b3JzKGRpdik7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0YnV0dG9uLnNldEljb24oXCJjcm9zc1wiKTtcblx0XHRcdFx0XHRidXR0b24uc2V0VG9vbHRpcChcIlJlbW92ZSBzZWxlY3RvclwiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR1cGRhdGVEaXNwbGF5KHMubmFtZUVsLCBzZWxlY3RvciwgdGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuXHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoZGl2KVxuXHRcdFx0LnNldE5hbWUoXCJOZXcgc2VsZWN0b3JcIilcblx0XHRcdC5zZXREZXNjKFwiQ3JlYXRlIGEgbmV3IHNlbGVjdG9yIHRvIHN0eWxlIHdpdGggU3R5bGUgU2V0dGluZ3MuXCIpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdGJ1dHRvbi5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRjb25zdCBmb3JtTW9kYWwgPSBuZXcgQ1NTQnVpbGRlck1vZGFsKHRoaXMucGx1Z2luLCAobmV3U2VsZWN0b3IpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdG9ycy5wdXNoKG5ld1NlbGVjdG9yKTtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0dGhpcy5kcmF3U2VsZWN0b3JzKGRpdik7XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBGb3JjZSByZWRyYXcgc29tZWhvdz9cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRmb3JtTW9kYWwub3BlbigpO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0YnV0dG9uLnNldEJ1dHRvblRleHQoXCJOZXdcIik7XG5cdFx0XHR9KTtcblx0fVxufVxuIiwiaW1wb3J0IHsgQXBwLCBnZXRBbGxUYWdzLCBnZXRMaW5rcGF0aCwgTGlua0NhY2hlLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBNYXJrZG93blZpZXcsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCJcbmltcG9ydCB7IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MgfSBmcm9tIFwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3NcIlxuaW1wb3J0IFN1cGVyY2hhcmdlZExpbmtzIGZyb20gXCIuLi8uLi9tYWluXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckV4dHJhQXR0cmlidXRlcyhsaW5rOiBIVE1MRWxlbWVudCkge1xuICAgIE9iamVjdC52YWx1ZXMobGluay5hdHRyaWJ1dGVzKS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgICBpZiAoYXR0ci5uYW1lLmluY2x1ZGVzKFwiZGF0YS1saW5rXCIpKSB7XG4gICAgICAgICAgICBsaW5rLnJlbW92ZUF0dHJpYnV0ZShhdHRyLm5hbWUpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhcmdldEF0dHJpYnV0ZXNTeW5jKGFwcDogQXBwLCBzZXR0aW5nczogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5ncywgZGVzdDogVEZpbGUsIGFkZERhdGFIcmVmOiBib29sZWFuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgbGV0IG5ld19wcm9wczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgdGFnczogXCJcIiB9XG4gICAgY29uc3QgY2FjaGUgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZGVzdClcbiAgICBpZiAoIWNhY2hlKSByZXR1cm4gbmV3X3Byb3BzO1xuXG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZS5mcm9udG1hdHRlclxuXG4gICAgaWYgKGZyb250bWF0dGVyKSB7XG4gICAgICAgIHNldHRpbmdzLnRhcmdldEF0dHJpYnV0ZXMuZm9yRWFjaChhdHRyaWJ1dGUgPT4ge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGZyb250bWF0dGVyKS5pbmNsdWRlcyhhdHRyaWJ1dGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJpYnV0ZSA9PT0gJ3RhZycgfHwgYXR0cmlidXRlID09PSAndGFncycpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3X3Byb3BzWyd0YWdzJ10gKz0gZnJvbnRtYXR0ZXJbYXR0cmlidXRlXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBuZXdfcHJvcHNbYXR0cmlidXRlXSA9IGZyb250bWF0dGVyW2F0dHJpYnV0ZV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgaWYgKHNldHRpbmdzLnRhcmdldFRhZ3MpIHtcbiAgICAgICAgbmV3X3Byb3BzW1widGFnc1wiXSArPSBnZXRBbGxUYWdzKGNhY2hlKS5qb2luKCcgJyk7XG4gICAgfVxuXG4gICAgaWYgKGFkZERhdGFIcmVmKSB7XG4gICAgICAgIG5ld19wcm9wc1snZGF0YS1ocmVmJ10gPSBkZXN0LmJhc2VuYW1lO1xuICAgIH1cbiAgICBuZXdfcHJvcHNbJ3BhdGgnXSA9IGRlc3QucGF0aDtcbiAgICAvL0B0cy1pZ25vcmVcbiAgICBjb25zdCBnZXRSZXN1bHRzID0gKGFwaSkgPT4ge1xuICAgICAgICBjb25zdCBwYWdlID0gYXBpLnBhZ2UoZGVzdC5wYXRoKTtcbiAgICAgICAgaWYgKCFwYWdlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2V0dGluZ3MudGFyZ2V0QXR0cmlidXRlcy5mb3JFYWNoKChmaWVsZDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHBhZ2VbZmllbGRdO1xuICAgICAgICAgICAgaWYgKHZhbHVlKSBuZXdfcHJvcHNbZmllbGRdID0gdmFsdWU7XG4gICAgICAgIH0pXG4gICAgfTtcblxuICAgIGlmIChzZXR0aW5ncy5nZXRGcm9tSW5saW5lRmllbGQgJiYgYXBwLnBsdWdpbnMuZW5hYmxlZFBsdWdpbnMuaGFzKFwiZGF0YXZpZXdcIikpIHtcbiAgICAgICAgY29uc3QgYXBpID0gYXBwLnBsdWdpbnMucGx1Z2lucy5kYXRhdmlldz8uYXBpO1xuICAgICAgICBpZiAoYXBpKSB7XG4gICAgICAgICAgICBnZXRSZXN1bHRzKGFwaSlcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUub24oXCJkYXRhdmlldzphcGktcmVhZHlcIiwgKGFwaTogYW55KSA9PlxuICAgICAgICAgICAgICAgICAgICBnZXRSZXN1bHRzKGFwaSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXdfcHJvcHNcbn1cblxuZnVuY3Rpb24gc2V0TGlua05ld1Byb3BzKGxpbms6IEhUTUxFbGVtZW50LCBuZXdfcHJvcHM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZm9yIChjb25zdCBhIG9mIGxpbmsuYXR0cmlidXRlcykge1xuICAgICAgICBpZiAoYS5uYW1lLmluY2x1ZGVzKFwiZGF0YS1saW5rXCIpICYmICEoYS5uYW1lIGluIG5ld19wcm9wcykpIHtcbiAgICAgICAgICAgIGxpbmsucmVtb3ZlQXR0cmlidXRlKGEubmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgT2JqZWN0LmtleXMobmV3X3Byb3BzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBcImRhdGEtbGluay1cIiArIGtleTtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBuZXdfcHJvcHNba2V5XTtcbiAgICAgICAgY29uc3QgY3VyVmFsdWUgPSBsaW5rLmdldEF0dHJpYnV0ZShuYW1lKTtcblxuICAgICAgICAvLyBPbmx5IHVwZGF0ZSBpZiB2YWx1ZSBpcyBkaWZmZXJlbnRcbiAgICAgICAgaWYgKCFuZXdWYWx1ZSB8fCBjdXJWYWx1ZSAhPSBuZXdWYWx1ZSkge1xuICAgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoXCJkYXRhLWxpbmstXCIgKyBrZXksIG5ld19wcm9wc1trZXldKVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgaWYgKCFsaW5rLmhhc0NsYXNzKFwiZGF0YS1saW5rLWljb25cIikpIHtcbiAgICAgICAgbGluay5hZGRDbGFzcyhcImRhdGEtbGluay1pY29uXCIpO1xuICAgIH1cbiAgICBpZiAoIWxpbmsuaGFzQ2xhc3MoXCJkYXRhLWxpbmstaWNvbi1hZnRlclwiKSkge1xuICAgICAgICBsaW5rLmFkZENsYXNzKFwiZGF0YS1saW5rLWljb24tYWZ0ZXJcIik7XG4gICAgfVxuICAgIGlmICghbGluay5oYXNDbGFzcyhcImRhdGEtbGluay10ZXh0XCIpKSB7XG4gICAgICAgIGxpbmsuYWRkQ2xhc3MoXCJkYXRhLWxpbmstdGV4dFwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUxpbmtFeHRyYUF0dHJpYnV0ZXMoYXBwOiBBcHAsIHNldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzLCBsaW5rOiBIVE1MRWxlbWVudCwgZGVzdE5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IGxpbmtIcmVmID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKS5zcGxpdCgnIycpWzBdO1xuICAgIGNvbnN0IGRlc3QgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rSHJlZiwgZGVzdE5hbWUpO1xuXG4gICAgaWYgKGRlc3QpIHtcbiAgICAgICAgY29uc3QgbmV3X3Byb3BzID0gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHAsIHNldHRpbmdzLCBkZXN0LCBmYWxzZSk7XG4gICAgICAgIHNldExpbmtOZXdQcm9wcyhsaW5rLCBuZXdfcHJvcHMpO1xuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZURpdkV4dHJhQXR0cmlidXRlcyhhcHA6IEFwcCwgc2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIGxpbms6IEhUTUxFbGVtZW50LCBkZXN0TmFtZTogc3RyaW5nLCBsaW5rTmFtZT86IHN0cmluZykge1xuICAgIGlmICghbGlua05hbWUpIHtcbiAgICAgICAgbGlua05hbWUgPSBsaW5rLnRleHRDb250ZW50O1xuICAgIH1cbiAgICBjb25zdCBkZXN0ID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZ2V0TGlua3BhdGgobGlua05hbWUpLCBkZXN0TmFtZSlcblxuICAgIGlmIChkZXN0KSB7XG4gICAgICAgIGNvbnN0IG5ld19wcm9wcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZGVzdCwgdHJ1ZSk7XG4gICAgICAgIHNldExpbmtOZXdQcm9wcyhsaW5rLCBuZXdfcHJvcHMpO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlRWxMaW5rcyhhcHA6IEFwcCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZWw6IEhUTUxFbGVtZW50LCBjdHg6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQpIHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcbiAgICBjb25zdCBsaW5rcyA9IGVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuaW50ZXJuYWwtbGluaycpO1xuICAgIGNvbnN0IGRlc3ROYW1lID0gY3R4LnNvdXJjZVBhdGgucmVwbGFjZSgvKC4qKS5tZC8sIFwiJDFcIik7XG4gICAgbGlua3MuZm9yRWFjaCgobGluazogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgdXBkYXRlTGlua0V4dHJhQXR0cmlidXRlcyhhcHAsIHNldHRpbmdzLCBsaW5rLCBkZXN0TmFtZSk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVWaXNpYmxlTGlua3MoYXBwOiBBcHAsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MpIHtcbiAgICBjb25zdCBzZXR0aW5ncyA9IHBsdWdpbi5zZXR0aW5ncztcbiAgICBhcHAud29ya3NwYWNlLml0ZXJhdGVSb290TGVhdmVzKChsZWFmKSA9PiB7XG4gICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcgJiYgbGVhZi52aWV3LmZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpbGU6IFRGaWxlID0gbGVhZi52aWV3LmZpbGU7XG4gICAgICAgICAgICBjb25zdCBjYWNoZWRGaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpXG4gICAgICAgICAgICBpZiAoY2FjaGVkRmlsZS5saW5rcykge1xuICAgICAgICAgICAgICAgIGNhY2hlZEZpbGUubGlua3MuZm9yRWFjaCgobGluazogTGlua0NhY2hlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5wYXRoLnJlcGxhY2UoLyguKikubWQvLCBcIiQxXCIpXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRlc3QgPSBhcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChsaW5rLmxpbmssIGZpbGVOYW1lKVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3X3Byb3BzID0gZmV0Y2hUYXJnZXRBdHRyaWJ1dGVzU3luYyhhcHAsIHNldHRpbmdzLCBkZXN0LCBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVybmFsTGlua3MgPSBsZWFmLnZpZXcuY29udGFpbmVyRWwucXVlcnlTZWxlY3RvckFsbChgYS5pbnRlcm5hbC1saW5rW2hyZWY9XCIke2xpbmsubGlua31cIl1gKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJuYWxMaW5rcy5mb3JFYWNoKChpbnRlcm5hbExpbms6IEhUTUxFbGVtZW50KSA9PiBzZXRMaW5rTmV3UHJvcHMoaW50ZXJuYWxMaW5rLCBuZXdfcHJvcHMpKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG59IiwiaW1wb3J0IHsgQ1NTTGluayB9IGZyb20gXCIuLi9jc3NCdWlsZGVyL2Nzc0xpbmtcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzIHtcblx0dGFyZ2V0QXR0cmlidXRlczogQXJyYXk8c3RyaW5nPjtcblx0dGFyZ2V0VGFnczogYm9vbGVhbjtcblx0Z2V0RnJvbUlubGluZUZpZWxkOiBib29sZWFuO1xuXHRhY3RpdmF0ZVNuaXBwZXQ6IGJvb2xlYW47XG5cdGVuYWJsZUVkaXRvcjogYm9vbGVhbjtcblx0ZW5hYmxlRmlsZUxpc3Q6IGJvb2xlYW47XG5cdGVuYWJsZUJhY2tsaW5rczogYm9vbGVhbjtcblx0ZW5hYmxlUXVpY2tTd2l0Y2hlcjogYm9vbGVhbjtcblx0ZW5hYmxlU3VnZ2VzdG9yOiBib29sZWFuO1xuXHRzZWxlY3RvcnM6IENTU0xpbmtbXTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MgPSB7XG5cdHRhcmdldEF0dHJpYnV0ZXM6IFtdLFxuXHR0YXJnZXRUYWdzOiB0cnVlLFxuXHRnZXRGcm9tSW5saW5lRmllbGQ6IHRydWUsXG5cdGFjdGl2YXRlU25pcHBldDogdHJ1ZSxcblx0ZW5hYmxlRWRpdG9yOiB0cnVlLFxuXHRlbmFibGVGaWxlTGlzdDogdHJ1ZSxcblx0ZW5hYmxlQmFja2xpbmtzOiB0cnVlLFxuXHRlbmFibGVRdWlja1N3aXRjaGVyOiB0cnVlLFxuXHRlbmFibGVTdWdnZXN0b3I6IHRydWUsXG5cdHNlbGVjdG9yczogW11cbn0iLCJpbXBvcnQge0FwcCwgZWRpdG9yVmlld0ZpZWxkLCBNYXJrZG93blZpZXcsIFRGaWxlfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7U3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nc30gZnJvbSBcIi4uL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3NcIjtcbmltcG9ydCB7RGVjb3JhdGlvbiwgRGVjb3JhdGlvblNldCwgRWRpdG9yVmlldywgVmlld1BsdWdpbiwgVmlld1VwZGF0ZSwgV2lkZ2V0VHlwZX0gZnJvbSBcIkBjb2RlbWlycm9yL3ZpZXdcIjtcbmltcG9ydCB7UmFuZ2VTZXRCdWlsZGVyfSBmcm9tIFwiQGNvZGVtaXJyb3Ivc3RhdGVcIjtcbmltcG9ydCB7c3ludGF4VHJlZX0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCI7XG5pbXBvcnQge3Rva2VuQ2xhc3NOb2RlUHJvcH0gZnJvbSBcIkBjb2RlbWlycm9yL2xhbmd1YWdlXCI7XG5pbXBvcnQge2ZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmN9IGZyb20gXCIuL2xpbmtBdHRyaWJ1dGVzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBidWlsZENNVmlld1BsdWdpbihhcHA6IEFwcCwgX3NldHRpbmdzOiBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdzKVxue1xuICAgIC8vIEltcGxlbWVudHMgdGhlIGxpdmUgcHJldmlldyBzdXBlcmNoYXJnaW5nXG4gICAgLy8gQ29kZSBzdHJ1Y3R1cmUgYmFzZWQgb24gaHR0cHM6Ly9naXRodWIuY29tL25vdGhpbmdpc2xvc3Qvb2JzaWRpYW4tY202LWF0dHJpYnV0ZXMvYmxvYi83NDNkNzFiMGFhNjE2NDA3MTQ5YTBiNmVhNWZmZWEyOGUyMTU0MTU4L3NyYy9tYWluLnRzXG4gICAgLy8gQ29kZSBoZWxwIGNyZWRpdHMgdG8gQE5vdGhpbmdJc0xvc3QhIFRoZXkgaGF2ZSBiZWVuIGEgZ3JlYXQgaGVscCBnZXR0aW5nIHRoaXMgdG8gd29yayBwcm9wZXJseS5cbiAgICBjbGFzcyBIZWFkZXJXaWRnZXQgZXh0ZW5kcyBXaWRnZXRUeXBlIHtcbiAgICAgICAgYXR0cmlidXRlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgICAgICBhZnRlcjogYm9vbGVhblxuXG4gICAgICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIGFmdGVyOiBib29sZWFuKSB7XG4gICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlc1xuICAgICAgICAgICAgdGhpcy5hZnRlciA9IGFmdGVyXG4gICAgICAgIH1cblxuICAgICAgICB0b0RPTSgpIHtcbiAgICAgICAgICAgIGxldCBoZWFkZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgICAgICAgICAgaGVhZGVyRWwuc2V0QXR0cnModGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFmdGVyKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVyRWwuYWRkQ2xhc3MoJ2RhdGEtbGluay1pY29uLWFmdGVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJFbC5hZGRDbGFzcygnZGF0YS1saW5rLWljb24nKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmFpdmUgYnJlYWQgY3J1bWJcbiAgICAgICAgICAgIHJldHVybiBoZWFkZXJFbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlnbm9yZUV2ZW50KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBzZXR0aW5ncyA9IF9zZXR0aW5ncztcbiAgICBjb25zdCB2aWV3UGx1Z2luID0gVmlld1BsdWdpbi5mcm9tQ2xhc3MoXG4gICAgICAgIGNsYXNzIHtcbiAgICAgICAgICAgIGRlY29yYXRpb25zOiBEZWNvcmF0aW9uU2V0O1xuXG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih2aWV3OiBFZGl0b3JWaWV3KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWNvcmF0aW9ucyA9IHRoaXMuYnVpbGREZWNvcmF0aW9ucyh2aWV3KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdXBkYXRlKHVwZGF0ZTogVmlld1VwZGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh1cGRhdGUuZG9jQ2hhbmdlZCB8fCB1cGRhdGUudmlld3BvcnRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVjb3JhdGlvbnMgPSB0aGlzLmJ1aWxkRGVjb3JhdGlvbnModXBkYXRlLnZpZXcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZGVzdHJveSgpIHtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnVpbGREZWNvcmF0aW9ucyh2aWV3OiBFZGl0b3JWaWV3KSB7XG4gICAgICAgICAgICAgICAgbGV0IGJ1aWxkZXIgPSBuZXcgUmFuZ2VTZXRCdWlsZGVyPERlY29yYXRpb24+KCk7XG4gICAgICAgICAgICAgICAgaWYgKCFzZXR0aW5ncy5lbmFibGVFZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG1kVmlldyA9IHZpZXcuc3RhdGUuZmllbGQoZWRpdG9yVmlld0ZpZWxkKSBhcyBNYXJrZG93blZpZXc7XG4gICAgICAgICAgICAgICAgbGV0IGxhc3RBdHRyaWJ1dGVzID0ge307XG4gICAgICAgICAgICAgICAgbGV0IGljb25EZWNvQWZ0ZXI6IERlY29yYXRpb24gPSBudWxsO1xuICAgICAgICAgICAgICAgIGxldCBpY29uRGVjb0FmdGVyV2hlcmU6IG51bWJlciA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICBsZXQgbWRBbGlhc0Zyb206IG51bWJlciA9IG51bGw7XG4gICAgICAgICAgICAgICAgbGV0IG1kQWxpYXNUbzogbnVtYmVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB7ZnJvbSwgdG99IG9mIHZpZXcudmlzaWJsZVJhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICBzeW50YXhUcmVlKHZpZXcuc3RhdGUpLml0ZXJhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvLFxuICAgICAgICAgICAgICAgICAgICAgICAgZW50ZXI6IChub2RlKSA9PiB7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRva2VuUHJvcHMgPSBub2RlLnR5cGUucHJvcCh0b2tlbkNsYXNzTm9kZVByb3ApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2tlblByb3BzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BzID0gbmV3IFNldCh0b2tlblByb3BzLnNwbGl0KFwiIFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTGluayA9IHByb3BzLmhhcyhcImhtZC1pbnRlcm5hbC1saW5rXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0FsaWFzID0gcHJvcHMuaGFzKFwibGluay1hbGlhc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNQaXBlID0gcHJvcHMuaGFzKFwibGluay1hbGlhcy1waXBlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSAnYWxpYXMnIG9mIHRoZSBtZCBsaW5rXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTURMaW5rID0gcHJvcHMuaGFzKCdsaW5rJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSAnaW50ZXJuYWwgbGluaycgb2YgdGhlIG1kIGxpbmtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNNRFVybCA9IHByb3BzLmhhcygndXJsJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzTURGb3JtYXR0aW5nID0gcHJvcHMuaGFzKCdmb3JtYXR0aW5nLWxpbmsnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNNRExpbmsgJiYgIWlzTURGb3JtYXR0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW5rOiBUaGUgJ2FsaWFzJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVVJMOiBUaGUgaW50ZXJuYWwgbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWRBbGlhc0Zyb20gPSBub2RlLmZyb207XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZEFsaWFzVG8gPSBub2RlLnRvO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1BpcGUgJiYgIWlzQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uRGVjb0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQoaWNvbkRlY29BZnRlcldoZXJlLCBpY29uRGVjb0FmdGVyV2hlcmUsIGljb25EZWNvQWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXJXaGVyZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTGluayAmJiAhaXNBbGlhcyAmJiAhaXNQaXBlIHx8IGlzTURVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rVGV4dCA9IHZpZXcuc3RhdGUuZG9jLnNsaWNlU3RyaW5nKG5vZGUuZnJvbSwgbm9kZS50byk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5rVGV4dCA9IGxpbmtUZXh0LnNwbGl0KFwiI1wiKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmaWxlID0gYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QobGlua1RleHQsIG1kVmlldy5maWxlLmJhc2VuYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc01EVXJsICYmICFmaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGVjb2RlVVJJQ29tcG9uZW50KGxpbmtUZXh0KSkgYXMgVEZpbGU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoKGUpIHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBfYXR0cmlidXRlcyA9IGZldGNoVGFyZ2V0QXR0cmlidXRlc1N5bmMoYXBwLCBzZXR0aW5ncywgZmlsZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF0dHJpYnV0ZXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gX2F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlc1tcImRhdGEtbGluay1cIiArIGtleV0gPSBfYXR0cmlidXRlc1trZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVjbyA9IERlY29yYXRpb24ubWFyayh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzOiBcImRhdGEtbGluay10ZXh0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWNvbkRlY29CZWZvcmUgPSBEZWNvcmF0aW9uLndpZGdldCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZGdldDogbmV3IEhlYWRlcldpZGdldChhdHRyaWJ1dGVzLCBmYWxzZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkRlY29BZnRlciA9IERlY29yYXRpb24ud2lkZ2V0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkZ2V0OiBuZXcgSGVhZGVyV2lkZ2V0KGF0dHJpYnV0ZXMsIHRydWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzTURVcmwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXBwbHkgcmV0cm9hY3RpdmVseSB0byB0aGUgYWxpYXMgZm91bmQgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWNvID0gRGVjb3JhdGlvbi5tYXJrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJkYXRhLWxpbmstdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChtZEFsaWFzRnJvbSwgbWRBbGlhc0Zyb20sIGljb25EZWNvQmVmb3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVpbGRlci5hZGQobWRBbGlhc0Zyb20sIG1kQWxpYXNUbywgZGVjbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpY29uRGVjb0FmdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChtZEFsaWFzVG8sIG1kQWxpYXNUbywgaWNvbkRlY29BZnRlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uRGVjb0FmdGVyID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXJXaGVyZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZEFsaWFzRnJvbSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZEFsaWFzVG8gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmFkZChub2RlLmZyb20sIG5vZGUuZnJvbSwgaWNvbkRlY29CZWZvcmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKG5vZGUuZnJvbSwgbm9kZS50bywgZGVjbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXJXaGVyZSA9IG5vZGUudG87XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNMaW5rICYmIGlzQWxpYXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBkZWNvID0gRGVjb3JhdGlvbi5tYXJrKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBsYXN0QXR0cmlidXRlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzczogXCJkYXRhLWxpbmstdGV4dFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKG5vZGUuZnJvbSwgbm9kZS50bywgZGVjbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWNvbkRlY29BZnRlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIuYWRkKG5vZGUudG8sIG5vZGUudG8sIGljb25EZWNvQWZ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb25EZWNvQWZ0ZXJXaGVyZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZmluaXNoKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlY29yYXRpb25zOiB2ID0+IHYuZGVjb3JhdGlvbnNcbiAgICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIHZpZXdQbHVnaW47XG59XG4iLCJpbXBvcnQgeyBQbHVnaW4sIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiIGZyb20gXCJzcmMvc2V0dGluZ3MvU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiXCJcclxuaW1wb3J0IHtcclxuXHR1cGRhdGVFbExpbmtzLFxyXG5cdHVwZGF0ZVZpc2libGVMaW5rcyxcclxuXHRjbGVhckV4dHJhQXR0cmlidXRlcyxcclxuXHR1cGRhdGVEaXZFeHRyYUF0dHJpYnV0ZXMsXHJcbn0gZnJvbSBcInNyYy9saW5rQXR0cmlidXRlcy9saW5rQXR0cmlidXRlc1wiXHJcbmltcG9ydCB7IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tIFwic3JjL3NldHRpbmdzL1N1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3NcIlxyXG5pbXBvcnQgeyBQcmVjIH0gZnJvbSBcIkBjb2RlbWlycm9yL3N0YXRlXCI7XHJcbmltcG9ydCB7IGJ1aWxkQ01WaWV3UGx1Z2luIH0gZnJvbSBcIi4vc3JjL2xpbmtBdHRyaWJ1dGVzL2xpdmVQcmV2aWV3XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdXBlcmNoYXJnZWRMaW5rcyBleHRlbmRzIFBsdWdpbiB7XHJcblx0c2V0dGluZ3M6IFN1cGVyY2hhcmdlZExpbmtzU2V0dGluZ3M7XHJcblx0c2V0dGluZ1RhYjogU3VwZXJjaGFyZ2VkTGlua3NTZXR0aW5nVGFiXHJcblx0cHJpdmF0ZSBvYnNlcnZlcnM6IFtNdXRhdGlvbk9ic2VydmVyLCBzdHJpbmcsIHN0cmluZ11bXTtcclxuXHRwcml2YXRlIG1vZGFsT2JzZXJ2ZXJzOiBNdXRhdGlvbk9ic2VydmVyW10gPSBbXTtcclxuXHJcblx0YXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc29sZS5sb2coJ1N1cGVyY2hhcmdlZCBsaW5rcyBsb2FkZWQnKTtcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTdXBlcmNoYXJnZWRMaW5rc1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IoKGVsLCBjdHgpID0+IHtcclxuXHRcdFx0dXBkYXRlRWxMaW5rcyh0aGlzLmFwcCwgdGhpcywgZWwsIGN0eClcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFBsdWdpbnMgd2F0Y2hpbmdcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKCdjaGFuZ2VkJywgZGVib3VuY2UoKF9maWxlKSA9PiB7XHJcblx0XHRcdHVwZGF0ZVZpc2libGVMaW5rcyh0aGlzLmFwcCwgdGhpcyk7XHJcblx0XHRcdHRoaXMub2JzZXJ2ZXJzLmZvckVhY2goKFtvYnNlcnZlciwgdHlwZSwgb3duX2NsYXNzXSkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodHlwZSk7XHJcblx0XHRcdFx0bGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XHJcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZUNvbnRhaW5lcihsZWFmLnZpZXcuY29udGFpbmVyRWwsIHRoaXMsIG93bl9jbGFzcyk7XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0fSk7XHJcblx0XHRcdC8vIERlYm91bmNlZCB0byBwcmV2ZW50IGxhZyB3aGVuIHdyaXRpbmdcclxuXHRcdH0sIDQ1MDAsIHRydWUpKSk7XHJcblxyXG5cclxuXHRcdC8vIExpdmUgcHJldmlld1xyXG5cdFx0Y29uc3QgZXh0ID0gUHJlYy5sb3dlc3QoYnVpbGRDTVZpZXdQbHVnaW4odGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFZGl0b3JFeHRlbnNpb24oZXh0KTtcclxuXHJcblx0XHR0aGlzLm9ic2VydmVycyA9IFtdO1xyXG5cclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcclxuXHRcdFx0dGhpcy5pbml0Vmlld09ic2VydmVycyh0aGlzKTtcclxuXHRcdFx0dGhpcy5pbml0TW9kYWxPYnNlcnZlcnModGhpcywgZG9jdW1lbnQpO1xyXG5cdFx0fSk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKFwid2luZG93LW9wZW5cIiwgKHdpbmRvdywgd2luKSA9PiB0aGlzLmluaXRNb2RhbE9ic2VydmVycyh0aGlzLCB3aW5kb3cuZ2V0Q29udGFpbmVyKCkuZG9jKSkpO1xyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbihcImxheW91dC1jaGFuZ2VcIiwgKCkgPT4gdGhpcy5pbml0Vmlld09ic2VydmVycyh0aGlzKSkpO1xyXG5cclxuXHR9XHJcblxyXG5cdGluaXRWaWV3T2JzZXJ2ZXJzKHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MpIHtcclxuXHRcdC8vIFJlc2V0IG9ic2VydmVyc1xyXG5cdFx0cGx1Z2luLm9ic2VydmVycy5mb3JFYWNoKChbb2JzZXJ2ZXIsIHR5cGVdKSA9PiB7XHJcblx0XHRcdG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuXHRcdH0pO1xyXG5cdFx0cGx1Z2luLm9ic2VydmVycyA9IFtdO1xyXG5cclxuXHRcdC8vIFJlZ2lzdGVyIG5ldyBvYnNlcnZlcnNcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdiYWNrbGluaycsIHBsdWdpbiwgXCIudHJlZS1pdGVtLWlubmVyXCIsIHRydWUpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ291dGdvaW5nLWxpbmsnLCBwbHVnaW4sIFwiLnRyZWUtaXRlbS1pbm5lclwiLCB0cnVlKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdzZWFyY2gnLCBwbHVnaW4sIFwiLnRyZWUtaXRlbS1pbm5lclwiKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdCQy1tYXRyaXgnLCBwbHVnaW4sICcuQkMtTGluaycpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ0JDLWR1Y2tzJywgcGx1Z2luLCAnLmludGVybmFsLWxpbmsnKTtcclxuXHRcdHBsdWdpbi5yZWdpc3RlclZpZXdUeXBlKCdCQy10cmVlJywgcGx1Z2luLCAnYS5pbnRlcm5hbC1saW5rJyk7XHJcblx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnZ3JhcGgtYW5hbHlzaXMnLCBwbHVnaW4sICcuaW50ZXJuYWwtbGluaycpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3N0YXJyZWQnLCBwbHVnaW4sICcubmF2LWZpbGUtdGl0bGUtY29udGVudCcpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ2ZpbGUtZXhwbG9yZXInLCBwbHVnaW4sICcubmF2LWZpbGUtdGl0bGUtY29udGVudCcpO1xyXG5cdFx0cGx1Z2luLnJlZ2lzdGVyVmlld1R5cGUoJ3JlY2VudC1maWxlcycsIHBsdWdpbiwgJy5uYXYtZmlsZS10aXRsZS1jb250ZW50Jyk7XHJcblx0XHQvLyBJZiBiYWNrbGlua3MgaW4gZWRpdG9yIGlzIG9uXHJcblx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRpZiAocGx1Z2luLmFwcD8uaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5iYWNrbGluaz8uaW5zdGFuY2U/Lm9wdGlvbnM/LmJhY2tsaW5rSW5Eb2N1bWVudCkge1xyXG5cdFx0XHRwbHVnaW4ucmVnaXN0ZXJWaWV3VHlwZSgnbWFya2Rvd24nLCBwbHVnaW4sICcudHJlZS1pdGVtLWlubmVyJywgdHJ1ZSk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRpbml0TW9kYWxPYnNlcnZlcnMocGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgZG9jOiBEb2N1bWVudCkge1xyXG5cdFx0Y29uc3QgY29uZmlnID0ge1xyXG5cdFx0XHRzdWJ0cmVlOiBmYWxzZSxcclxuXHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxyXG5cdFx0XHRhdHRyaWJ1dGVzOiBmYWxzZVxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLm1vZGFsT2JzZXJ2ZXJzLnB1c2gobmV3IE11dGF0aW9uT2JzZXJ2ZXIocmVjb3JkcyA9PiB7XHJcblx0XHRcdHJlY29yZHMuZm9yRWFjaCgobXV0YXRpb24pID0+IHtcclxuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcclxuXHRcdFx0XHRcdG11dGF0aW9uLmFkZGVkTm9kZXMuZm9yRWFjaChuID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKCdjbGFzc05hbWUnIGluIG4gJiZcclxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRcdFx0KG4uY2xhc3NOYW1lLmluY2x1ZGVzKCdtb2RhbC1jb250YWluZXInKSAmJiBwbHVnaW4uc2V0dGluZ3MuZW5hYmxlUXVpY2tTd2l0Y2hlclxyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQHRzLWlnbm9yZVxyXG5cdFx0XHRcdFx0XHRcdFx0fHwgbi5jbGFzc05hbWUuaW5jbHVkZXMoJ3N1Z2dlc3Rpb24tY29udGFpbmVyJykgJiYgcGx1Z2luLnNldHRpbmdzLmVuYWJsZVN1Z2dlc3RvcikpIHtcclxuXHRcdFx0XHRcdFx0XHRsZXQgc2VsZWN0b3IgPSBcIi5zdWdnZXN0aW9uLXRpdGxlLCAuc3VnZ2VzdGlvbi1ub3RlLCAuYW5vdGhlci1xdWljay1zd2l0Y2hlcl9faXRlbV9fdGl0bGUsIC5vbW5pc2VhcmNoLXJlc3VsdF9fdGl0bGVcIjtcclxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRcdFx0aWYgKG4uY2xhc3NOYW1lLmluY2x1ZGVzKCdzdWdnZXN0aW9uLWNvbnRhaW5lcicpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxlY3RvciA9IFwiLnN1Z2dlc3Rpb24tdGl0bGUsIC5zdWdnZXN0aW9uLW5vdGVcIjtcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0cGx1Z2luLnVwZGF0ZUNvbnRhaW5lcihuIGFzIEhUTUxFbGVtZW50LCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdFx0XHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyKG51bGwsIG4gYXMgSFRNTEVsZW1lbnQsIHBsdWdpbiwgc2VsZWN0b3IpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSkpO1xyXG5cdFx0dGhpcy5tb2RhbE9ic2VydmVycy5sYXN0KCkub2JzZXJ2ZShkb2MuYm9keSwgY29uZmlnKTtcclxuXHR9XHJcblxyXG5cdHJlZ2lzdGVyVmlld1R5cGUodmlld1R5cGVOYW1lOiBzdHJpbmcsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcsIHVwZGF0ZUR5bmFtaWMgPSBmYWxzZSkge1xyXG5cdFx0Y29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSh2aWV3VHlwZU5hbWUpO1xyXG5cdFx0aWYgKGxlYXZlcy5sZW5ndGggPiAxKSB7XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVhdmVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0Y29uc3QgY29udGFpbmVyID0gbGVhdmVzW2ldLnZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdFx0aWYgKHVwZGF0ZUR5bmFtaWMpIHtcclxuXHRcdFx0XHRcdHBsdWdpbi5fd2F0Y2hDb250YWluZXJEeW5hbWljKHZpZXdUeXBlTmFtZSArIGksIGNvbnRhaW5lciwgcGx1Z2luLCBzZWxlY3RvcilcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRwbHVnaW4uX3dhdGNoQ29udGFpbmVyKHZpZXdUeXBlTmFtZSArIGksIGNvbnRhaW5lciwgcGx1Z2luLCBzZWxlY3Rvcik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIGlmIChsZWF2ZXMubGVuZ3RoIDwgMSkgcmV0dXJuO1xyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGNvbnN0IGNvbnRhaW5lciA9IGxlYXZlc1swXS52aWV3LmNvbnRhaW5lckVsO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUNvbnRhaW5lcihjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IpO1xyXG5cdFx0XHRpZiAodXBkYXRlRHluYW1pYykge1xyXG5cdFx0XHRcdHBsdWdpbi5fd2F0Y2hDb250YWluZXJEeW5hbWljKHZpZXdUeXBlTmFtZSwgY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKVxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHBsdWdpbi5fd2F0Y2hDb250YWluZXIodmlld1R5cGVOYW1lLCBjb250YWluZXIsIHBsdWdpbiwgc2VsZWN0b3IpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR1cGRhdGVDb250YWluZXIoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgc2VsZWN0b3I6IHN0cmluZykge1xyXG5cdFx0aWYgKCFwbHVnaW4uc2V0dGluZ3MuZW5hYmxlQmFja2xpbmtzKSByZXR1cm47XHJcblx0XHRjb25zdCBub2RlcyA9IGNvbnRhaW5lci5maW5kQWxsKHNlbGVjdG9yKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0Y29uc3QgZWwgPSBub2Rlc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKHBsdWdpbi5hcHAsIHBsdWdpbi5zZXR0aW5ncywgZWwsIFwiXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmVtb3ZlRnJvbUNvbnRhaW5lcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nKSB7XHJcblx0XHRjb25zdCBub2RlcyA9IGNvbnRhaW5lci5maW5kQWxsKHNlbGVjdG9yKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0Y29uc3QgZWwgPSBub2Rlc1tpXSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0Y2xlYXJFeHRyYUF0dHJpYnV0ZXMoZWwpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0X3dhdGNoQ29udGFpbmVyKHZpZXdUeXBlOiBzdHJpbmcsIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogU3VwZXJjaGFyZ2VkTGlua3MsIHNlbGVjdG9yOiBzdHJpbmcpIHtcclxuXHRcdGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChyZWNvcmRzLCBfKSA9PiB7XHJcblx0XHRcdHBsdWdpbi51cGRhdGVDb250YWluZXIoY29udGFpbmVyLCBwbHVnaW4sIHNlbGVjdG9yKTtcclxuXHRcdH0pO1xyXG5cdFx0b2JzZXJ2ZXIub2JzZXJ2ZShjb250YWluZXIsIHsgc3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiBmYWxzZSB9KTtcclxuXHRcdGlmICh2aWV3VHlwZSkge1xyXG5cdFx0XHRwbHVnaW4ub2JzZXJ2ZXJzLnB1c2goW29ic2VydmVyLCB2aWV3VHlwZSwgc2VsZWN0b3JdKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdF93YXRjaENvbnRhaW5lckR5bmFtaWModmlld1R5cGU6IHN0cmluZywgY29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBTdXBlcmNoYXJnZWRMaW5rcywgc2VsZWN0b3I6IHN0cmluZywgb3duX2NsYXNzID0gJ3RyZWUtaXRlbS1pbm5lcicsIHBhcmVudF9jbGFzcyA9ICd0cmVlLWl0ZW0nKSB7XHJcblx0XHQvLyBVc2VkIGZvciBlZmZpY2llbnQgdXBkYXRpbmcgb2YgdGhlIGJhY2tsaW5rcyBwYW5lbFxyXG5cdFx0Ly8gT25seSBsb29wcyB0aHJvdWdoIG5ld2x5IGFkZGVkIERPTSBub2RlcyBpbnN0ZWFkIG9mIGNoYW5naW5nIGFsbCBvZiB0aGVtXHJcblx0XHRsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigocmVjb3JkcywgXykgPT4ge1xyXG5cdFx0XHRyZWNvcmRzLmZvckVhY2goKG11dGF0aW9uKSA9PiB7XHJcblx0XHRcdFx0aWYgKG11dGF0aW9uLnR5cGUgPT09ICdjaGlsZExpc3QnKSB7XHJcblx0XHRcdFx0XHRtdXRhdGlvbi5hZGRlZE5vZGVzLmZvckVhY2goKG4pID0+IHtcclxuXHRcdFx0XHRcdFx0aWYgKCdjbGFzc05hbWUnIGluIG4pIHtcclxuXHRcdFx0XHRcdFx0XHQvLyBAdHMtaWdub3JlXHJcblx0XHRcdFx0XHRcdFx0aWYgKG4uY2xhc3NOYW1lLmluY2x1ZGVzICYmIHR5cGVvZiBuLmNsYXNzTmFtZS5pbmNsdWRlcyA9PT0gJ2Z1bmN0aW9uJyAmJiBuLmNsYXNzTmFtZS5pbmNsdWRlcyhwYXJlbnRfY2xhc3MpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBmaWxlRGl2cyA9IChuIGFzIEhUTUxFbGVtZW50KS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKG93bl9jbGFzcyk7XHJcblx0XHRcdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGZpbGVEaXZzLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IGxpbmsgPSBmaWxlRGl2c1tpXSBhcyBIVE1MRWxlbWVudDtcclxuXHRcdFx0XHRcdFx0XHRcdFx0dXBkYXRlRGl2RXh0cmFBdHRyaWJ1dGVzKHBsdWdpbi5hcHAsIHBsdWdpbi5zZXR0aW5ncywgbGluaywgXCJcIik7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHRvYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lciwgeyBzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWUsIGF0dHJpYnV0ZXM6IGZhbHNlIH0pO1xyXG5cdFx0cGx1Z2luLm9ic2VydmVycy5wdXNoKFtvYnNlcnZlciwgdmlld1R5cGUsIHNlbGVjdG9yXSk7XHJcblx0fVxyXG5cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHR0aGlzLm9ic2VydmVycy5mb3JFYWNoKChbb2JzZXJ2ZXIsIHR5cGUsIG93bl9jbGFzc10pID0+IHtcclxuXHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKHR5cGUpO1xyXG5cdFx0XHRsZWF2ZXMuZm9yRWFjaChsZWFmID0+IHtcclxuXHRcdFx0XHR0aGlzLnJlbW92ZUZyb21Db250YWluZXIobGVhZi52aWV3LmNvbnRhaW5lckVsLCBvd25fY2xhc3MpO1xyXG5cdFx0XHR9KVxyXG5cdFx0fSk7XHJcblx0XHRmb3IgKGNvbnN0IG9ic2VydmVyIG9mIHRoaXMubW9kYWxPYnNlcnZlcnMpIHtcclxuXHRcdFx0b2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coJ1N1cGVyY2hhcmdlZCBsaW5rcyB1bmxvYWRlZCcpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG4iXSwibmFtZXMiOlsiTW9kYWwiLCJTZXR0aW5nIiwiUGx1Z2luU2V0dGluZ1RhYiIsImRlYm91bmNlIiwiZ2V0QWxsVGFncyIsImdldExpbmtwYXRoIiwiTWFya2Rvd25WaWV3IiwiV2lkZ2V0VHlwZSIsIlZpZXdQbHVnaW4iLCJ2aWV3IiwiUmFuZ2VTZXRCdWlsZGVyIiwiZWRpdG9yVmlld0ZpZWxkIiwic3ludGF4VHJlZSIsInRva2VuQ2xhc3NOb2RlUHJv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
