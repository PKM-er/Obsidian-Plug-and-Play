/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var R_=Object.create;var Ln=Object.defineProperty,M_=Object.defineProperties,D_=Object.getOwnPropertyDescriptor,O_=Object.getOwnPropertyDescriptors,P_=Object.getOwnPropertyNames,Vd=Object.getOwnPropertySymbols,A_=Object.getPrototypeOf,Xd=Object.prototype.hasOwnProperty,k_=Object.prototype.propertyIsEnumerable;var Zd=(r,e,t)=>e in r?Ln(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))Xd.call(e,t)&&Zd(r,t,e[t]);if(Vd)for(var t of Vd(e))k_.call(e,t)&&Zd(r,t,e[t]);return r},zt=(r,e)=>M_(r,O_(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),N_=(r,e)=>{for(var t in e)Ln(r,t,{get:e[t],enumerable:!0})},Qd=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of P_(e))!Xd.call(r,i)&&i!==t&&Ln(r,i,{get:()=>e[i],enumerable:!(n=D_(e,i))||n.enumerable});return r};var ms=(r,e,t)=>(t=r!=null?R_(A_(r)):{},Qd(e||!r||!r.__esModule?Ln(t,"default",{value:r,enumerable:!0}):t,r)),C_=r=>Qd(Ln({},"__esModule",{value:!0}),r);var ne=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Pf=p((kA,Es)=>{var of,uf,lf,cf,df,ff,pf,hf,mf,bs,ao,yf,gf,_f,rn,Tf,bf,vf,Ef,wf,Rf,Mf,Df,Of,vs;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof Es=="object"&&typeof Es.exports=="object"?r(t(e,t(Es.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};of=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},uf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},lf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},cf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},df=function(n,i){return function(s,a){i(s,a,n)}},ff=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},pf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(y){l(y)}}function d(h){try{f(a.throw(h))}catch(y){l(y)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},hf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},mf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&vs(i,n,s)},vs=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},bs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},yf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(ao(arguments[i]));return n},gf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},_f=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},rn=function(n){return this instanceof rn?(this.v=n,this):new rn(n)},Tf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(P,w){u.push([m,g,P,w])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(P){y(u[0][3],P)}}function d(m){m.value instanceof rn?Promise.resolve(m.value.v).then(f,h):y(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function y(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},bf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:rn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},vf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof bs=="function"?bs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Ef=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};wf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&vs(i,n,s);return t(i,n),i},Rf=function(n){return n&&n.__esModule?n:{default:n}},Mf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},Df=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},Of=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",of),r("__assign",uf),r("__rest",lf),r("__decorate",cf),r("__param",df),r("__metadata",ff),r("__awaiter",pf),r("__generator",hf),r("__exportStar",mf),r("__createBinding",vs),r("__values",bs),r("__read",ao),r("__spread",yf),r("__spreadArrays",gf),r("__spreadArray",_f),r("__await",rn),r("__asyncGenerator",Tf),r("__asyncDelegator",bf),r("__asyncValues",vf),r("__makeTemplateObject",Ef),r("__importStar",wf),r("__importDefault",Rf),r("__classPrivateFieldGet",Mf),r("__classPrivateFieldSet",Df),r("__classPrivateFieldIn",Of)})});var te=p(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.matchAnyPattern=_r.extractTerms=_r.repeatedTimeunitPattern=void 0;function RT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}_r.repeatedTimeunitPattern=RT;function Ep(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}_r.extractTerms=Ep;function MT(r){return`(?:${Ep(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}_r.matchAnyPattern=MT});var V=p((bo,vo)=>{(function(r,e){typeof bo=="object"&&typeof vo!="undefined"?vo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(bo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(N,v,b){var C=String(N);return!C||C.length>=v?N:""+Array(v+1-C.length).join(b)+N},w={s:P,z:function(N){var v=-N.utcOffset(),b=Math.abs(v),C=Math.floor(b/60),_=b%60;return(v<=0?"+":"-")+P(C,2,"0")+":"+P(_,2,"0")},m:function N(v,b){if(v.date()<b.date())return-N(b,v);var C=12*(b.year()-v.year())+(b.month()-v.month()),_=v.clone().add(C,l),S=b-_<0,A=v.clone().add(C+(S?-1:1),l);return+(-(C+(b-_)/(S?_-A:A-_))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},k="en",z={};z[k]=g;var le=function(N){return N instanceof gt},ye=function(N,v,b){var C;if(!N)return k;if(typeof N=="string")z[N]&&(C=N),v&&(z[N]=v,C=N);else{var _=N.name;z[_]=N,C=_}return!b&&C&&(k=C),C||!b&&k},re=function(N,v){if(le(N))return N.clone();var b=typeof v=="object"?v:{};return b.date=N,b.args=arguments,new gt(b)},W=w;W.l=ye,W.i=le,W.w=function(N,v){return re(N,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var gt=function(){function N(b){this.$L=ye(b.locale,null,!0),this.parse(b)}var v=N.prototype;return v.parse=function(b){this.$d=function(C){var _=C.date,S=C.utc;if(_===null)return new Date(NaN);if(W.u(_))return new Date;if(_ instanceof Date)return new Date(_);if(typeof _=="string"&&!/Z$/i.test(_)){var A=_.match(y);if(A){var I=A[2]-1||0,J=(A[7]||"0").substring(0,3);return S?new Date(Date.UTC(A[1],I,A[3]||1,A[4]||0,A[5]||0,A[6]||0,J)):new Date(A[1],I,A[3]||1,A[4]||0,A[5]||0,A[6]||0,J)}}return new Date(_)}(b),this.$x=b.x||{},this.init()},v.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},v.$utils=function(){return W},v.isValid=function(){return this.$d.toString()!==h},v.isSame=function(b,C){var _=re(b);return this.startOf(C)<=_&&_<=this.endOf(C)},v.isAfter=function(b,C){return re(b)<this.startOf(C)},v.isBefore=function(b,C){return this.endOf(C)<re(b)},v.$g=function(b,C,_){return W.u(b)?this[C]:this.set(_,b)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(b,C){var _=this,S=!!W.u(C)||C,A=W.p(b),I=function(Gt,Se){var Je=W.w(_.$u?Date.UTC(_.$y,Se,Gt):new Date(_.$y,Se,Gt),_);return S?Je:Je.endOf(o)},J=function(Gt,Se){return W.w(_.toDate()[Gt].apply(_.toDate("s"),(S?[0,0,0,0]:[23,59,59,999]).slice(Se)),_)},X=this.$W,de=this.$M,fe=this.$D,Ce="set"+(this.$u?"UTC":"");switch(A){case d:return S?I(1,0):I(31,11);case l:return S?I(1,de):I(0,de+1);case u:var Ge=this.$locale().weekStart||0,Qe=(X<Ge?X+7:X)-Ge;return I(S?fe-Qe:fe+(6-Qe),de);case o:case f:return J(Ce+"Hours",0);case a:return J(Ce+"Minutes",1);case s:return J(Ce+"Seconds",2);case i:return J(Ce+"Milliseconds",3);default:return this.clone()}},v.endOf=function(b){return this.startOf(b,!1)},v.$set=function(b,C){var _,S=W.p(b),A="set"+(this.$u?"UTC":""),I=(_={},_[o]=A+"Date",_[f]=A+"Date",_[l]=A+"Month",_[d]=A+"FullYear",_[a]=A+"Hours",_[s]=A+"Minutes",_[i]=A+"Seconds",_[n]=A+"Milliseconds",_)[S],J=S===o?this.$D+(C-this.$W):C;if(S===l||S===d){var X=this.clone().set(f,1);X.$d[I](J),X.init(),this.$d=X.set(f,Math.min(this.$D,X.daysInMonth())).$d}else I&&this.$d[I](J);return this.init(),this},v.set=function(b,C){return this.clone().$set(b,C)},v.get=function(b){return this[W.p(b)]()},v.add=function(b,C){var _,S=this;b=Number(b);var A=W.p(C),I=function(de){var fe=re(S);return W.w(fe.date(fe.date()+Math.round(de*b)),S)};if(A===l)return this.set(l,this.$M+b);if(A===d)return this.set(d,this.$y+b);if(A===o)return I(1);if(A===u)return I(7);var J=(_={},_[s]=e,_[a]=t,_[i]=r,_)[A]||1,X=this.$d.getTime()+b*J;return W.w(X,this)},v.subtract=function(b,C){return this.add(-1*b,C)},v.format=function(b){var C=this,_=this.$locale();if(!this.isValid())return _.invalidDate||h;var S=b||"YYYY-MM-DDTHH:mm:ssZ",A=W.z(this),I=this.$H,J=this.$m,X=this.$M,de=_.weekdays,fe=_.months,Ce=function(Se,Je,Xr,Ht){return Se&&(Se[Je]||Se(C,S))||Xr[Je].substr(0,Ht)},Ge=function(Se){return W.s(I%12||12,Se,"0")},Qe=_.meridiem||function(Se,Je,Xr){var Ht=Se<12?"AM":"PM";return Xr?Ht.toLowerCase():Ht},Gt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:X+1,MM:W.s(X+1,2,"0"),MMM:Ce(_.monthsShort,X,fe,3),MMMM:Ce(fe,X),D:this.$D,DD:W.s(this.$D,2,"0"),d:String(this.$W),dd:Ce(_.weekdaysMin,this.$W,de,2),ddd:Ce(_.weekdaysShort,this.$W,de,3),dddd:de[this.$W],H:String(I),HH:W.s(I,2,"0"),h:Ge(1),hh:Ge(2),a:Qe(I,J,!0),A:Qe(I,J,!1),m:String(J),mm:W.s(J,2,"0"),s:String(this.$s),ss:W.s(this.$s,2,"0"),SSS:W.s(this.$ms,3,"0"),Z:A};return S.replace(m,function(Se,Je){return Je||Gt[Se]||A.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(b,C,_){var S,A=W.p(C),I=re(b),J=(I.utcOffset()-this.utcOffset())*e,X=this-I,de=W.m(this,I);return de=(S={},S[d]=de/12,S[l]=de,S[c]=de/3,S[u]=(X-J)/6048e5,S[o]=(X-J)/864e5,S[a]=X/t,S[s]=X/e,S[i]=X/r,S)[A]||X,_?de:W.a(de)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return z[this.$L]},v.locale=function(b,C){if(!b)return this.$L;var _=this.clone(),S=ye(b,C,!0);return S&&(_.$L=S),_},v.clone=function(){return W.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},N}(),Xe=gt.prototype;return re.prototype=Xe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(N){Xe[N[1]]=function(v){return this.$g(v,N[0],N[1])}}),re.extend=function(N,v){return N.$i||(N(v,gt,re),N.$i=!0),re},re.locale=ye,re.isDayjs=le,re.unix=function(N){return re(1e3*N)},re.en=z[k],re.Ls=z,re.p={},re})});var Ie=p(Tr=>{"use strict";var DT=Tr&&Tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.findYearClosestToRef=Tr.findMostLikelyADYear=void 0;var OT=DT(V());function PT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Tr.findMostLikelyADYear=PT;function AT(r,e,t){let n=OT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Tr.findYearClosestToRef=AT});var Fe=p(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.parseTimeUnits=L.TIME_UNITS_PATTERN=L.parseYear=L.YEAR_PATTERN=L.parseOrdinalNumberPattern=L.ORDINAL_NUMBER_PATTERN=L.parseNumberPattern=L.NUMBER_PATTERN=L.TIME_UNIT_DICTIONARY=L.ORDINAL_WORD_DICTIONARY=L.INTEGER_WORD_DICTIONARY=L.MONTH_DICTIONARY=L.FULL_MONTH_NAME_DICTIONARY=L.WEEKDAY_DICTIONARY=void 0;var ks=te(),kT=Ie();L.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};L.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};L.MONTH_DICTIONARY=Object.assign(Object.assign({},L.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});L.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};L.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};L.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};L.NUMBER_PATTERN=`(?:${ks.matchAnyPattern(L.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Rp(r){let e=r.toLowerCase();return L.INTEGER_WORD_DICTIONARY[e]!==void 0?L.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}L.parseNumberPattern=Rp;L.ORDINAL_NUMBER_PATTERN=`(?:${ks.matchAnyPattern(L.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function NT(r){let e=r.toLowerCase();return L.ORDINAL_WORD_DICTIONARY[e]!==void 0?L.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}L.parseOrdinalNumberPattern=NT;L.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function CT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return kT.findMostLikelyADYear(e)}L.parseYear=CT;var Mp=`(${L.NUMBER_PATTERN})\\s{0,3}(${ks.matchAnyPattern(L.TIME_UNIT_DICTIONARY)})`,wp=new RegExp(Mp,"i");L.TIME_UNITS_PATTERN=ks.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Mp);function ST(r){let e={},t=r,n=wp.exec(t);for(;n;)xT(e,n),t=t.substring(n[0].length).trim(),n=wp.exec(t);return e}L.parseTimeUnits=ST;function xT(r,e){let t=Rp(e[1]),n=L.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Dp=p((Eo,wo)=>{(function(r,e){typeof Eo=="object"&&typeof wo!="undefined"?wo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Eo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var lt=p(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.implySimilarTime=Ut.assignSimilarTime=Ut.assignSimilarDate=Ut.assignTheNextDay=void 0;var Op=we();function IT(r,e){e=e.add(1,"day"),Pp(r,e),Ap(r,e)}Ut.assignTheNextDay=IT;function Pp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Ut.assignSimilarDate=Pp;function FT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Op.Meridiem.AM):r.assign("meridiem",Op.Meridiem.PM)}Ut.assignSimilarTime=FT;function Ap(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Ut.implySimilarTime=Ap});var kp=p(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.toTimezoneOffset=Fr.TIMEZONE_ABBR_MAP=void 0;Fr.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function UT(r){var e;return r==null?null:typeof r=="number"?r:(e=Fr.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Fr.toTimezoneOffset=UT});var pe=p(qt=>{"use strict";var Np=qt&&qt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qt,"__esModule",{value:!0});qt.ParsingResult=qt.ParsingComponents=qt.ReferenceWithTimezone=void 0;var qT=Np(Dp()),Ns=Np(V()),Ro=lt(),WT=kp();Ns.default.extend(qT.default);var Mo=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=WT.toTimezoneOffset(e.timezone))}};qt.ReferenceWithTimezone=Mo;var Ur=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Ns.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Ur(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Ns.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Ns.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Ur(e);return t.hour||t.minute||t.second?(Ro.assignSimilarTime(i,n),Ro.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Ro.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};qt.ParsingComponents=Ur;var Qn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Ur(e),this.end=s}clone(){let e=new Qn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};qt.ParsingResult=Qn});var R=p(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.AbstractParserWithWordBoundaryChecking=void 0;var Do=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Cs.AbstractParserWithWordBoundaryChecking=Do});var Cp=p(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});var Po=Fe(),LT=pe(),YT=R(),$T=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),jT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Oo=class extends YT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?jT:$T}innerExtract(e,t){let n=Po.parseTimeUnits(t[1]);return LT.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ao.default=Oo});var qp=p(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var BT=Ie(),Fp=Fe(),Up=Fe(),Ss=Fe(),GT=te(),HT=R(),zT=new RegExp(`(?:on\\s{0,3})?(${Ss.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ss.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${GT.matchAnyPattern(Fp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Up.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Sp=1,xp=2,KT=3,Ip=4,ko=class extends HT.AbstractParserWithWordBoundaryChecking{innerPattern(){return zT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Fp.MONTH_DICTIONARY[t[KT].toLowerCase()],s=Ss.parseOrdinalNumberPattern(t[Sp]);if(s>31)return t.index=t.index+t[Sp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ip]){let a=Up.parseYear(t[Ip]);n.start.assign("year",a)}else{let a=BT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[xp]){let a=Ss.parseOrdinalNumberPattern(t[xp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};No.default=ko});var jp=p(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var VT=Ie(),Yp=Fe(),xs=Fe(),$p=Fe(),ZT=te(),XT=R(),QT=new RegExp(`(${ZT.matchAnyPattern(Yp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${xs.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${xs.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${$p.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),JT=1,eb=2,Wp=3,Lp=4,Co=class extends XT.AbstractParserWithWordBoundaryChecking{innerPattern(){return QT}innerExtract(e,t){let n=Yp.MONTH_DICTIONARY[t[JT].toLowerCase()],i=xs.parseOrdinalNumberPattern(t[eb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Lp]){let u=$p.parseYear(t[Lp]);s.assign("year",u)}else{let u=VT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Wp])return s;let a=xs.parseOrdinalNumberPattern(t[Wp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};So.default=Co});var Hp=p(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var xo=Fe(),tb=Ie(),rb=te(),Gp=Fe(),nb=R(),ib=new RegExp(`((?:in)\\s*)?(${rb.matchAnyPattern(xo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Gp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),sb=1,ab=2,Bp=3,Io=class extends nb.AbstractParserWithWordBoundaryChecking{innerPattern(){return ib}innerExtract(e,t){let n=t[ab].toLowerCase();if(t[0].length<=3&&!xo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[sb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=xo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Bp]){let a=Gp.parseYear(t[Bp]);i.start.assign("year",a)}else{let a=tb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Fo.default=Io});var Vp=p(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var Kp=Fe(),ob=te(),ub=R(),lb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${ob.matchAnyPattern(Kp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),cb=1,db=2,zp=3,fb=4,Uo=class extends ub.AbstractParserWithWordBoundaryChecking{innerPattern(){return lb}innerExtract(e,t){let n=t[zp]?parseInt(t[zp]):Kp.MONTH_DICTIONARY[t[db].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[cb]);return{day:parseInt(t[fb]),month:n,year:i}}};qo.default=Uo});var Zp=p(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var pb=R(),hb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),mb=1,yb=2,Wo=class extends pb.AbstractParserWithWordBoundaryChecking{innerPattern(){return hb}innerExtract(e,t){let n=parseInt(t[yb]),i=parseInt(t[mb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Lo.default=Wo});var qr=p(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.AbstractTimeExpressionParser=void 0;var Be=we();function gb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function _b(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var Xp=2,un=3,Is=4,Fs=5,Jn=6,Yo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[Xp]);if(o>100){if(this.strictMode||t[un]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[un]!=null){if(t[un].length==1&&!t[Jn])return null;s=parseInt(t[un])}if(s>=60)return null;if(o>12&&(a=Be.Meridiem.PM),t[Jn]!=null){if(o>12)return null;let u=t[Jn][0].toLowerCase();u=="a"&&(a=Be.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Be.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Be.Meridiem.AM):i.imply("meridiem",Be.Meridiem.PM),t[Fs]!=null){let u=parseInt(t[Fs].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Is]!=null){let u=parseInt(t[Is]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Fs]!=null){let u=parseInt(t[Fs].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Is]!=null){let u=parseInt(t[Is]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[Xp]),a=0,o=-1;if(t[un]!=null?a=parseInt(t[un]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Be.Meridiem.PM),t[Jn]!=null){if(s>12)return null;let u=t[Jn][0].toLowerCase();u=="a"&&(o=Be.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Be.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Be.Meridiem.AM?(n.start.imply("meridiem",Be.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Be.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Be.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Be.Meridiem.PM)):s>12?i.imply("meridiem",Be.Meridiem.PM):s<=12&&i.imply("meridiem",Be.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=gb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=_b(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Us.AbstractTimeExpressionParser=Yo});var Qp=p(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var qs=we(),Tb=qr(),$o=class extends Tb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",qs.Meridiem.PM)):i<6&&n.assign("meridiem",qs.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",qs.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",qs.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};jo.default=$o});var ct=p(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.addImpliedTimeUnits=ln.reverseTimeUnits=void 0;function bb(r){let e={};for(let t in r)e[t]=-r[t];return e}ln.reverseTimeUnits=bb;function vb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}ln.addImpliedTimeUnits=vb});var Jp=p(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var Go=Fe(),Eb=pe(),wb=R(),Rb=ct(),Mb=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Db=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Bo=class extends wb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Db:Mb}innerExtract(e,t){let n=Go.parseTimeUnits(t[1]),i=Rb.reverseTimeUnits(n);return Eb.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ho.default=Bo});var eh=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Ko=Fe(),Ob=pe(),Pb=R(),Ab=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),kb=new RegExp("("+Ko.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Nb=1,zo=class extends Pb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?kb:Ab}innerExtract(e,t){let n=Ko.parseTimeUnits(t[Nb]);return Ob.ParsingComponents.createRelativeFromReference(e.reference,n)}};Vo.default=zo});var dn=p(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.MergingRefiner=cn.Filter=void 0;var Zo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};cn.Filter=Zo;var Xo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};cn.MergingRefiner=Xo});var Wt=p(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Cb=dn(),Qo=class extends Cb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Jo.default=Qo});var th=p(ei=>{"use strict";var Sb=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var xb=Sb(Wt()),eu=class extends xb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};ei.default=eu});var rh=p(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.mergeDateTimeComponent=fn.mergeDateTimeResult=void 0;var Ib=we();function Fb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=tu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=tu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}fn.mergeDateTimeResult=Fb;function tu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Ib.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}fn.mergeDateTimeComponent=tu});var Qt=p(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var Ub=dn(),nh=rh(),ru=class extends Ub.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?nh.mergeDateTimeResult(t,n):nh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};nu.default=ru});var ih=p(ti=>{"use strict";var qb=ti&&ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ti,"__esModule",{value:!0});var Wb=qb(Qt()),iu=class extends Wb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};ti.default=iu});var sh=p(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Lb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Yb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},su=class{constructor(e){this.timezone=Object.assign(Object.assign({},Yb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Lb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};au.default=su});var Ws=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var $b=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),jb=1,Bb=2,Gb=3,ou=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=$b.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Bb]),o=parseInt(s[Gb]||"0"),u=a*60+o;u>14*60||(s[jb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};uu.default=ou});var ah=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var lu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};cu.default=lu});var oh=p(ri=>{"use strict";var Hb=ri&&ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ri,"__esModule",{value:!0});var zb=Hb(V()),du=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=zb.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};ri.default=du});var uh=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var Kb=dn(),fu=class extends Kb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};pu.default=fu});var yu=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var Vb=R(),Zb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),Xb=1,Qb=2,Jb=3,lh=4,e1=5,ch=6,dh=7,fh=8,ph=9,hu=class extends Vb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zb}innerExtract(e,t){let n={};if(n.year=parseInt(t[Xb]),n.month=parseInt(t[Qb]),n.day=parseInt(t[Jb]),t[lh]!=null)if(n.hour=parseInt(t[lh]),n.minute=parseInt(t[e1]),t[ch]!=null&&(n.second=parseInt(t[ch])),t[dh]!=null&&(n.millisecond=parseInt(t[dh])),t[fh]==null)n.timezoneOffset=0;else{let i=parseInt(t[fh]),s=0;t[ph]!=null&&(s=parseInt(t[ph]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};mu.default=hu});var hh=p(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var t1=dn(),gu=class extends t1.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};_u.default=gu});var Jt=p(pn=>{"use strict";var Wr=pn&&pn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pn,"__esModule",{value:!0});pn.includeCommonConfiguration=void 0;var r1=Wr(sh()),n1=Wr(Ws()),mh=Wr(ah()),i1=Wr(oh()),s1=Wr(uh()),a1=Wr(yu()),o1=Wr(hh());function u1(r,e=!1){return r.parsers.unshift(new a1.default),r.refiners.unshift(new o1.default),r.refiners.unshift(new r1.default),r.refiners.unshift(new n1.default),r.refiners.unshift(new mh.default),r.refiners.push(new mh.default),r.refiners.push(new i1.default),r.refiners.push(new s1.default(e)),r}pn.includeCommonConfiguration=u1});var tr=p(ee=>{"use strict";var l1=ee&&ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ee,"__esModule",{value:!0});ee.noon=ee.morning=ee.midnight=ee.yesterdayEvening=ee.evening=ee.lastNight=ee.tonight=ee.theDayAfter=ee.tomorrow=ee.theDayBefore=ee.yesterday=ee.today=ee.now=void 0;var Lt=pe(),hn=l1(V()),er=lt(),ni=we();function c1(r){let e=hn.default(r.instant),t=new Lt.ParsingComponents(r,{});return er.assignSimilarDate(t,e),er.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}ee.now=c1;function d1(r){let e=hn.default(r.instant),t=new Lt.ParsingComponents(r,{});return er.assignSimilarDate(t,e),er.implySimilarTime(t,e),t}ee.today=d1;function f1(r){return yh(r,1)}ee.yesterday=f1;function yh(r,e){return Tu(r,-e)}ee.theDayBefore=yh;function p1(r){return Tu(r,1)}ee.tomorrow=p1;function Tu(r,e){let t=hn.default(r.instant),n=new Lt.ParsingComponents(r,{});return t=t.add(e,"day"),er.assignSimilarDate(n,t),er.implySimilarTime(n,t),n}ee.theDayAfter=Tu;function h1(r,e=22){let t=hn.default(r.instant),n=new Lt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ni.Meridiem.PM),er.assignSimilarDate(n,t),n}ee.tonight=h1;function m1(r,e=0){let t=hn.default(r.instant),n=new Lt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),er.assignSimilarDate(n,t),n.imply("hour",e),n}ee.lastNight=m1;function y1(r,e=20){let t=new Lt.ParsingComponents(r,{});return t.imply("meridiem",ni.Meridiem.PM),t.imply("hour",e),t}ee.evening=y1;function g1(r,e=20){let t=hn.default(r.instant),n=new Lt.ParsingComponents(r,{});return t=t.add(-1,"day"),er.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ni.Meridiem.PM),n}ee.yesterdayEvening=g1;function _1(r){let e=new Lt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}ee.midnight=_1;function T1(r,e=6){let t=new Lt.ParsingComponents(r,{});return t.imply("meridiem",ni.Meridiem.AM),t.imply("hour",e),t}ee.morning=T1;function b1(r){let e=new Lt.ParsingComponents(r,{});return e.imply("meridiem",ni.Meridiem.AM),e.imply("hour",12),e}ee.noon=b1});var gh=p(vt=>{"use strict";var v1=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),E1=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),w1=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&v1(e,r,t);return E1(e,r),e},R1=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var M1=R1(V()),D1=R(),O1=lt(),ii=w1(tr()),P1=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,bu=class extends D1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return P1}innerExtract(e,t){let n=M1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return ii.now(e.reference);case"today":return ii.today(e.reference);case"yesterday":return ii.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return ii.tomorrow(e.reference);case"tonight":return ii.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),O1.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};vt.default=bu});var _h=p(si=>{"use strict";var A1=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var Ls=we(),k1=R(),N1=A1(V()),C1=lt(),S1=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,vu=class extends k1.AbstractParserWithWordBoundaryChecking{innerPattern(){return S1}innerExtract(e,t){let n=N1.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ls.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ls.Meridiem.PM),i.imply("hour",20);break;case"midnight":C1.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ls.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ls.Meridiem.AM),i.imply("hour",12);break}return i}};si.default=vu});var Lr=p(br=>{"use strict";var x1=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.toDayJSClosestWeekday=br.toDayJSWeekday=void 0;var Th=x1(V());function I1(r,e,t){if(!t)return bh(r,e);let n=Th.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}br.toDayJSWeekday=I1;function bh(r,e){let t=Th.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}br.toDayJSClosestWeekday=bh});var Eh=p(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var vh=Fe(),F1=te(),U1=R(),q1=Lr(),W1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${F1.matchAnyPattern(vh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),L1=1,Y1=2,$1=3,Eu=class extends U1.AbstractParserWithWordBoundaryChecking{innerPattern(){return W1}innerExtract(e,t){let n=t[Y1].toLowerCase(),i=vh.WEEKDAY_DICTIONARY[n],s=t[L1],a=t[$1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=q1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};wu.default=Eu});var Mh=p(ai=>{"use strict";var j1=ai&&ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var Rh=Fe(),wh=pe(),B1=j1(V()),G1=R(),H1=te(),z1=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${H1.matchAnyPattern(Rh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),K1=1,V1=2,Ru=class extends G1.AbstractParserWithWordBoundaryChecking{innerPattern(){return z1}innerExtract(e,t){let n=t[K1].toLowerCase(),i=t[V1].toLowerCase(),s=Rh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,wh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,wh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=B1.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ai.default=Ru});var Et=p(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.ParsingContext=gn.Chrono=void 0;var mn=pe(),Z1=Mu(),yn=class{constructor(e){e=e||Z1.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new yn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Ys(e,t,n),s=[];return this.parsers.forEach(a=>{let o=yn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof mn.ParsingResult?c=l:l instanceof mn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};gn.Chrono=yn;var Ys=class{constructor(e,t,n){this.text=e,this.reference=new mn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof mn.ParsingComponents?e:new mn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new mn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};gn.ParsingContext=Ys});var Yr=p(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var Dh=Ie(),X1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),$s=1,Oh=5,Ph=2,Ah=3,Du=4,Ou=class{constructor(e){this.groupNumberMonth=e?Ah:Ph,this.groupNumberDay=e?Ph:Ah}pattern(){return X1}extract(e,t){if(t[$s]=="/"||t[Oh]=="/"){t.index+=t[0].length;return}let n=t.index+t[$s].length,i=t[0].substr(t[$s].length,t[0].length-t[$s].length-t[Oh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Du]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Du]){let u=parseInt(t[Du]),l=Dh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Dh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Pu.default=Ou});var Nh=p(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var kh=Fe(),Q1=pe(),J1=R(),ev=ct(),tv=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${kh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Au=class extends J1.AbstractParserWithWordBoundaryChecking{innerPattern(){return tv}innerExtract(e,t){let n=t[1].toLowerCase(),i=kh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=ev.reverseTimeUnits(i);break}return Q1.ParsingComponents.createRelativeFromReference(e.reference,i)}};ku.default=Au});var Sh=p(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var rv=dn(),Nu=pe(),nv=Fe(),iv=ct();function Ch(r){return r.text.match(/\s+(before|from)$/i)!=null}function sv(r){return r.text.match(/\s+(after|since)$/i)!=null}var Cu=class extends rv.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Ch(t)&&!sv(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=nv.parseTimeUnits(t.text);Ch(t)&&(i=iv.reverseTimeUnits(i));let s=Nu.ParsingComponents.createRelativeFromReference(new Nu.ReferenceWithTimezone(n.start.date()),i);return new Nu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Su.default=Cu});var Mu=p(_e=>{"use strict";var Me=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.GB=_e.strict=_e.casual=void 0;var av=Me(Cp()),ov=Me(qp()),uv=Me(jp()),lv=Me(Hp()),cv=Me(Vp()),dv=Me(Zp()),fv=Me(Qp()),pv=Me(Jp()),hv=Me(eh()),mv=Me(th()),yv=Me(ih()),gv=Jt(),_v=Me(gh()),Tv=Me(_h()),bv=Me(Eh()),vv=Me(Mh()),xu=Et(),Ev=Me(Yr()),wv=Me(Nh()),Rv=Me(Sh());_e.casual=new xu.Chrono(xh(!1));_e.strict=new xu.Chrono(js(!0,!1));_e.GB=new xu.Chrono(js(!1,!0));function Mv(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=Mv;function Dv(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=Dv;function xh(r=!1){let e=js(!1,r);return e.parsers.unshift(new _v.default),e.parsers.unshift(new Tv.default),e.parsers.unshift(new lv.default),e.parsers.unshift(new vv.default),e.parsers.unshift(new wv.default),e}_e.createCasualConfiguration=xh;function js(r=!0,e=!1){return gv.includeCommonConfiguration({parsers:[new Ev.default(e),new av.default,new ov.default,new uv.default,new bv.default,new cv.default,new dv.default,new fv.default(r),new pv.default(r),new hv.default(r)],refiners:[new Rv.default,new yv.default,new mv.default]},r)}_e.createConfiguration=js});var Ih=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var Ov=qr(),Iu=class extends Ov.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Fu.default=Iu});var oi=p(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.parseTimeUnits=se.TIME_UNITS_PATTERN=se.parseYear=se.YEAR_PATTERN=se.parseNumberPattern=se.NUMBER_PATTERN=se.TIME_UNIT_DICTIONARY=se.INTEGER_WORD_DICTIONARY=se.MONTH_DICTIONARY=se.WEEKDAY_DICTIONARY=void 0;var Uu=te(),Pv=Ie();se.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};se.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};se.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};se.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};se.NUMBER_PATTERN=`(?:${Uu.matchAnyPattern(se.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Uh(r){let e=r.toLowerCase();return se.INTEGER_WORD_DICTIONARY[e]!==void 0?se.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}se.parseNumberPattern=Uh;se.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function Av(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return Pv.findMostLikelyADYear(e)}se.parseYear=Av;var qh=`(${se.NUMBER_PATTERN})\\s{0,5}(${Uu.matchAnyPattern(se.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Fh=new RegExp(qh,"i");se.TIME_UNITS_PATTERN=Uu.repeatedTimeunitPattern("",qh);function kv(r){let e={},t=r,n=Fh.exec(t);for(;n;)Nv(e,n),t=t.substring(n[0].length),n=Fh.exec(t);return e}se.parseTimeUnits=kv;function Nv(r,e){let t=Uh(e[1]),n=se.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Lh=p(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Wh=oi(),Cv=te(),Sv=R(),xv=Lr(),Iv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${Cv.matchAnyPattern(Wh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),Fv=1,Uv=3,qv=2,qu=class extends Sv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Iv}innerExtract(e,t){let n=t[qv].toLowerCase(),i=Wh.WEEKDAY_DICTIONARY[n],s=t[Fv],a=t[Uv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=xv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Wu.default=qu});var Bh=p(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var vr=we(),Wv=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Lv=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Yv=2,Yh=3,$h=4,jh=5,_n=class{pattern(e){return Wv}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=_n.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Lv.exec(i);return s&&(n.end=_n.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Yv]),t[Yh]!=null&&(i=parseInt(t[Yh])),i>=60||n>24)return null;if(n>=12&&(s=vr.Meridiem.PM),t[jh]!=null){if(n>12)return null;let a=t[jh].toLowerCase();a.match(/morgen|vormittag/)&&(s=vr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=vr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=vr.Meridiem.AM,n=0):n<6?s=vr.Meridiem.AM:(s=vr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",vr.Meridiem.AM):e.imply("meridiem",vr.Meridiem.PM),t[$h]!=null){let a=parseInt(t[$h]);if(a>=60)return null;e.assign("second",a)}return e}};Lu.default=_n});var Gh=p(ui=>{"use strict";var $v=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var jv=$v(Wt()),Yu=class extends jv.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ui.default=Yu});var Hh=p(li=>{"use strict";var Bv=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var Gv=Bv(Qt()),$u=class extends Gv.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};li.default=$u});var ju=p(di=>{"use strict";var Hv=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var zv=Hv(V()),$r=we(),Kv=R(),Vv=lt(),Zv=ct(),ci=class extends Kv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=zv.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return Vv.implySimilarTime(s,n),ci.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=Zv.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",$r.Meridiem.AM);break}return e}};di.default=ci});var Vh=p(wt=>{"use strict";var Xv=wt&&wt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Qv=wt&&wt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Jv=wt&&wt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Xv(e,r,t);return Qv(e,r),e},Kh=wt&&wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wt,"__esModule",{value:!0});var eE=Kh(V()),tE=R(),jr=lt(),rE=Kh(ju()),zh=Jv(tr()),nE=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),iE=1,sE=2,Bu=class extends tE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return nE}innerExtract(e,t){let n=eE.default(e.refDate),i=(t[iE]||"").toLowerCase(),s=(t[sE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=zh.now(e.reference);break;case"heute":a=zh.today(e.reference);break;case"morgen":jr.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),jr.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),jr.assignSimilarDate(a,n),jr.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),jr.assignSimilarDate(a,n),jr.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),jr.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=rE.default.extractTimeComponents(a,s)),a}};wt.default=Bu});var tm=p(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var aE=Ie(),Jh=oi(),em=oi(),oE=te(),uE=R(),lE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${oE.matchAnyPattern(Jh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${em.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Zh=1,Xh=2,cE=3,Qh=4,Gu=class extends uE.AbstractParserWithWordBoundaryChecking{innerPattern(){return lE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Jh.MONTH_DICTIONARY[t[cE].toLowerCase()],s=parseInt(t[Zh]);if(s>31)return t.index=t.index+t[Zh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Qh]){let a=em.parseYear(t[Qh]);n.start.assign("year",a)}else{let a=aE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Xh]){let a=parseInt(t[Xh]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hu.default=Gu});var rm=p(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var Bs=oi(),dE=pe(),fE=R(),pE=ct(),hE=te(),zu=class extends fE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Bs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${hE.matchAnyPattern(Bs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Bs.parseNumberPattern(t[2]):1,i=Bs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=pE.reverseTimeUnits(s)),dE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Ku.default=zu});var sm=p(De=>{"use strict";var Rt=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var mE=Jt(),nm=Et(),yE=Rt(Yr()),gE=Rt(yu()),_E=Rt(Ih()),TE=Rt(Lh()),bE=Rt(Bh()),vE=Rt(Gh()),EE=Rt(Hh()),wE=Rt(Vh()),RE=Rt(ju()),ME=Rt(tm()),DE=Rt(rm());De.casual=new nm.Chrono(im());De.strict=new nm.Chrono(Vu(!0));function OE(r,e,t){return De.casual.parse(r,e,t)}De.parse=OE;function PE(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=PE;function im(r=!0){let e=Vu(!1,r);return e.parsers.unshift(new RE.default),e.parsers.unshift(new wE.default),e.parsers.unshift(new DE.default),e}De.createCasualConfiguration=im;function Vu(r=!0,e=!0){return mE.includeCommonConfiguration({parsers:[new gE.default,new yE.default(e),new _E.default,new bE.default,new ME.default,new TE.default],refiners:[new vE.default,new EE.default]},r)}De.createConfiguration=Vu});var om=p(Mt=>{"use strict";var AE=Mt&&Mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kE=Mt&&Mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),NE=Mt&&Mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&AE(e,r,t);return kE(e,r),e},CE=Mt&&Mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mt,"__esModule",{value:!0});var SE=CE(V()),xE=we(),IE=R(),am=lt(),Gs=NE(tr()),Zu=class extends IE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=SE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Gs.now(e.reference);case"aujourd'hui":return Gs.today(e.reference);case"hier":return Gs.yesterday(e.reference);case"demain":return Gs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(am.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",xE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),am.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Mt.default=Zu});var um=p(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var fi=we(),FE=R(),Xu=class extends FE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",fi.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",fi.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",fi.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",fi.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",fi.Meridiem.AM);break}return i}};Qu.default=Xu});var lm=p(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var UE=qr(),Ju=class extends UE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};el.default=Ju});var cm=p(pi=>{"use strict";var qE=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var WE=qE(Qt()),tl=class extends WE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};pi.default=tl});var dm=p(hi=>{"use strict";var LE=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var YE=LE(Wt()),rl=class extends YE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};hi.default=rl});var Er=p(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.parseTimeUnits=Z.TIME_UNITS_PATTERN=Z.parseYear=Z.YEAR_PATTERN=Z.parseOrdinalNumberPattern=Z.ORDINAL_NUMBER_PATTERN=Z.parseNumberPattern=Z.NUMBER_PATTERN=Z.TIME_UNIT_DICTIONARY=Z.INTEGER_WORD_DICTIONARY=Z.MONTH_DICTIONARY=Z.WEEKDAY_DICTIONARY=void 0;var nl=te();Z.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};Z.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};Z.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};Z.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};Z.NUMBER_PATTERN=`(?:${nl.matchAnyPattern(Z.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function pm(r){let e=r.toLowerCase();return Z.INTEGER_WORD_DICTIONARY[e]!==void 0?Z.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}Z.parseNumberPattern=pm;Z.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function $E(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}Z.parseOrdinalNumberPattern=$E;Z.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function jE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}Z.parseYear=jE;var hm=`(${Z.NUMBER_PATTERN})\\s{0,5}(${nl.matchAnyPattern(Z.TIME_UNIT_DICTIONARY)})\\s{0,5}`,fm=new RegExp(hm,"i");Z.TIME_UNITS_PATTERN=nl.repeatedTimeunitPattern("",hm);function BE(r){let e={},t=r,n=fm.exec(t);for(;n;)GE(e,n),t=t.substring(n[0].length),n=fm.exec(t);return e}Z.parseTimeUnits=BE;function GE(r,e){let t=pm(e[1]),n=Z.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var ym=p(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var mm=Er(),HE=te(),zE=R(),KE=Lr(),VE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${HE.matchAnyPattern(mm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),ZE=1,XE=2,il=class extends zE.AbstractParserWithWordBoundaryChecking{innerPattern(){return VE}innerExtract(e,t){let n=t[ZE].toLowerCase(),i=mm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[XE];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=KE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};sl.default=il});var bm=p(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var mi=we(),QE=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),JE=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),e0=2,gm=3,_m=4,Tm=5,Tn=class{pattern(e){return QE}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Tn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=JE.exec(i);return s&&(n.end=Tn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[e0]),t[gm]!=null&&(i=parseInt(t[gm])),i>=60||n>24)return null;if(n>=12&&(s=mi.Meridiem.PM),t[Tm]!=null){if(n>12)return null;let a=t[Tm][0].toLowerCase();a=="a"&&(s=mi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=mi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",mi.Meridiem.AM):e.imply("meridiem",mi.Meridiem.PM),t[_m]!=null){let a=parseInt(t[_m]);if(a>=60)return null;e.assign("second",a)}return e}};al.default=Tn});var Dm=p(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var t0=Ie(),Rm=Er(),Mm=Er(),Hs=Er(),r0=te(),n0=R(),i0=new RegExp(`(?:on\\s*?)?(${Hs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Hs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${r0.matchAnyPattern(Rm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Mm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),vm=1,Em=2,s0=3,wm=4,ol=class extends n0.AbstractParserWithWordBoundaryChecking{innerPattern(){return i0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Rm.MONTH_DICTIONARY[t[s0].toLowerCase()],s=Hs.parseOrdinalNumberPattern(t[vm]);if(s>31)return t.index=t.index+t[vm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[wm]){let a=Mm.parseYear(t[wm]);n.start.assign("year",a)}else{let a=t0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Em]){let a=Hs.parseOrdinalNumberPattern(t[Em]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ul.default=ol});var Pm=p(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var Om=Er(),a0=pe(),o0=R(),u0=ct(),ll=class extends o0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Om.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Om.parseTimeUnits(t[1]),i=u0.reverseTimeUnits(n);return a0.ParsingComponents.createRelativeFromReference(e.reference,i)}};cl.default=ll});var km=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Am=Er(),l0=pe(),c0=R(),dl=class extends c0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Am.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Am.parseTimeUnits(t[1]);return l0.ParsingComponents.createRelativeFromReference(e.reference,n)}};fl.default=dl});var Nm=p(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var zs=Er(),d0=pe(),f0=R(),p0=ct(),h0=te(),pl=class extends f0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${zs.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${h0.matchAnyPattern(zs.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?zs.parseNumberPattern(t[1]):1,i=zs.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=p0.reverseTimeUnits(s)),d0.ParsingComponents.createRelativeFromReference(e.reference,s)}};hl.default=pl});var xm=p(Oe=>{"use strict";var dt=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var m0=Jt(),Cm=Et(),y0=dt(om()),g0=dt(um()),_0=dt(Yr()),T0=dt(lm()),b0=dt(cm()),v0=dt(dm()),E0=dt(ym()),w0=dt(bm()),R0=dt(Dm()),M0=dt(Pm()),D0=dt(km()),O0=dt(Nm());Oe.casual=new Cm.Chrono(Sm());Oe.strict=new Cm.Chrono(ml(!0));function P0(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=P0;function A0(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=A0;function Sm(r=!0){let e=ml(!1,r);return e.parsers.unshift(new y0.default),e.parsers.unshift(new g0.default),e.parsers.unshift(new O0.default),e}Oe.createCasualConfiguration=Sm;function ml(r=!0,e=!0){return m0.includeCommonConfiguration({parsers:[new _0.default(e),new R0.default,new T0.default,new w0.default,new M0.default,new D0.default,new E0.default],refiners:[new b0.default,new v0.default]},r)}Oe.createConfiguration=ml});var Im=p(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.toHankaku=void 0;function k0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,N0)}Ks.toHankaku=k0;function N0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Um=p(yi=>{"use strict";var C0=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var yl=Im(),S0=Ie(),x0=C0(V()),I0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Fm=1,F0=2,gl=3,U0=4,q0=5,W0=6,_l=class{pattern(){return I0}extract(e,t){let n=parseInt(yl.toHankaku(t[q0])),i=parseInt(yl.toHankaku(t[W0])),s=e.createParsingComponents({day:i,month:n});if(t[Fm]&&t[Fm].match("\u540C|\u4ECA|\u672C")){let a=x0.default(e.refDate);s.assign("year",a.year())}if(t[F0]){let a=t[U0],o=a=="\u5143"?1:parseInt(yl.toHankaku(a));t[gl]=="\u4EE4\u548C"?o+=2018:t[gl]=="\u5E73\u6210"?o+=1988:t[gl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=S0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};yi.default=_l});var qm=p(gi=>{"use strict";var L0=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var Y0=L0(Wt()),Tl=class extends Y0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};gi.default=Tl});var Lm=p(Dt=>{"use strict";var $0=Dt&&Dt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),j0=Dt&&Dt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),B0=Dt&&Dt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&$0(e,r,t);return j0(e,r),e},G0=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0});var H0=G0(V()),Wm=we(),bl=B0(tr()),z0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,vl=class{pattern(){return z0}extract(e,t){let n=t[0],i=H0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return bl.yesterday(e.reference);case"\u660E\u65E5":return bl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return bl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Wm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Wm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Dt.default=vl});var jm=p(Pe=>{"use strict";var El=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var K0=El(Um()),V0=El(qm()),Z0=El(Lm()),Ym=Et();Pe.casual=new Ym.Chrono($m());Pe.strict=new Ym.Chrono(wl());function X0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=X0;function Q0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=Q0;function $m(){let r=wl();return r.parsers.unshift(new Z0.default),r}Pe.createCasualConfiguration=$m;function wl(){return{parsers:[new K0.default],refiners:[new V0.default]}}Pe.createConfiguration=wl});var Vs=p(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.parseYear=Yt.YEAR_PATTERN=Yt.MONTH_DICTIONARY=Yt.WEEKDAY_DICTIONARY=void 0;Yt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};Yt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};Yt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function J0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}Yt.parseYear=J0});var Gm=p(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Bm=Vs(),ew=te(),tw=R(),rw=Lr(),nw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${ew.matchAnyPattern(Bm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),iw=1,sw=2,aw=3,Rl=class extends tw.AbstractParserWithWordBoundaryChecking{innerPattern(){return nw}innerExtract(e,t){let n=t[sw].toLowerCase(),i=Bm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[iw],a=t[aw],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=rw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ml.default=Rl});var Hm=p(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var ow=qr(),Dl=class extends ow.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Ol.default=Dl});var zm=p(_i=>{"use strict";var uw=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var lw=uw(Qt()),Pl=class extends lw.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};_i.default=Pl});var Km=p(Ti=>{"use strict";var cw=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var dw=cw(Wt()),Al=class extends dw.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Ti.default=Al});var ey=p(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var fw=Ie(),Qm=Vs(),Jm=Vs(),pw=te(),hw=R(),mw=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${pw.matchAnyPattern(Qm.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Jm.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Vm=1,Zm=2,yw=3,Xm=4,kl=class extends hw.AbstractParserWithWordBoundaryChecking{innerPattern(){return mw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Qm.MONTH_DICTIONARY[t[yw].toLowerCase()],s=parseInt(t[Vm]);if(s>31)return t.index=t.index+t[Vm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Xm]){let a=Jm.parseYear(t[Xm]);n.start.assign("year",a)}else{let a=fw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Zm]){let a=parseInt(t[Zm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Nl.default=kl});var ty=p(rr=>{"use strict";var gw=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_w=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Tw=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gw(e,r,t);return _w(e,r),e};Object.defineProperty(rr,"__esModule",{value:!0});var bw=R(),Zs=Tw(tr()),Cl=class extends bw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Zs.now(e.reference);case"hoje":return Zs.today(e.reference);case"amanha":case"amanh\xE3":return Zs.tomorrow(e.reference);case"ontem":return Zs.yesterday(e.reference)}return i}};rr.default=Cl});var ry=p(bi=>{"use strict";var vw=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var Xs=we(),Ew=R(),ww=lt(),Rw=vw(V()),Sl=class extends Ew.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=Rw.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Xs.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Xs.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Xs.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":ww.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Xs.Meridiem.AM),i.imply("hour",12);break}return i}};bi.default=Sl});var sy=p(Ae=>{"use strict";var wr=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var Mw=Jt(),ny=Et(),Dw=wr(Yr()),Ow=wr(Gm()),Pw=wr(Hm()),Aw=wr(zm()),kw=wr(Km()),Nw=wr(ey()),Cw=wr(ty()),Sw=wr(ry());Ae.casual=new ny.Chrono(iy());Ae.strict=new ny.Chrono(xl(!0));function xw(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=xw;function Iw(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=Iw;function iy(r=!0){let e=xl(!1,r);return e.parsers.push(new Cw.default),e.parsers.push(new Sw.default),e}Ae.createCasualConfiguration=iy;function xl(r=!0,e=!0){return Mw.includeCommonConfiguration({parsers:[new Dw.default(e),new Ow.default,new Pw.default,new Nw.default],refiners:[new Aw.default,new kw.default]},r)}Ae.createConfiguration=xl});var ay=p(vi=>{"use strict";var Fw=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var Uw=Fw(Wt()),Il=class extends Uw.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};vi.default=Il});var oy=p(Ei=>{"use strict";var qw=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var Ww=qw(Qt()),Fl=class extends Ww.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};Ei.default=Fl});var uy=p(nr=>{"use strict";var Lw=nr&&nr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Yw=nr&&nr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),$w=nr&&nr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Lw(e,r,t);return Yw(e,r),e};Object.defineProperty(nr,"__esModule",{value:!0});var jw=R(),Qs=$w(tr()),Ul=class extends jw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Qs.now(e.reference);case"vandaag":return Qs.today(e.reference);case"morgen":case"morgend":return Qs.tomorrow(e.reference);case"gisteren":return Qs.yesterday(e.reference)}return i}};nr.default=Ul});var ly=p(wi=>{"use strict";var Bw=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var Js=we(),Gw=R(),Hw=Bw(V()),zw=lt(),Kw=1,Vw=2,ql=class extends Gw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=Hw.default(e.refDate),i=e.createParsingComponents();switch(t[Kw]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Vw].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Js.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Js.Meridiem.PM),i.imply("hour",20);break;case"middernacht":zw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Js.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Js.Meridiem.AM),i.imply("hour",12);break}return i}};wi.default=ql});var nt=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var ea=te(),Zw=Ie();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${ea.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function dy(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=dy;j.ORDINAL_NUMBER_PATTERN=`(?:${ea.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function Xw(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=Xw;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function Qw(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return Zw.findMostLikelyADYear(e)}j.parseYear=Qw;var fy=`(${j.NUMBER_PATTERN})\\s{0,5}(${ea.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,cy=new RegExp(fy,"i");j.TIME_UNITS_PATTERN=ea.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",fy);function Jw(r){let e={},t=r,n=cy.exec(t);for(;n;)eR(e,n),t=t.substring(n[0].length),n=cy.exec(t);return e}j.parseTimeUnits=Jw;function eR(r,e){let t=dy(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var hy=p(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var py=nt(),tR=pe(),rR=R(),Wl=class extends rR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+py.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=py.parseTimeUnits(t[1]);return tR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ll.default=Wl});var yy=p($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var my=nt(),nR=te(),iR=R(),sR=Lr(),aR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${nR.matchAnyPattern(my.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),oR=1,uR=2,lR=3,Yl=class extends iR.AbstractParserWithWordBoundaryChecking{innerPattern(){return aR}innerExtract(e,t){let n=t[uR].toLowerCase(),i=my.WEEKDAY_DICTIONARY[n],s=t[oR],a=t[lR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=sR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$l.default=Yl});var Ey=p(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var cR=Ie(),by=nt(),ta=nt(),vy=nt(),dR=te(),fR=R(),pR=new RegExp(`(?:on\\s*?)?(${ta.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${ta.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+dR.matchAnyPattern(by.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${vy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),hR=3,gy=1,_y=2,Ty=4,jl=class extends fR.AbstractParserWithWordBoundaryChecking{innerPattern(){return pR}innerExtract(e,t){let n=by.MONTH_DICTIONARY[t[hR].toLowerCase()],i=ta.parseOrdinalNumberPattern(t[gy]);if(i>31)return t.index=t.index+t[gy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Ty]){let u=vy.parseYear(t[Ty]);s.assign("year",u)}else{let u=cR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[_y])return s;let a=ta.parseOrdinalNumberPattern(t[_y]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Bl.default=jl});var Dy=p(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Ry=nt(),mR=Ie(),yR=te(),My=nt(),gR=R(),_R=new RegExp(`(${yR.matchAnyPattern(Ry.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${My.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),TR=1,wy=2,Gl=class extends gR.AbstractParserWithWordBoundaryChecking{innerPattern(){return _R}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[TR],s=Ry.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[wy]){let a=My.parseYear(t[wy]);n.assign("year",a)}else{let a=mR.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Hl.default=Gl});var Oy=p(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var bR=R(),vR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),ER=1,wR=2,zl=class extends bR.AbstractParserWithWordBoundaryChecking{innerPattern(){return vR}innerExtract(e,t){let n=parseInt(t[wR]),i=parseInt(t[ER]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Kl.default=zl});var Py=p(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var RR=qr(),Vl=class extends RR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Zl.default=Vl});var Ny=p(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var ky=nt(),MR=te(),DR=R(),OR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${MR.matchAnyPattern(ky.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),PR=1,AR=2,Ay=3,kR=4,Xl=class extends DR.AbstractParserWithWordBoundaryChecking{innerPattern(){return OR}innerExtract(e,t){let n=t[Ay]?parseInt(t[Ay]):ky.MONTH_DICTIONARY[t[AR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[PR]);return{day:parseInt(t[kR]),month:n,year:i}}};Ql.default=Xl});var Cy=p(Ri=>{"use strict";var NR=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var CR=R(),ra=we(),Jl=lt(),SR=NR(V()),xR=1,IR=2,ec=class extends CR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[xR].toLowerCase(),i=t[IR].toLowerCase(),s=e.createParsingComponents(),a=SR.default(e.refDate);switch(n){case"gisteren":Jl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Jl.assignSimilarDate(s,a);break;case"morgen":Jl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",ra.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",ra.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",ra.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",ra.Meridiem.PM),s.imply("hour",20);break}return s}};Ri.default=ec});var xy=p(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var Sy=nt(),FR=pe(),UR=R(),qR=ct(),WR=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Sy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),tc=class extends UR.AbstractParserWithWordBoundaryChecking{innerPattern(){return WR}innerExtract(e,t){let n=t[1].toLowerCase(),i=Sy.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=qR.reverseTimeUnits(i);break}return FR.ParsingComponents.createRelativeFromReference(e.reference,i)}};rc.default=tc});var Uy=p(Mi=>{"use strict";var LR=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var Fy=nt(),Iy=pe(),YR=LR(V()),$R=R(),jR=te(),BR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${jR.matchAnyPattern(Fy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),GR=1,HR=2,nc=class extends $R.AbstractParserWithWordBoundaryChecking{innerPattern(){return BR}innerExtract(e,t){let n=t[GR].toLowerCase(),i=t[HR].toLowerCase(),s=Fy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Iy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Iy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=YR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Mi.default=nc});var qy=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var sc=nt(),zR=pe(),KR=R(),VR=ct(),ZR=new RegExp("("+sc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),XR=new RegExp("("+sc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),ic=class extends KR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?XR:ZR}innerExtract(e,t){let n=sc.parseTimeUnits(t[1]),i=VR.reverseTimeUnits(n);return zR.ParsingComponents.createRelativeFromReference(e.reference,i)}};ac.default=ic});var Wy=p(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var uc=nt(),QR=pe(),JR=R(),eM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),tM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),rM=1,oc=class extends JR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?tM:eM}innerExtract(e,t){let n=uc.parseTimeUnits(t[rM]);return QR.ParsingComponents.createRelativeFromReference(e.reference,n)}};lc.default=oc});var jy=p(ke=>{"use strict";var Ue=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var nM=Jt(),Ly=Et(),iM=Ue(ay()),sM=Ue(oy()),aM=Ue(uy()),oM=Ue(ly()),uM=Ue(Yr()),lM=Ue(hy()),cM=Ue(yy()),dM=Ue(Ey()),Yy=Ue(Dy()),fM=Ue(Oy()),pM=Ue(Py()),hM=Ue(Ny()),mM=Ue(Cy()),yM=Ue(xy()),gM=Ue(Uy()),_M=Ue(qy()),TM=Ue(Wy());ke.casual=new Ly.Chrono($y());ke.strict=new Ly.Chrono(cc(!0));function bM(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=bM;function vM(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=vM;function $y(r=!0){let e=cc(!1,r);return e.parsers.unshift(new aM.default),e.parsers.unshift(new oM.default),e.parsers.unshift(new mM.default),e.parsers.unshift(new Yy.default),e.parsers.unshift(new gM.default),e.parsers.unshift(new yM.default),e}ke.createCasualConfiguration=$y;function cc(r=!0,e=!0){return nM.includeCommonConfiguration({parsers:[new uM.default(e),new lM.default,new dM.default,new Yy.default,new cM.default,new hM.default,new fM.default,new pM.default(r),new _M.default(r),new TM.default(r)],refiners:[new sM.default,new iM.default]},r)}ke.createConfiguration=cc});var zy=p(Di=>{"use strict";var EM=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var wM=EM(V()),RM=R(),MM=1,By=2,DM=3,Gy=4,Hy=5,OM=6,dc=class extends RM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=wM.default(e.refDate),a=s;if(t[MM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[By]){let o=t[By],u=t[DM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Gy]){let u=t[Gy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Hy]){let o=t[Hy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[OM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Di.default=dc});var bn=p(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.zhStringToYear=Ke.zhStringToNumber=Ke.WEEKDAY_OFFSET=Ke.NUMBER=void 0;Ke.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Ke.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function PM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ke.NUMBER[n]:e*Ke.NUMBER[n]:e+=Ke.NUMBER[n]}return e}Ke.zhStringToNumber=PM;function AM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ke.NUMBER[n]}return parseInt(e)}Ke.zhStringToYear=AM});var Vy=p(Oi=>{"use strict";var kM=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var NM=kM(V()),CM=R(),Br=bn(),fc=1,Ky=2,pc=3,hc=class extends CM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Br.NUMBER).join("")+"]{4}|["+Object.keys(Br.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=NM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Ky]);if(isNaN(s)&&(s=Br.zhStringToNumber(t[Ky])),i.start.assign("month",s),t[pc]){let a=parseInt(t[pc]);isNaN(a)&&(a=Br.zhStringToNumber(t[pc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[fc]){let a=parseInt(t[fc]);isNaN(a)&&(a=Br.zhStringToYear(t[fc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Oi.default=hc});var Xy=p(Pi=>{"use strict";var SM=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var xM=SM(V()),IM=R(),Zy=bn(),FM=new RegExp("(\\d+|["+Object.keys(Zy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),mc=1,UM=2,yc=class extends IM.AbstractParserWithWordBoundaryChecking{innerPattern(){return FM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[mc]);if(isNaN(i)&&(i=Zy.zhStringToNumber(t[mc])),isNaN(i)){let u=t[mc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=xM.default(e.refDate),o=t[UM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Pi.default=yc});var Jy=p(Ai=>{"use strict";var qM=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var WM=qM(V()),LM=R(),Qy=bn(),YM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Qy.WEEKDAY_OFFSET).join("|")+")"),gc=class extends LM.AbstractParserWithWordBoundaryChecking{innerPattern(){return YM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Qy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=WM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ai.default=gc});var eg=p(ki=>{"use strict";var $M=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var jM=$M(V()),BM=R(),pt=bn(),GM=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(pt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),HM=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(pt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(pt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),na=1,ia=2,sa=3,aa=4,oa=5,ua=6,ft=7,vn=8,la=9,_c=class extends BM.AbstractParserWithWordBoundaryChecking{innerPattern(){return GM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=jM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[na]){var a=t[na];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[aa]){var o=t[aa];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[vn]){var d=parseInt(t[vn]);if(isNaN(d)&&(d=pt.zhStringToNumber(t[vn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ua]),isNaN(u)&&(u=pt.zhStringToNumber(t[ua])),t[ft]?t[ft]=="\u534A"?l=30:t[ft]=="\u6B63"||t[ft]=="\u6574"?l=0:(l=parseInt(t[ft]),isNaN(l)&&(l=pt.zhStringToNumber(t[ft]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[la]){if(u>12)return null;var f=t[la][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[ia]){var h=t[ia],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[sa]){var m=t[sa],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[oa]){var P=t[oa],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=HM.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let k=s.clone();if(i.end=e.createParsingComponents(),t[na]){var a=t[na];a=="\u660E"||a=="\u807D"?n.hour()>1&&k.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?k.add(-1,"day"):a=="\u524D"?k.add(-2,"day"):a=="\u5927\u524D"?k.add(-3,"day"):a=="\u5F8C"?k.add(2,"day"):a=="\u5927\u5F8C"&&k.add(3,"day"),i.end.assign("day",k.date()),i.end.assign("month",k.month()+1),i.end.assign("year",k.year())}else if(t[aa]){var o=t[aa];o=="\u660E"||o=="\u807D"?k.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?k.add(-1,"day"):o=="\u524D"?k.add(-2,"day"):o=="\u5927\u524D"?k.add(-3,"day"):o=="\u5F8C"?k.add(2,"day"):o=="\u5927\u5F8C"&&k.add(3,"day"),i.end.assign("day",k.date()),i.end.assign("month",k.month()+1),i.end.assign("year",k.year())}else i.end.imply("day",k.date()),i.end.imply("month",k.month()+1),i.end.imply("year",k.year());if(u=0,l=0,c=-1,t[vn]){var d=parseInt(t[vn]);if(isNaN(d)&&(d=pt.zhStringToNumber(t[vn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ua]),isNaN(u)&&(u=pt.zhStringToNumber(t[ua])),t[ft]?t[ft]=="\u534A"?l=30:t[ft]=="\u6B63"||t[ft]=="\u6574"?l=0:(l=parseInt(t[ft]),isNaN(l)&&(l=pt.zhStringToNumber(t[ft]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[la]){if(u>12)return null;var f=t[la][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ia]){var h=t[ia],y=h[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[sa]){var m=t[sa],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[oa]){var P=t[oa],w=P[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};ki.default=_c});var rg=p(Ni=>{"use strict";var zM=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var KM=zM(V()),VM=R(),tg=bn(),ZM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(tg.WEEKDAY_OFFSET).join("|")+")"),Tc=class extends VM.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=tg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=KM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ni.default=Tc});var ng=p(Ci=>{"use strict";var XM=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var QM=XM(Wt()),bc=class extends QM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Ci.default=bc});var ig=p(Si=>{"use strict";var JM=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var eD=JM(Qt()),vc=class extends eD.default{patternBetween(){return/^\s*$/i}};Si.default=vc});var sg=p(Te=>{"use strict";var ir=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hant=void 0;var Ec=Et(),tD=ir(Ws()),rD=Jt(),nD=ir(zy()),iD=ir(Vy()),sD=ir(Xy()),aD=ir(Jy()),oD=ir(eg()),uD=ir(rg()),lD=ir(ng()),cD=ir(ig());Te.hant=new Ec.Chrono(wc());Te.casual=new Ec.Chrono(wc());Te.strict=new Ec.Chrono(Rc());function dD(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=dD;function fD(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=fD;function wc(){let r=Rc();return r.parsers.unshift(new nD.default),r}Te.createCasualConfiguration=wc;function Rc(){let r=rD.includeCommonConfiguration({parsers:[new iD.default,new aD.default,new uD.default,new oD.default,new sD.default],refiners:[new lD.default,new cD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof tD.default)),r}Te.createConfiguration=Rc});var lg=p(xi=>{"use strict";var pD=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var hD=pD(V()),mD=R(),yD=1,ag=2,gD=3,og=4,ug=5,_D=6,Mc=class extends mD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=hD.default(e.refDate),a=s;if(t[yD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[ag]){let o=t[ag],u=t[gD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[og]){let u=t[og][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ug]){let o=t[ug];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[_D];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};xi.default=Mc});var En=p(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.zhStringToYear=Ve.zhStringToNumber=Ve.WEEKDAY_OFFSET=Ve.NUMBER=void 0;Ve.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ve.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function TD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ve.NUMBER[n]:e*Ve.NUMBER[n]:e+=Ve.NUMBER[n]}return e}Ve.zhStringToNumber=TD;function bD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ve.NUMBER[n]}return parseInt(e)}Ve.zhStringToYear=bD});var dg=p(Ii=>{"use strict";var vD=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var ED=vD(V()),wD=R(),Gr=En(),Dc=1,cg=2,Oc=3,Pc=class extends wD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Gr.NUMBER).join("")+"]{4}|["+Object.keys(Gr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=ED.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[cg]);if(isNaN(s)&&(s=Gr.zhStringToNumber(t[cg])),i.start.assign("month",s),t[Oc]){let a=parseInt(t[Oc]);isNaN(a)&&(a=Gr.zhStringToNumber(t[Oc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Dc]){let a=parseInt(t[Dc]);isNaN(a)&&(a=Gr.zhStringToYear(t[Dc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ii.default=Pc});var pg=p(Fi=>{"use strict";var RD=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var MD=RD(V()),DD=R(),fg=En(),OD=new RegExp("(\\d+|["+Object.keys(fg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Ac=1,PD=2,kc=class extends DD.AbstractParserWithWordBoundaryChecking{innerPattern(){return OD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Ac]);if(isNaN(i)&&(i=fg.zhStringToNumber(t[Ac])),isNaN(i)){let u=t[Ac];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=MD.default(e.refDate),o=t[PD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Fi.default=kc});var mg=p(Ui=>{"use strict";var AD=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var kD=AD(V()),ND=R(),hg=En(),CD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(hg.WEEKDAY_OFFSET).join("|")+")"),Nc=class extends ND.AbstractParserWithWordBoundaryChecking{innerPattern(){return CD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=hg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=kD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ui.default=Nc});var yg=p(qi=>{"use strict";var SD=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var xD=SD(V()),ID=R(),mt=En(),FD=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(mt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(mt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(mt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),UD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(mt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(mt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(mt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ca=1,da=2,fa=3,pa=4,ha=5,ma=6,ht=7,wn=8,ya=9,Cc=class extends ID.AbstractParserWithWordBoundaryChecking{innerPattern(){return FD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=xD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ca]){let c=t[ca];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[pa]){let c=t[pa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[wn]){let c=parseInt(t[wn]);if(isNaN(c)&&(c=mt.zhStringToNumber(t[wn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ma]),isNaN(a)&&(a=mt.zhStringToNumber(t[ma])),t[ht]?t[ht]=="\u534A"?o=30:t[ht]=="\u6B63"||t[ht]=="\u6574"?o=0:(o=parseInt(t[ht]),isNaN(o)&&(o=mt.zhStringToNumber(t[ht]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ya]){if(a>12)return null;let c=t[ya][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[da]){let d=t[da][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[fa]){let d=t[fa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ha]){let d=t[ha][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=UD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[ca]){let c=t[ca];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[pa]){let c=t[pa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[wn]){let c=parseInt(t[wn]);if(isNaN(c)&&(c=mt.zhStringToNumber(t[wn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ma]),isNaN(a)&&(a=mt.zhStringToNumber(t[ma])),t[ht]?t[ht]=="\u534A"?o=30:t[ht]=="\u6B63"||t[ht]=="\u6574"?o=0:(o=parseInt(t[ht]),isNaN(o)&&(o=mt.zhStringToNumber(t[ht]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ya]){if(a>12)return null;let c=t[ya][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[da]){let d=t[da][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[fa]){let d=t[fa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ha]){let d=t[ha][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};qi.default=Cc});var _g=p(Wi=>{"use strict";var qD=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var WD=qD(V()),LD=R(),gg=En(),YD=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(gg.WEEKDAY_OFFSET).join("|")+")"),Sc=class extends LD.AbstractParserWithWordBoundaryChecking{innerPattern(){return YD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=gg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=WD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Wi.default=Sc});var Tg=p(Li=>{"use strict";var $D=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var jD=$D(Wt()),xc=class extends jD.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Li.default=xc});var bg=p(Yi=>{"use strict";var BD=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var GD=BD(Qt()),Ic=class extends GD.default{patternBetween(){return/^\s*$/i}};Yi.default=Ic});var vg=p(be=>{"use strict";var sr=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hans=void 0;var Fc=Et(),HD=sr(Ws()),zD=Jt(),KD=sr(lg()),VD=sr(dg()),ZD=sr(pg()),XD=sr(mg()),QD=sr(yg()),JD=sr(_g()),eO=sr(Tg()),tO=sr(bg());be.hans=new Fc.Chrono(Uc());be.casual=new Fc.Chrono(Uc());be.strict=new Fc.Chrono(qc());function rO(r,e,t){return be.casual.parse(r,e,t)}be.parse=rO;function nO(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=nO;function Uc(){let r=qc();return r.parsers.unshift(new KD.default),r}be.createCasualConfiguration=Uc;function qc(){let r=zD.includeCommonConfiguration({parsers:[new VD.default,new XD.default,new JD.default,new QD.default,new ZD.default],refiners:[new eO.default,new tO.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof HD.default)),r}be.createConfiguration=qc});var wg=p(it=>{"use strict";var Eg=it&&it.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),iO=it&&it.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),sO=it&&it.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Eg(e,r,t)},aO=it&&it.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Eg(e,r,t);return iO(e,r),e};Object.defineProperty(it,"__esModule",{value:!0});it.hans=void 0;sO(sg(),it);it.hans=aO(vg())});var Ze=p(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var ga=te(),oO=Ie();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${ga.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Mg(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=Mg;U.ORDINAL_NUMBER_PATTERN=`(?:${ga.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function uO(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=uO;var Wc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Wc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Wc}|[5-9][0-9]${Wc})`;function lO(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return oO.findMostLikelyADYear(e)}U.parseYear=lO;var Dg=`(${U.NUMBER_PATTERN})\\s{0,3}(${ga.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,Rg=new RegExp(Dg,"i");U.TIME_UNITS_PATTERN=ga.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Dg);function cO(r){let e={},t=r,n=Rg.exec(t);for(;n;)dO(e,n),t=t.substring(n[0].length).trim(),n=Rg.exec(t);return e}U.parseTimeUnits=cO;function dO(r,e){let t=Mg(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Pg=p(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var $i=Ze(),fO=pe(),pO=R(),Og=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${$i.TIME_UNITS_PATTERN})${$i.REGEX_PARTS.rightBoundary}`,hO=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Og}`,$i.REGEX_PARTS.flags),mO=new RegExp(Og,"i"),Lc=class extends pO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return $i.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?mO:hO}innerExtract(e,t){let n=$i.parseTimeUnits(t[1]);return fO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Yc.default=Lc});var Sg=p(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var yO=Ie(),ji=Ze(),Cg=Ze(),_a=Ze(),gO=te(),_O=R(),TO=new RegExp(`(?:\u0441)?\\s*(${_a.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${_a.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${gO.matchAnyPattern(ji.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Cg.YEAR_PATTERN}(?![^\\s]\\d)))?${ji.REGEX_PARTS.rightBoundary}`,ji.REGEX_PARTS.flags),Ag=1,kg=2,bO=3,Ng=4,$c=class extends _O.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ji.REGEX_PARTS.leftBoundary}innerPattern(){return TO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ji.MONTH_DICTIONARY[t[bO].toLowerCase()],s=_a.parseOrdinalNumberPattern(t[Ag]);if(s>31)return t.index=t.index+t[Ag].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Ng]){let a=Cg.parseYear(t[Ng]);n.start.assign("year",a)}else{let a=yO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[kg]){let a=_a.parseOrdinalNumberPattern(t[kg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};jc.default=$c});var Fg=p(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var Bi=Ze(),vO=Ie(),EO=te(),Ig=Ze(),wO=R(),RO=new RegExp(`((?:\u0432)\\s*)?(${EO.matchAnyPattern(Bi.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Ig.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Bi.REGEX_PARTS.flags),MO=2,xg=3,Bc=class extends wO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Bi.REGEX_PARTS.leftBoundary}innerPattern(){return RO}innerExtract(e,t){let n=t[MO].toLowerCase();if(t[0].length<=3&&!Bi.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Bi.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[xg]){let a=Ig.parseYear(t[xg]);i.start.assign("year",a)}else{let a=vO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Gc.default=Bc});var qg=p(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var Ta=we(),DO=qr(),Ug=Ze(),Hc=class extends DO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Ug.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Ug.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ta.Meridiem.PM)):i<6&&n.assign("meridiem",Ta.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Ta.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Ta.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};zc.default=Hc});var Wg=p(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var ba=Ze(),OO=pe(),PO=R(),AO=ct(),kO=new RegExp(`(${ba.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,ba.REGEX_PARTS.flags),Kc=class extends PO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ba.REGEX_PARTS.leftBoundary}innerPattern(){return kO}innerExtract(e,t){let n=ba.parseTimeUnits(t[1]),i=AO.reverseTimeUnits(n);return OO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vc.default=Kc});var Lg=p(Gi=>{"use strict";var NO=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var CO=NO(Wt()),Zc=class extends CO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Gi.default=Zc});var Yg=p(Hi=>{"use strict";var SO=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var xO=SO(Qt()),Xc=class extends xO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Hi.default=Xc});var $g=p(ar=>{"use strict";var IO=ar&&ar.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),FO=ar&&ar.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),UO=ar&&ar.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&IO(e,r,t);return FO(e,r),e};Object.defineProperty(ar,"__esModule",{value:!0});var qO=R(),zi=UO(tr()),Qc=Ze(),WO=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Qc.REGEX_PARTS.rightBoundary}`,Qc.REGEX_PARTS.flags),Jc=class extends qO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qc.REGEX_PARTS.leftBoundary}innerPattern(e){return WO}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return zi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return zi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return zi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return zi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return zi.theDayBefore(e.reference,2)}return i}};ar.default=Jc});var jg=p(Ot=>{"use strict";var LO=Ot&&Ot.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),YO=Ot&&Ot.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),$O=Ot&&Ot.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&LO(e,r,t);return YO(e,r),e},jO=Ot&&Ot.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ot,"__esModule",{value:!0});var BO=R(),Hr=$O(tr()),GO=lt(),HO=jO(V()),ed=Ze(),zO=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${ed.REGEX_PARTS.rightBoundary}`,ed.REGEX_PARTS.flags),td=class extends BO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ed.REGEX_PARTS.leftBoundary}innerPattern(){return zO}innerExtract(e,t){let n=HO.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Hr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Hr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Hr.morning(e.reference);if(i.match(/в\s*полдень/))return Hr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Hr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Hr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),GO.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Hr.midnight(e.reference):s}};Ot.default=td});var Bg=p(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var Ki=Ze(),KO=te(),VO=R(),ZO=Lr(),XO=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${KO.matchAnyPattern(Ki.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Ki.REGEX_PARTS.rightBoundary}`,Ki.REGEX_PARTS.flags),QO=1,JO=2,eP=3,rd=class extends VO.AbstractParserWithWordBoundaryChecking{innerPattern(){return XO}patternLeftBoundary(){return Ki.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[JO].toLowerCase(),i=Ki.WEEKDAY_DICTIONARY[n],s=t[QO],a=t[eP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=ZO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};nd.default=rd});var Hg=p(Zi=>{"use strict";var tP=Zi&&Zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zi,"__esModule",{value:!0});var Vi=Ze(),Gg=pe(),rP=tP(V()),nP=R(),iP=te(),sP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${iP.matchAnyPattern(Vi.TIME_UNIT_DICTIONARY)})(?=\\s*)${Vi.REGEX_PARTS.rightBoundary}`,Vi.REGEX_PARTS.flags),aP=1,oP=2,id=class extends nP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Vi.REGEX_PARTS.leftBoundary}innerPattern(){return sP}innerExtract(e,t){let n=t[aP].toLowerCase(),i=t[oP].toLowerCase(),s=Vi.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Gg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Gg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=rP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Zi.default=id});var zg=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Xi=Ze(),uP=pe(),lP=R(),cP=ct(),dP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Xi.TIME_UNITS_PATTERN})${Xi.REGEX_PARTS.rightBoundary}`,Xi.REGEX_PARTS.flags),sd=class extends lP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Xi.REGEX_PARTS.leftBoundary}innerPattern(){return dP}innerExtract(e,t){let n=t[1].toLowerCase(),i=Xi.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=cP.reverseTimeUnits(i);break}return uP.ParsingComponents.createRelativeFromReference(e.reference,i)}};ad.default=sd});var Zg=p(Ne=>{"use strict";var st=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var fP=st(Pg()),pP=st(Sg()),hP=st(Fg()),mP=st(qg()),yP=st(Wg()),gP=st(Lg()),_P=st(Yg()),TP=Jt(),bP=st($g()),vP=st(jg()),EP=st(Bg()),wP=st(Hg()),Kg=Et(),RP=st(Yr()),MP=st(zg());Ne.casual=new Kg.Chrono(Vg());Ne.strict=new Kg.Chrono(od(!0));function DP(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=DP;function OP(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=OP;function Vg(){let r=od(!1);return r.parsers.unshift(new bP.default),r.parsers.unshift(new vP.default),r.parsers.unshift(new hP.default),r.parsers.unshift(new wP.default),r.parsers.unshift(new MP.default),r}Ne.createCasualConfiguration=Vg;function od(r=!0){return TP.includeCommonConfiguration({parsers:[new RP.default(!0),new fP.default,new pP.default,new EP.default,new mP.default(r),new yP.default],refiners:[new _P.default,new gP.default]},r)}Ne.createConfiguration=od});var we=p(Y=>{"use strict";var PP=Y&&Y.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),AP=Y&&Y.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Rr=Y&&Y.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&PP(e,r,t);return AP(e,r),e};Object.defineProperty(Y,"__esModule",{value:!0});Y.parseDate=Y.parse=Y.casual=Y.strict=Y.ru=Y.zh=Y.nl=Y.pt=Y.ja=Y.fr=Y.de=Y.Meridiem=Y.Chrono=Y.en=void 0;var ud=Rr(Mu());Y.en=ud;var kP=Et();Object.defineProperty(Y,"Chrono",{enumerable:!0,get:function(){return kP.Chrono}});var NP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(NP=Y.Meridiem||(Y.Meridiem={}));var CP=Rr(sm());Y.de=CP;var SP=Rr(xm());Y.fr=SP;var xP=Rr(jm());Y.ja=xP;var IP=Rr(sy());Y.pt=IP;var FP=Rr(jy());Y.nl=FP;var UP=Rr(wg());Y.zh=UP;var qP=Rr(Zg());Y.ru=qP;Y.strict=ud.strict;Y.casual=ud.casual;function WP(r,e,t){return Y.casual.parse(r,e,t)}Y.parse=WP;function LP(r,e,t){return Y.casual.parseDate(r,e,t)}Y.parseDate=LP});var jt=p(Or=>{"use strict";Or.__esModule=!0;var VP;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(VP=Or.Operators||(Or.Operators={}));var ZP;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(ZP=Or.StructuralCharacters||(Or.StructuralCharacters={}));var XP;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(XP=Or.Tokens||(Or.Tokens={}))});var vd=p(Sa=>{"use strict";Sa.__esModule=!0;var he=jt();Sa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};Sa.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Ed=p(lr=>{"use strict";lr.__esModule=!0;var An=jt();lr.STRUCTURAL_CHARACTERS={"(":An.StructuralCharacters.OPEN_PARENTHESIS,")":An.StructuralCharacters.CLOSE_PARENTHESIS};lr.OPERATORS={AND:An.Operators.AND,OR:An.Operators.OR,XOR:An.Operators.XOR,NOT:An.Operators.NOT};lr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));lr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);lr.COMMENT_DELIMITER=String.fromCodePoint(35);lr.EOL=String.fromCodePoint(10);lr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var l_=p(cr=>{"use strict";var wd=cr&&cr.__assign||function(){return wd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wd.apply(this,arguments)};cr.__esModule=!0;var u_=jt(),Kr=Ed();cr.createResult=function(r,e,t){return{token:wd({name:r},e!==null?{value:e}:{}),remainingString:t}};cr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Kr.EOL){e=t;break}}return cr.createResult(u_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};cr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Kr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Kr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Kr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Kr.SEPARATORS.has(s)&&!Kr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Kr.QUOTED_IDENTIFIER_DELIMITER+" character");return cr.createResult(u_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var c_=p(Rd=>{"use strict";Rd.__esModule=!0;var kn=jt(),at=Ed(),Nn=l_();Rd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!at.SEPARATORS.has(s)){var a=at.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===kn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!at.SEPARATORS.has(o)&&o!==kn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Nn.createResult(kn.Tokens.STRUCTURAL_CHARACTER,at.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===at.QUOTED_IDENTIFIER_DELIMITER)return Nn.getQuotedIdentifier(r.slice(i+1));if(s===at.COMMENT_DELIMITER)return Nn.getComment(r.slice(i+1));e=i}}else if(at.SEPARATORS.has(s)||at.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===at.QUOTED_IDENTIFIER_DELIMITER||s===at.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(at.OPERATORS[u]){if(n&&!at.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Nn.createResult(kn.Tokens.OPERATOR,at.OPERATORS[u],l)}else return Nn.createResult(kn.Tokens.IDENTIFIER,u,l)}return Nn.createResult(kn.Tokens.EOF,null,"")}});var d_=p(dr=>{"use strict";var QP=dr&&dr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};dr.__esModule=!0;var JP=c_(),Cn=jt(),xa=vd();dr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=JP.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Cn.Tokens.COMMENT)return dr.validateToken(s,t,n),s}}};dr.getValue=function(r,e){var t=r(xa.VALID_TOKENS.identifierOrNot),n=t.value===Cn.Operators.NOT;n&&(t=r(xa.VALID_TOKENS.identifierOnly));var i=t.name===Cn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?QP(i,[{name:Cn.Tokens.OPERATOR,value:Cn.Operators.NOT}]):i};dr.previousOperatorTakesPrecedent=function(r,e){return xa.OPERATOR_PRECEDENCE[r]<=xa.OPERATOR_PRECEDENCE[e]};dr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Cn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Dd=p(is=>{"use strict";var Sn=is&&is.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};is.__esModule=!0;var f_=jt(),p_=vd(),Ia=d_();is.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Ia.newTokenGenerator(r);return Md(e)};var Md=function(r,e){e===void 0&&(e=!1);for(var t=Sn(Ia.getValue(r,Md)),n=[];;){var i=e?p_.VALID_TOKENS.binaryOperatorOrClose:p_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===f_.Tokens.EOF||s.name===f_.Tokens.STRUCTURAL_CHARACTER)return Sn(t,Sn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Ia.previousOperatorTakesPrecedent(a.value,s.value))t=Sn(t,[a]),n=n.slice(0,-1);else break}n=Sn(n,[s]),t=Sn(t,Ia.getValue(r,Md))}}});var Od=p(fr=>{"use strict";fr.__esModule=!0;var h_=jt();fr.andUtil=function(r,e){return r&&e};fr.orUtil=function(r,e){return r||e};fr.xorUtil=function(r,e){return r!==e};fr.notUtil=function(r){return!r};fr.isIdentifier=function(r){var e=r.name,t=r.value;return e===h_.Tokens.IDENTIFIER&&typeof t=="string"};fr.isOperator=function(r){var e=r.name,t=r.value;return e===h_.Tokens.OPERATOR&&typeof t=="string"};fr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var m_=p(kd=>{"use strict";var ss;kd.__esModule=!0;var Pd=jt(),Ad=Od();kd.OPERATOR_MAP=(ss={},ss[Pd.Operators.AND]=Ad.andUtil,ss[Pd.Operators.OR]=Ad.orUtil,ss[Pd.Operators.XOR]=Ad.xorUtil,ss)});var g_=p(Zr=>{"use strict";var Nd=Zr&&Zr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Zr.__esModule=!0;var eA=Dd(),y_=jt(),tA=m_(),Vr=Od();Zr.getEvaluator=function(r){var e=eA.parse(r);return function(t){return Zr.evaluate(e,t)}};Zr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Vr.isIdentifier(i)||Vr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===y_.Tokens.IDENTIFIER)return Nd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===y_.Operators.NOT)return o===void 0&&Vr.throwInvalidExpression("missing identifier"),Nd(n.slice(0,-1),[Vr.notUtil(o)]);(o===void 0||a===void 0)&&Vr.throwInvalidExpression("missing identifier");var u=tA.OPERATOR_MAP[i.value];return u||Vr.throwInvalidExpression("unknown operator"),Nd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Vr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var T_=p(as=>{"use strict";as.__esModule=!0;var __=g_();as.getEvaluator=__.getEvaluator;as.evaluate=__.evaluate;var rA=Dd();as.parse=rA.parse});var lA={};N_(lA,{default:()=>Xa});module.exports=C_(lA);var w_=require("obsidian");var Ms=require("obsidian");var dA=new Error("timeout while waiting for mutex to become available"),fA=new Error("mutex already locked"),S_=new Error("request for lock canceled"),Jd=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},ro=class{constructor(e,t=S_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return Jd(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return Jd(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},x_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},ys=class{constructor(e){this._semaphore=new ro(1,e)}acquire(){return x_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var up=require("obsidian");var tf=require("obsidian");var ef=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var At=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return ef.forEach(t=>{e=[...e,new At(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return At.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of At.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var F_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,features:At.settingsFlags},Yn=$e({},F_),ie=()=>{for(let r in At.settingsFlags)Yn.features[r]===void 0&&(Yn.features[r]=At.settingsFlags[r]);return $e({},Yn)},kt=r=>(Yn=$e($e({},Yn),r),ie());var no,io,rf=({metadataCache:r,vault:e})=>{no=r,io=e},gs=t=>ne(void 0,[t],function*({originalTask:r,newTasks:e}){if(io===void 0||no===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),nf({originalTask:r,newTasks:e,vault:io,metadataCache:no,previousTries:0})}),nf=s=>ne(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{nf({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof tf.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ie(),h,y=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(y===r.sectionIndex){h=g;break}y++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});var tn=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1}};var _s=["MO","TU","WE","TH","FR","SA","SU"],ge=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(_s.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=_s[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ae=function(r){return r!=null},et=function(r){return typeof r=="number"},so=function(r){return typeof r=="string"&&_s.includes(r)},xe=Array.isArray,ot=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var B=function(r,e){var t=0,n=[];if(xe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},sf=function(r){return xe(r)?r:[r]};function kr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=B(t,e/t.length)),t.slice(0,e)+String(n))}var af=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},We=function(r,e){var t=r%e;return t*e<0?t+e:t},Ts=function(r,e){return{div:Math.floor(r/e),mod:We(r,e)}},tt=function(r){return!ae(r)||r.length===0},me=function(r){return!tt(r)},G=function(r,e){return me(r)&&r.indexOf(e)!==-1};var hr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[kr(n.getUTCFullYear().toString(),4,"0"),kr(n.getUTCMonth()+1,2,"0"),kr(n.getUTCDate(),2,"0"),"T",kr(n.getUTCHours(),2,"0"),kr(n.getUTCMinutes(),2,"0"),kr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(hr||(hr={}));var x=hr;var U_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Kt=U_;var Af=ms(Pf(),1),{__extends:nn,__assign:je,__rest:NA,__decorate:CA,__param:SA,__metadata:xA,__awaiter:IA,__generator:FA,__exportStar:UA,__createBinding:qA,__values:WA,__read:LA,__spread:YA,__spreadArrays:$A,__spreadArray:T,__await:jA,__asyncGenerator:BA,__asyncDelegator:GA,__asyncValues:HA,__makeTemplateObject:zA,__importStar:KA,__importDefault:VA,__classPrivateFieldGet:ZA,__classPrivateFieldSet:XA,__classPrivateFieldIn:QA}=Af.default;var q_=function(r){nn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Kt),oo=q_;var W_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Nr=W_;var kf=function(r,e){return r.indexOf(e)!==-1},L_=function(r){return r.toString()},Y_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},$_=function(){function r(e,t,n,i){if(t===void 0&&(t=L_),n===void 0&&(n=Nr),i===void 0&&(i=Y_),this.text=[],this.language=n||Nr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ae(this.origOptions.byweekday)){var o=xe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(kf(["dtstart","wkst","freq"],n))return!0;if(!kf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[D.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=et(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),xe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Nt=$_;var j_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function $n(r,e){e===void 0&&(e=Nr);var t={},n=new j_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=D.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=D.WEEKLY,t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=D.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=D.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=D.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=D.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=D.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=D.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[D[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(D[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=D.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var y=l(),m=u(),g=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var P=n.acceptNumber();if(!P)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(P[0],10)];n.accept("comma");){if(P=n.acceptNumber(),!P)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(P[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var $;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})($||($={}));function jn(r){return r<$.HOURLY}var Nf=function(r,e){return e===void 0&&(e=Nr),new D($n(r,e)||void 0)},sn=["count","until","interval","byweekday","bymonthday","bymonth"];Nt.IMPLEMENTED=[];Nt.IMPLEMENTED[$.HOURLY]=sn;Nt.IMPLEMENTED[$.MINUTELY]=sn;Nt.IMPLEMENTED[$.DAILY]=["byhour"].concat(sn);Nt.IMPLEMENTED[$.WEEKLY]=sn;Nt.IMPLEMENTED[$.MONTHLY]=sn;Nt.IMPLEMENTED[$.YEARLY]=["byweekno","byyearday"].concat(sn);var Cf=function(r,e,t,n){return new Nt(r,e,t,n).toString()},Sf=Nt.isFullyConvertible;var an=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var xf=function(r){nn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return hr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=We(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=Ts(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),tt(i)||G(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=Ts(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(tt(i)||G(i,this.hour))&&(tt(s)||G(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=Ts(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(tt(i)||G(i,this.hour))&&(tt(s)||G(s,this.minute))&&(tt(a)||G(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=hr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>hr.MAXYEAR))return;t=hr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case $.YEARLY:return this.addYears(s);case $.MONTHLY:return this.addMonths(s);case $.WEEKLY:return this.addWeekly(s,a);case $.DAILY:return this.addDaily(s);case $.HOURLY:return this.addHours(s,n,o);case $.MINUTELY:return this.addMinutes(s,n,o,u);case $.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(an);function uo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];G(Uf,s)||e.push(s),x.isDate(r[s])&&!x.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return je({},r)}function If(r){var e=je(je({},Bn),uo(r));if(ae(e.byeaster)&&(e.freq=D.YEARLY),!(ae(e.freq)&&D.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ae(e.wkst)?et(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=D.MO.weekday,ae(e.bysetpos)){et(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ae(e.byweekday)||ae(e.byeaster)))switch(e.freq){case D.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case D.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case D.WEEKLY:e.byweekday=[x.getWeekday(e.dtstart)];break}if(ae(e.bymonth)&&!xe(e.bymonth)&&(e.bymonth=[e.bymonth]),ae(e.byyearday)&&!xe(e.byyearday)&&et(e.byyearday)&&(e.byyearday=[e.byyearday]),!ae(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(xe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ae(e.byweekno)&&!xe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ae(e.byweekday))e.bynweekday=null;else if(et(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(so(e.byweekday))e.byweekday=[ge.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ge)!e.byweekday.n||e.freq>D.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(et(u)){a.push(u);continue}else if(so(u)){a.push(ge.fromStr(u).weekday);continue}!u.n||e.freq>D.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ae(e.byhour)?et(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<D.HOURLY?[e.dtstart.getUTCHours()]:null,ae(e.byminute)?et(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<D.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ae(e.bysecond)?et(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<D.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Ff(r){var e=r.dtstart.getTime()%1e3;if(!jn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new an(n,i,s,e))})})}),t}function Hn(r){var e=r.split(`
`).map(B_).filter(function(t){return t!==null});return je(je({},e[0]),e[1])}function Gn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=x.untilStringToDate(i),e}function B_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return qf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return qf(r);case"DTSTART":return Gn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function qf(r){var e=r.replace(/^RRULE:/i,""),t=Gn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=$[o.toUpperCase()];break;case"WKST":t.wkst=ut[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=G_(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=H_(o);break;case"DTSTART":case"TZID":var c=Gn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=x.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function G_(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Wf)}return Wf(r)}function Wf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function H_(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return ut[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=ut[s].weekday;return new ge(a,i)})}var Cr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=x.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function zn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(Bn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!G(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ae(o)||xe(o)&&!o.length)){switch(a){case"FREQ":u=D.FREQUENCIES[r.freq];break;case"WKST":et(o)?u=new ge(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=sf(o).map(function(h){return h instanceof ge?h:xe(h)?new ge(h[0],h[1]):new ge(h)}).toString();break;case"DTSTART":t=z_(o,r.tzid);break;case"UNTIL":u=x.timeToUntilString(o,!r.tzid);break;default:if(xe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var y=h[0],m=h[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function z_(r,e){return r?"DTSTART"+new Cr(new Date(r),e).toString():""}function K_(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Lf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?x.clone(t):x.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!K_(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(xe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Kt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return xe(n)?x.cloneDates(n):n instanceof Date?x.clone(n):n},r}();var Yf=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,28),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),$f=T(T(T(T(T(T(T(T(T(T(T(T(T([],B(1,31),!0),B(2,29),!0),B(3,31),!0),B(4,30),!0),B(5,31),!0),B(6,30),!0),B(7,31),!0),B(8,31),!0),B(9,30),!0),B(10,31),!0),B(11,30),!0),B(12,31),!0),B(1,7),!0),V_=ot(1,29),Z_=ot(1,30),mr=ot(1,31),Le=ot(1,32),jf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Le,!0),Z_,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le.slice(0,7),!0),Bf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Le,!0),V_,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le.slice(0,7),!0),X_=ot(-28,0),Q_=ot(-29,0),yr=ot(-30,0),Ye=ot(-31,0),Gf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ye,!0),Q_,!0),Ye,!0),yr,!0),Ye,!0),yr,!0),Ye,!0),Ye,!0),yr,!0),Ye,!0),yr,!0),Ye,!0),Ye.slice(0,7),!0),Hf=T(T(T(T(T(T(T(T(T(T(T(T(T([],Ye,!0),X_,!0),Ye,!0),yr,!0),Ye,!0),yr,!0),Ye,!0),Ye,!0),yr,!0),Ye,!0),yr,!0),Ye,!0),Ye.slice(0,7),!0),zf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Kf=[0,31,59,90,120,151,181,212,243,273,304,334,365],lo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(ot(7));return r}();function Vf(r,e){var t=new Date(Date.UTC(r,0,1)),n=x.isLeapYear(r)?366:365,i=x.isLeapYear(r+1)?366:365,s=x.toOrdinal(t),a=x.getWeekday(t),o=je(je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},J_(r)),{wnomask:null});if(tt(e.byweekno))return o;o.wnomask=B(0,n+7);var u,l,c=u=We(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+We(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=We(l,7),h=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=h+1),m>0&&m<=h){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var P=0;P<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);P++);}}if(G(e.byweekno,1)){var g=c+h*7;if(c!==u&&(g-=7-u),g<n)for(var y=0;y<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);y++);}if(c){var w=void 0;if(G(e.byweekno,-1))w=-1;else{var k=x.getWeekday(new Date(Date.UTC(r-1,0,1))),z=We(7-k.valueOf()+e.wkst,7),le=x.isLeapYear(r-1)?366:365,ye=void 0;z>=4?(z=0,ye=le+We(k-e.wkst,7)):ye=n-c,w=Math.floor(52+We(ye,7)/4)}if(G(e.byweekno,w))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function J_(r){var e=x.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=x.getWeekday(t);return e===365?{mmask:Yf,mdaymask:Bf,nmdaymask:Hf,wdaymask:lo.slice(n),mrange:Kf}:{mmask:$f,mdaymask:jf,nmdaymask:Gf,wdaymask:lo.slice(n),mrange:zf}}function Zf(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===D.YEARLY)if(tt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===D.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(tt(o))return a;a.nwdaymask=B(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,y=s.bynweekday[f],m=y[0],g=y[1];g<0?(h=d+(g+1)*7,h-=We(i[h]-m,7)):(h=c+(g-1)*7,h+=We(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function Xf(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,g=Date.UTC(r,y-1,m+e),P=Date.UTC(r,0,1);return[Math.ceil((g-P)/(1e3*60*60*24))]}var eT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=Vf(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=Zf(e,t,s,a,o,n)}ae(n.byeaster)&&(this.eastermask=Xf(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[ot(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=B(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=B(null,this.yearlen+7),s=x.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=B(null,this.yearlen),s=x.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),x.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new an(e,t,a,i)});return x.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new an(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case $.YEARLY:return this.ydayset.bind(this);case $.MONTHLY:return this.mdayset.bind(this);case $.WEEKLY:return this.wdayset.bind(this);case $.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case $.HOURLY:return this.htimeset.bind(this);case $.MINUTELY:return this.mtimeset.bind(this);case $.SECONDLY:return this.stimeset.bind(this)}},r}(),Qf=eT;function Jf(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=We(c,e.length)):(u=Math.floor((c-1)/e.length),l=We(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!ae(h)||d.push(h)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],g=x.fromOrdinal(i.yearordinal+y),P=x.combine(g,m);G(a,P)||a.push(P)}return x.sort(a),a}function ws(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Vt(r);var u=xf.fromDate(t),l=new Qf(e);l.rebuild(u.year,u.month);for(var c=nT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],y=d[2],m=rT(f,h,y,l,e);if(me(a))for(var g=Jf(a,c,h,y,l,f),P=0;P<g.length;P++){var w=g[P];if(s&&w>s)return Vt(r);if(w>=t){var k=ep(w,e);if(!r.accept(k)||o&&(--o,!o))return Vt(r)}}else for(var P=h;P<y;P++){var z=f[P];if(!!ae(z))for(var le=x.fromOrdinal(l.yearordinal+z),ye=0;ye<c.length;ye++){var re=c[ye],w=x.combine(le,re);if(s&&w>s)return Vt(r);if(w>=t){var k=ep(w,e);if(!r.accept(k)||o&&(--o,!o))return Vt(r)}}}if(e.interval===0||(u.add(e,m),u.year>x.MAXYEAR))return Vt(r);jn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function tT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!G(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!G(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!G(r.eastermask,e)||(me(o)||me(u))&&!G(o,r.mdaymask[e])&&!G(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!G(l,e+1)&&!G(l,-r.yearlen+e)||e>=r.yearlen&&!G(l,e+1-r.yearlen)&&!G(l,-r.nextyearlen+e-r.yearlen))}function ep(r,e){return new Cr(r,e.tzid).rezonedDate()}function Vt(r){return r.getValue()}function rT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=tT(n,o,i),s&&(r[o]=null)}return s}function nT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return jn(n)?Ff(t):n>=D.HOURLY&&me(i)&&!G(i,e.hour)||n>=D.MINUTELY&&me(s)&&!G(s,e.minute)||n>=D.SECONDLY&&me(a)&&!G(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ut={MO:new ge(0),TU:new ge(1),WE:new ge(2),TH:new ge(3),FR:new ge(4),SA:new ge(5),SU:new ge(6)},Bn={freq:$.YEARLY,dtstart:null,interval:1,wkst:ut.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Uf=Object.keys(Bn),D=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Lf,this.origOptions=uo(e);var n=If(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return $n(e,t)},r.fromText=function(e,t){return Nf(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return ws(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new oo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Kt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!x.isValidDate(e)||!x.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new oo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Kt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!x.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Kt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!x.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Kt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return zn(this.origOptions)},r.prototype.toText=function(e,t,n){return Cf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Sf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=$.YEARLY,r.MONTHLY=$.MONTHLY,r.WEEKLY=$.WEEKLY,r.DAILY=$.DAILY,r.HOURLY=$.HOURLY,r.MINUTELY=$.MINUTELY,r.SECONDLY=$.SECONDLY,r.MO=ut.MO,r.TU=ut.TU,r.WE=ut.WE,r.TH=ut.TH,r.FR=ut.FR,r.SA=ut.SA,r.SU=ut.SU,r.parseString=Hn,r.optionsToString=zn,r}();function tp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(y){y.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new Cr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Cr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){ws(r,f.options)});var d=r._result;switch(x.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var rp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function iT(r,e){var t=[],n=[],i=[],s=[],a=Gn(r),o=a.dtstart,u=a.tzid,l=lT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=uT(c),h=f.name,y=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Hn(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],P=g[1];P&&!u&&(u=P),n=n.concat(np(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Hn(m));break;case"EXDATE":s=s.concat(np(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function sT(r,e){var t=iT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new fo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new D(co(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new D(co(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new D(co(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Rs(r,e){return e===void 0&&(e={}),sT(r,aT(e))}function co(r,e,t){return je(je({},r),{dtstart:e,tzid:t})}function aT(r){var e=[],t=Object.keys(r),n=Object.keys(rp);if(t.forEach(function(i){G(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return je(je({},rp),r)}function oT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=af(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function uT(r){var e=oT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function lT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function cT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function np(r,e){return cT(e),r.split(",").map(function(t){return x.untilStringToDate(t)})}function ip(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var fo=function(r){nn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=ip.apply(n,["dtstart"]),n.tzid=ip.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return tp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){sp(t,this._rrule)},e.prototype.exrule=function(t){sp(t,this._exrule)},e.prototype.rdate=function(t){ap(t,this._rdate)},e.prototype.exdate=function(t){ap(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Rs(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Rs(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(zn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(op("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(op("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(D);function sp(r,e){if(!(r instanceof D))throw new TypeError(String(r)+" is not RRule instance");G(e.map(String),String(r))||e.push(r)}function ap(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");G(e.map(Number),Number(r))||(e.push(r),x.sort(e))}function op(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return x.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var H=class{static by(e,t){let n=[H.compareByUrgency,H.compareByStatus,H.compareByDueDate,H.compareByPriority,H.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=H.comparators[s];i.push(a?H.makeReversedComparator(u):u),s==="tag"&&(H.tagPropertyInstance=o)}return t.sort(H.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return H.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return H.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return H.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return H.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=H.tagPropertyInstance-1;return e.tags.length<H.tagPropertyInstance&&t.tags.length>=H.tagPropertyInstance?1:t.tags.length<H.tagPropertyInstance&&e.tags.length>=H.tagPropertyInstance?-1:e.tags.length<H.tagPropertyInstance&&t.tags.length<H.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isValid()&&!t.isValid()?-1:!e.isValid()&&t.isValid()||e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return H.cleanDescription(e.description).localeCompare(H.cleanDescription(t.description))}static cleanDescription(e){let t=ie().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},ze=H;ze.tagPropertyInstance=1,ze.comparators={urgency:H.compareByUrgency,description:H.compareByDescription,priority:H.compareByPriority,start:H.compareByStartDate,scheduled:H.compareByScheduledDate,due:H.compareByDueDate,done:H.compareByDoneDate,path:H.compareByPath,status:H.compareByStatus,tag:H.compareByTag};var Re=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=D.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new D(u);return new Re({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new D(zt($e({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||ze.compareByDate(this.startDate,e.startDate)!==0||ze.compareByDate(this.scheduledDate,e.scheduledDate)!==0||ze.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Re.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Re.nextAfterYears(e,n,t,a[1])),Re.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyMonths(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyYears(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new D(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Xt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/Xt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*Xt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Xt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*Xt.startedCoefficient),e.priority){case"1":t+=1*Xt.priorityCoefficient;break;case"2":t+=.65*Xt.priorityCoefficient;break;case"3":t+=.325*Xt.priorityCoefficient;break}return t}},Zt=Xt;Zt.dueCoefficient=12,Zt.scheduledCoefficient=5,Zt.startedCoefficient=-3,Zt.priorityCoefficient=6,Zt.milliSecondsPerDay=1e3*60*60*24;var Ee={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Ct="\u{1F501}",St="\u{1F6EB}",xt="\u23F3",It="\u{1F4C5}",po="\u2705",rt=class{},M=rt;M.dateFormat="YYYY-MM-DD",M.indentationRegex=/^([\s\t>]*)/,M.listMarkerRegex=/[-*]/,M.checkboxRegex=/\[(.)\]/u,M.afterCheckboxRegex=/ *(.*)/u,M.taskRegex=new RegExp(rt.indentationRegex.source+rt.listMarkerRegex.source+" +"+rt.checkboxRegex.source+rt.afterCheckboxRegex.source,"u"),M.nonTaskRegex=new RegExp(rt.indentationRegex.source+rt.listMarkerRegex.source+"? *("+rt.checkboxRegex.source+")?"+rt.afterCheckboxRegex.source,"u"),M.listItemRegex=new RegExp(rt.indentationRegex.source+"("+rt.listMarkerRegex.source+")"),M.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,M.priorityRegex=/([⏫🔼🔽])$/u,M.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,M.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,M.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,M.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,M.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,M.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,M.hashTagsFromEnd=new RegExp(rt.hashTags.source+"$");var oe=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:y,blockLink:m,tags:g,originalMarkdown:P}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=g,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=y,this.blockLink=m,this.originalMarkdown=P}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(M.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ie();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2],f;switch(d){case" ":f="Todo";break;default:f="Done"}let h=l.match(M.blockLinkRegex),y=h!==null?h[0]:"";y!==""&&(l=l.replace(M.blockLinkRegex,"").trim());let m,g="3",P=null,w=null,k=null,z=null,le="",ye=null,re=[],W="",gt=20,Xe=0;do{m=!1;let v=l.match(M.priorityRegex);if(v!==null){switch(v[1]){case Ee.Low:g="4";break;case Ee.Medium:g="2";break;case Ee.High:g="1";break}l=l.replace(M.priorityRegex,"").trim(),m=!0}let b=l.match(M.doneDateRegex);b!==null&&(z=window.moment(b[1],M.dateFormat),l=l.replace(M.doneDateRegex,"").trim(),m=!0);let C=l.match(M.dueDateRegex);C!==null&&(k=window.moment(C[1],M.dateFormat),l=l.replace(M.dueDateRegex,"").trim(),m=!0);let _=l.match(M.scheduledDateRegex);_!==null&&(w=window.moment(_[1],M.dateFormat),l=l.replace(M.scheduledDateRegex,"").trim(),m=!0);let S=l.match(M.startDateRegex);S!==null&&(P=window.moment(S[1],M.dateFormat),l=l.replace(M.startDateRegex,"").trim(),m=!0);let A=l.match(M.recurrenceRegex);A!==null&&(le=A[1].trim(),l=l.replace(M.recurrenceRegex,"").trim(),m=!0);let I=l.match(M.hashTagsFromEnd);if(I!=null){l=l.replace(M.hashTagsFromEnd,"").trim(),m=!0;let J=I[0].trim();W=W.length>0?[J,W].join(" "):J}Xe++}while(m&&Xe<=gt);le.length>0&&(ye=Re.fromText({recurrenceRuleText:le,startDate:P,scheduledDate:w,dueDate:k})),W.length>0&&(l+=" "+W);let N=l.match(M.hashTags);return N!==null&&(re=N.filter(v=>v!==u).map(v=>v.trim())),new oe({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:g,startDate:P,scheduledDate:w,dueDate:k,doneDate:z,recurrence:ye,blockLink:y,tags:re,originalMarkdown:e})}toLi(s){return ne(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ie();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield up.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,h=f.querySelector("p");if(h!==null){for(;h.firstChild;)f.insertBefore(h.firstChild,h);h.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let y=a.createEl("input");return y.addClass("task-list-item-checkbox"),y.type="checkbox",this.status!=="Todo"&&(y.checked=!0,a.addClass("is-checked")),y.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),y.disabled=!0;let g=this.toggle();gs({originalTask:this,newTasks:g})}),a.prepend(y),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),y.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new tn;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+Ee.High:this.priority==="2"?s=" "+Ee.Medium:this.priority==="4"&&(s=" "+Ee.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+Ct:` ${Ct} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+St:` ${St} ${this.startDate.format(M.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+xt:` ${xt} ${this.scheduledDate.format(M.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+It:` ${It} ${this.dueDate.format(M.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+po:` ${po} ${this.doneDate.format(M.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ie();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new oe(zt($e({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new oe(zt($e($e({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Zt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(ze.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${Ct} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(oe.toTooltipDate({signifier:St,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(oe.toTooltipDate({signifier:xt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(oe.toTooltipDate({signifier:It,date:this.dueDate})),this.doneDate&&n.createDiv().setText(oe.toTooltipDate({signifier:po,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(M.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ie(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var gr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new ys,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>ne(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof Ms.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof Ms.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof Ms.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new oe(zt($e({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>ne(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return ne(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=gr.getTasksFromFileContent(a,i,t,e)}oe.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=gr.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=oe.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:gr.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var fd=require("obsidian");var t_=require("obsidian");function xr(){}function go(r){return r()}function cp(){return Object.create(null)}function Ir(r){r.forEach(go)}function fp(r){return typeof r=="function"}function pp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function hp(r){return Object.keys(r).length===0}var mp=!1;function dT(){mp=!0}function fT(){mp=!1}function E(r,e){r.appendChild(e)}function Xn(r,e,t){r.insertBefore(e,t||null)}function on(r){r.parentNode.removeChild(r)}function yp(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function q(r){return document.createElement(r)}function pT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Ft(r){return document.createTextNode(r)}function K(){return Ft(" ")}function Tt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function gp(r){return function(e){return e.preventDefault(),r.call(this,e)}}function O(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function hT(r){return Array.from(r.childNodes)}function _p(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function bt(r,e){r.value=e==null?"":e}function _o(r,e,t){r.classList[t?"add":"remove"](e)}var Sr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=pT(t.nodeName):this.e=q(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)Xn(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(on)}};var Zn;function Vn(r){Zn=r}function mT(){if(!Zn)throw new Error("Function called outside component initialization");return Zn}function To(r){mT().$$.on_mount.push(r)}var Kn=[];var Ps=[],Os=[],dp=[],yT=Promise.resolve(),mo=!1;function gT(){mo||(mo=!0,yT.then(Tp))}function yo(r){Os.push(r)}var ho=new Set,Ds=0;function Tp(){let r=Zn;do{for(;Ds<Kn.length;){let e=Kn[Ds];Ds++,Vn(e),_T(e.$$)}for(Vn(null),Kn.length=0,Ds=0;Ps.length;)Ps.pop()();for(let e=0;e<Os.length;e+=1){let t=Os[e];ho.has(t)||(ho.add(t),t())}Os.length=0}while(Kn.length);for(;dp.length;)dp.pop()();mo=!1,ho.clear(),Vn(r)}function _T(r){if(r.fragment!==null){r.update(),Ir(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(yo)}}var TT=new Set;function bT(r,e){r&&r.i&&(TT.delete(r),r.i(e))}var kC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function vT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||yo(()=>{let u=s.map(go).filter(fp);a?a.push(...u):Ir(u),r.$$.on_mount=[]}),o.forEach(yo)}function bp(r,e){let t=r.$$;t.fragment!==null&&(Ir(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ET(r,e){r.$$.dirty[0]===-1&&(Kn.push(r),gT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function vp(r,e,t,n,i,s,a,o=[-1]){let u=Zn;Vn(r);let l=r.$$={fragment:null,ctx:null,props:s,update:xr,not_equal:i,bound:cp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:cp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let y=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&ET(r,d)),f}):[],l.update(),c=!0,Ir(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){dT();let d=hT(e.target);l.fragment&&l.fragment.l(d),d.forEach(on)}else l.fragment&&l.fragment.c();e.intro&&bT(r.$$.fragment),vT(r,e.target,e.anchor,e.customElement),fT(),Tp()}Vn(u)}var wT;typeof HTMLElement=="function"&&(wT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(go).filter(fp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Ir(this.$$.on_disconnect)}$destroy(){bp(this,1),this.$destroy=xr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!hp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var As=class{$destroy(){bp(this,1),this.$destroy=xr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!hp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Qi=ms(we());var YP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Rn(r){for(let[e,t]of Object.entries(YP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function Xg(r,e,t){let n=r.slice();return n[28]=e[t].value,n[29]=e[t].label,n[30]=e[t].symbol,n}function $P(r){let e,t=r[30]+"",n;return{c(){e=q("span"),n=Ft(t)},m(i,s){Xn(i,e,s),E(e,n)},p:xr,d(i){i&&on(e)}}}function Qg(r){let e,t,n,i,s,a,o,u,l=r[29]+"",c,d,f=r[30]&&r[30].charCodeAt(0)>=256,h,y,m,g,P=f&&$P(r);return{c(){e=q("span"),t=q("input"),a=K(),o=q("label"),u=q("span"),c=Ft(l),d=K(),P&&P.c(),y=K(),O(t,"type","radio"),O(t,"id",n="priority-"+r[28]),t.__value=i=r[28],t.value=t.__value,O(t,"accesskey",s=r[8](r[29].charAt(0).toLowerCase())),r[20][0].push(t),O(u,"class","accesskey-first"),O(o,"for",h="priority-"+r[28])},m(w,k){Xn(w,e,k),E(e,t),t.checked=t.__value===r[0].priority,E(e,a),E(e,o),E(o,u),E(u,c),E(o,d),P&&P.m(o,null),E(e,y),m||(g=Tt(t,"change",r[19]),m=!0)},p(w,k){k[0]&256&&s!==(s=w[8](w[29].charAt(0).toLowerCase()))&&O(t,"accesskey",s),k[0]&1&&(t.checked=t.__value===w[0].priority),f&&P.p(w,k)},d(w){w&&on(e),r[20][0].splice(r[20][0].indexOf(t),1),P&&P.d(),m=!1,g()}}}function jP(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,y,m,g,P,w,k,z,le,ye,re,W,gt,Xe,N,v,b,C,_,S,A,I,J,X,de,fe,Ce,Ge,Qe,Gt,Se,Je,Xr,Ht,xd,_t,os,Id,In,Fd,Ud,us,qd,Fn,ls,Wd,Pt,cs,Ld,Qr,Ar,ds,Yd,pr,fs,$d,Qa,ps=r[0].status+"",Ja,jd,Un,eo,Bd,hs,Gd,Jr,qn,Hd,Wn,to,zd,en=r[9],He=[];for(let F=0;F<en.length;F+=1)He[F]=Qg(Xg(r,en,F));return{c(){e=q("div"),t=q("form"),n=q("div"),i=q("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=K(),a=q("input"),u=K(),l=q("div"),c=q("label"),d=Ft("Priority"),h=K();for(let F=0;F<He.length;F+=1)He[F].c();y=K(),m=q("div"),g=q("label"),g.textContent="Recurs",P=K(),w=q("input"),z=K(),le=q("code"),ye=Ft(Ct),re=K(),W=new Sr(!1),gt=K(),Xe=q("label"),Xe.textContent="Due",N=K(),v=q("input"),C=K(),_=q("code"),S=Ft(It),A=K(),I=new Sr(!1),J=K(),X=q("label"),X.textContent="Scheduled",de=K(),fe=q("input"),Ge=K(),Qe=q("code"),Gt=Ft(xt),Se=K(),Je=new Sr(!1),Xr=K(),Ht=q("label"),Ht.innerHTML='St<span class="accesskey">a</span>rt',xd=K(),_t=q("input"),Id=K(),In=q("code"),Fd=Ft(St),Ud=K(),us=new Sr(!1),qd=K(),Fn=q("div"),ls=q("label"),ls.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,Wd=K(),Pt=q("input"),Ld=K(),Qr=q("div"),Ar=q("div"),ds=q("label"),ds.textContent="Status:",Yd=K(),pr=q("input"),$d=K(),Qa=q("code"),Ja=Ft(ps),jd=K(),Un=q("div"),eo=q("span"),eo.textContent="Done on:",Bd=K(),hs=q("code"),Gd=K(),Jr=q("div"),qn=q("button"),qn.textContent="Apply",Hd=K(),Wn=q("button"),Wn.textContent="Cancel",O(i,"for","description"),O(a,"id","description"),O(a,"type","text"),O(a,"class","tasks-modal-description"),O(a,"placeholder","Take out the trash"),O(a,"accesskey",o=r[8]("t")),O(n,"class","tasks-modal-section"),O(c,"for",f="priority-"+r[0].priority),O(l,"class","tasks-modal-section tasks-modal-priorities"),O(g,"for","recurrence"),O(g,"class","accesskey-first"),O(w,"id","description"),O(w,"type","text"),O(w,"placeholder","Try 'every 2 weeks on Thursday'."),O(w,"accesskey",k=r[8]("r")),W.a=null,O(Xe,"for","due"),O(Xe,"class","accesskey-first"),O(v,"id","due"),O(v,"type","text"),O(v,"placeholder",ld),O(v,"accesskey",b=r[8]("d")),I.a=null,O(X,"for","scheduled"),O(X,"class","accesskey-first"),O(fe,"id","scheduled"),O(fe,"type","text"),O(fe,"placeholder",ld),O(fe,"accesskey",Ce=r[8]("s")),Je.a=null,O(Ht,"for","start"),O(_t,"id","start"),O(_t,"type","text"),O(_t,"placeholder",ld),O(_t,"accesskey",os=r[8]("a")),us.a=null,O(ls,"for","forwardOnly"),O(Pt,"id","forwardOnly"),O(Pt,"type","checkbox"),O(Pt,"class","task-list-item-checkbox tasks-modal-checkbox"),O(Pt,"accesskey",cs=r[8]("f")),O(m,"class","tasks-modal-section tasks-modal-dates"),O(ds,"for","status"),O(pr,"id","status"),O(pr,"type","checkbox"),O(pr,"class","task-list-item-checkbox tasks-modal-checkbox"),pr.checked=fs=r[0].status==="Done",pr.disabled=!0,O(Qr,"class","tasks-modal-section tasks-modal-status"),O(qn,"type","submit"),O(qn,"class","mod-cta"),O(Wn,"type","button"),O(Jr,"class","tasks-modal-section tasks-modal-buttons"),_o(t,"with-accesskeys",r[1]),O(e,"class","tasks-modal")},m(F,ue){Xn(F,e,ue),E(e,t),E(t,n),E(n,i),E(n,s),E(n,a),bt(a,r[0].description),r[18](a),E(t,u),E(t,l),E(l,c),E(c,d),E(l,h);for(let qe=0;qe<He.length;qe+=1)He[qe].m(l,null);E(t,y),E(t,m),E(m,g),E(m,P),E(m,w),bt(w,r[0].recurrenceRule),E(m,z),E(m,le),E(le,ye),E(le,re),W.m(r[6],le),E(m,gt),E(m,Xe),E(m,N),E(m,v),bt(v,r[0].dueDate),E(m,C),E(m,_),E(_,S),E(_,A),I.m(r[5],_),E(m,J),E(m,X),E(m,de),E(m,fe),bt(fe,r[0].scheduledDate),E(m,Ge),E(m,Qe),E(Qe,Gt),E(Qe,Se),Je.m(r[4],Qe),E(m,Xr),E(m,Ht),E(m,xd),E(m,_t),bt(_t,r[0].startDate),E(m,Id),E(m,In),E(In,Fd),E(In,Ud),us.m(r[3],In),E(m,qd),E(m,Fn),E(Fn,ls),E(Fn,Wd),E(Fn,Pt),Pt.checked=r[0].forwardOnly,E(t,Ld),E(t,Qr),E(Qr,Ar),E(Ar,ds),E(Ar,Yd),E(Ar,pr),E(Ar,$d),E(Ar,Qa),E(Qa,Ja),E(Qr,jd),E(Qr,Un),E(Un,eo),E(Un,Bd),E(Un,hs),hs.innerHTML=r[7],E(t,Gd),E(t,Jr),E(Jr,qn),E(Jr,Hd),E(Jr,Wn),to||(zd=[Tt(a,"input",r[17]),Tt(l,"keyup",r[10]),Tt(w,"input",r[21]),Tt(v,"input",r[22]),Tt(fe,"input",r[23]),Tt(_t,"input",r[24]),Tt(Pt,"change",r[25]),Tt(Wn,"click",r[11]),Tt(t,"submit",gp(r[12]))],to=!0)},p(F,ue){if(ue[0]&256&&o!==(o=F[8]("t"))&&O(a,"accesskey",o),ue[0]&1&&a.value!==F[0].description&&bt(a,F[0].description),ue[0]&1&&f!==(f="priority-"+F[0].priority)&&O(c,"for",f),ue[0]&769){en=F[9];let qe;for(qe=0;qe<en.length;qe+=1){let Kd=Xg(F,en,qe);He[qe]?He[qe].p(Kd,ue):(He[qe]=Qg(Kd),He[qe].c(),He[qe].m(l,null))}for(;qe<He.length;qe+=1)He[qe].d(1);He.length=en.length}ue[0]&256&&k!==(k=F[8]("r"))&&O(w,"accesskey",k),ue[0]&1&&w.value!==F[0].recurrenceRule&&bt(w,F[0].recurrenceRule),ue[0]&64&&W.p(F[6]),ue[0]&256&&b!==(b=F[8]("d"))&&O(v,"accesskey",b),ue[0]&1&&v.value!==F[0].dueDate&&bt(v,F[0].dueDate),ue[0]&32&&I.p(F[5]),ue[0]&256&&Ce!==(Ce=F[8]("s"))&&O(fe,"accesskey",Ce),ue[0]&1&&fe.value!==F[0].scheduledDate&&bt(fe,F[0].scheduledDate),ue[0]&16&&Je.p(F[4]),ue[0]&256&&os!==(os=F[8]("a"))&&O(_t,"accesskey",os),ue[0]&1&&_t.value!==F[0].startDate&&bt(_t,F[0].startDate),ue[0]&8&&us.p(F[3]),ue[0]&256&&cs!==(cs=F[8]("f"))&&O(Pt,"accesskey",cs),ue[0]&1&&(Pt.checked=F[0].forwardOnly),ue[0]&1&&fs!==(fs=F[0].status==="Done")&&(pr.checked=fs),ue[0]&1&&ps!==(ps=F[0].status+"")&&_p(Ja,ps),ue[0]&128&&(hs.innerHTML=F[7]),ue[0]&2&&_o(t,"with-accesskeys",F[1])},i:xr,o:xr,d(F){F&&on(e),r[18](null),yp(He,F),to=!1,Ir(zd)}}}var ld="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function BP(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,u,l={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},c="",d="",f="",h="",y="",m=!1,g=!0,P=[{value:"low",label:"Low",symbol:Ee.Low},{value:"none",label:"Normal",symbol:Ee.None},{value:"medium",label:"Medium",symbol:Ee.Medium},{value:"high",label:"High",symbol:Ee.High}];function w(_,S,A=void 0){if(!S)return`<i>no ${_} date</i>`;let I=Qi.parseDate(S,A,{forwardDate:A!=null});return I!==null?window.moment(I).format("YYYY-MM-DD"):`<i>invalid ${_} date</i>`}To(()=>{let{globalFilter:_,provideAccessKeys:S}=ie();t(1,g=S);let A=a.getDescriptionWithoutGlobalFilter();(A!=a.description||A.indexOf(_)==-1)&&(m=!0);let I="none";a.priority==="4"?I="low":a.priority==="2"?I="medium":a.priority==="1"&&(I="high"),t(0,l={description:A,status:a.status,priority:I,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{u.focus()},10)});let k=_=>{if(_.key&&!_.altKey&&!_.ctrlKey){let S=P.find(A=>A.label.charAt(0).toLowerCase()==_.key);S&&t(0,l.priority=S.value,l)}},z=()=>{o([])},le=()=>{let{globalFilter:_}=ie(),S=l.description.trim();m&&(S=_+" "+S);let A=null,I=Qi.parseDate(l.startDate,new Date,{forwardDate:l.forwardOnly});I!==null&&(A=window.moment(I));let J=null,X=Qi.parseDate(l.scheduledDate,new Date,{forwardDate:l.forwardOnly});X!==null&&(J=window.moment(X));let de=null,fe=Qi.parseDate(l.dueDate,new Date,{forwardDate:l.forwardOnly});fe!==null&&(de=window.moment(fe));let Ce=null;l.recurrenceRule&&(Ce=Re.fromText({recurrenceRuleText:l.recurrenceRule,startDate:A,scheduledDate:J,dueDate:de}));let Ge;switch(l.priority){case"low":Ge="4";break;case"medium":Ge="2";break;case"high":Ge="1";break;default:Ge="3"}let Qe=new oe(Object.assign(Object.assign({},a),{description:S,status:l.status,priority:Ge,recurrence:Ce,startDate:A,scheduledDate:J,dueDate:de,doneDate:window.moment(l.doneDate,"YYYY-MM-DD").isValid()?window.moment(l.doneDate,"YYYY-MM-DD"):null}));o([Qe])},ye=[[]];function re(){l.description=this.value,t(0,l)}function W(_){Ps[_?"unshift":"push"](()=>{u=_,t(2,u)})}function gt(){l.priority=this.__value,t(0,l)}function Xe(){l.recurrenceRule=this.value,t(0,l)}function N(){l.dueDate=this.value,t(0,l)}function v(){l.scheduledDate=this.value,t(0,l)}function b(){l.startDate=this.value,t(0,l)}function C(){l.forwardOnly=this.checked,t(0,l)}return r.$$set=_=>{"task"in _&&t(13,a=_.task),"onSubmit"in _&&t(14,o=_.onSubmit)},r.$$.update=()=>{if(r.$$.dirty[0]&2){e:t(8,n=_=>g?_:null)}if(r.$$.dirty[0]&1){e:t(0,l.startDate=Rn(l.startDate),l),t(3,c=w("start",l.startDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.scheduledDate=Rn(l.scheduledDate),l),t(4,d=w("scheduled",l.scheduledDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.dueDate=Rn(l.dueDate),l),t(5,f=w("due",l.dueDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&98305){e:l.recurrenceRule?t(6,h=t(16,s=t(15,i=Re.fromText({recurrenceRuleText:l.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(6,h="<i>not recurring</>")}if(r.$$.dirty[0]&1){e:t(7,y=w("done",l.doneDate))}},[l,g,u,c,d,f,h,y,n,P,k,z,le,a,o,i,s,re,W,gt,ye,Xe,N,v,b,C]}var cd=class extends As{constructor(e){super(),vp(this,e,BP,jP,pp,{task:13,onSubmit:14},null,[-1,-1])}},e_=cd;var Mn=class extends t_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new e_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var r_=(r,e,t,n)=>{var d;if(r)return t instanceof fd.MarkdownView;if(!(t instanceof fd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=GP({line:o,path:i}),l=f=>{let h=f.map(y=>y.toFileLineString()).join(`
`);e.setLine(a,h)};new Mn({app:n,task:u,onSubmit:l}).open()},GP=({line:r,path:e})=>{var c;let t=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(M.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new oe({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:""});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(M.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(M.blockLinkRegex,"")),new oe({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:""})};var pd=require("obsidian");var n_=(r,e,t)=>{var u;if(r)return t instanceof pd.MarkdownView;if(!(t instanceof pd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=HP(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:KP(i.ch,a,o)})},HP=(r,e)=>{let t=r,n=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=zP(n);else{let i=r.match(M.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(M.taskRegex,`$1- [${a}] $3`)}else M.listItemRegex.test(r)?t=r.replace(M.listItemRegex,"$1$2 [ ]"):t=r.replace(M.indentationRegex,"$1- ")}return t},zP=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),KP=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(M.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var va=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>r_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:n_})}};var Ea=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var wa=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return ne(this,null,function*(){var c;let{globalFilter:n}=ie(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=oe.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let y=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),P=h.childNodes;for(let z=0;z<P.length;z=z+1){let le=P[z];le.nodeName.toLowerCase()==="div"?g.prepend(le):le.nodeName.toLowerCase()==="ul"&&g.append(le)}let w=h.querySelectorAll("[data-footnote-id]"),k=g.querySelectorAll("[data-footnote-id]");if(w.length===k.length)for(let z=0;z<w.length;z++)k[z].replaceWith(w[z]);h.replaceWith(g)}})}};var i_=require("@codemirror/view"),s_=require("obsidian");var a_=()=>i_.ViewPlugin.fromClass(hd),hd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new s_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=oe.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Ka=require("obsidian");var Dn=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var zr=class extends Dn{constructor(t){super();this.stringToFind=t}matches(t){return zr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var On=class extends Dn{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new On(s)}else return null}matches(t){return t.match(this.regex)!==null}};var ve=class{canCreateFilterForLine(e){return ve.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var md=class{constructor(e,t){this.instruction=e,this.filterFunction=t}},ce=class{constructor(e){this.instruction=e}get filter(){return this._filter}get filterFunction(){if(this._filter)return this._filter.filterFunction}set filterFunction(e){e?this._filter=new md(this.instruction,e):this._filter=void 0}static fromFilter(e,t){let n=new ce(e);return n.filterFunction=t,n}static fromError(e,t){let n=new ce(e);return n.error=t,n}};var yt=class extends ve{createFilterOrErrorMessage(e){let t=ve.getMatch(this.filterRegExp(),e);if(t===null)return ce.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new zr(s);else if(i.includes("regex")&&(a=On.validateAndConstruct(s),a===null))return ce.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return ce.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null;return ce.fromFilter(e,this.getFilter(a,o))}static stringIncludesCaseInsensitive(e,t){return zr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var Ra=class extends yt{fieldName(){return"description"}value(e){let t=ie().globalFilter;return e.description.replace(t,"").trim()}};var o_=ms(we()),or=class{static parseDate(e,t=!1){return window.moment(o_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var Ma=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new ce(e);return e===this._instruction?(t.filterFunction=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var Pn=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Ma(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new ce(e);return t.error=`do not understand filter: ${e}`,t}};var $t=class extends ve{constructor(){super();this.filterInstructions=new Pn,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new ce(t),s=ve.getMatch(this.filterRegExp(),t);if(s!==null){let a=or.parseDate(s[2]);a.isValid()?s[1]==="before"?i.filterFunction=o=>{let u=this.date(o);return u?u.isBefore(a):this.filterResultIfFieldMissing()}:s[1]==="after"?i.filterFunction=o=>{let u=this.date(o);return u?u.isAfter(a):this.filterResultIfFieldMissing()}:i.filterFunction=o=>{let u=this.date(o);return u?u.isSame(a):this.filterResultIfFieldMissing()}:i.error="do not understand "+this.fieldName()+" date"}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}};var yd=class extends $t{filterRegExp(){return yd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Ji=yd;Ji.doneRegexp=/^done (before|after|on)? ?(.*)/;var gd=class extends $t{filterRegExp(){return gd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},es=gd;es.dueRegexp=/^due (before|after|on)? ?(.*)/;var Mr=class extends ve{constructor(){super(...arguments);this._filters=new Pn}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var Da=class extends Mr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Oa=class extends yt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Pa=class extends yt{fieldName(){return"path"}value(e){return e.path}};var _d=class extends ve{createFilterOrErrorMessage(e){let t=new ce(e),n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filterFunction=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return _d.priorityRegexp}},ts=_d;ts.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var Td=class extends $t{filterRegExp(){return Td.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},rs=Td;rs.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var bd=class extends $t{filterRegExp(){return bd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},ns=bd;ns.startRegexp=/^starts (before|after|on)? ?(.*)/;var Dr=class extends ve{canCreateFilterForLine(e){return e===Dr.instructionForFieldPresence||e===Dr.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new ce(e);if(e===Dr.instructionForFieldPresence){let i=new ce(e);return i.filterFunction=s=>this.dates(s).some(a=>a!==null),i}if(e===Dr.instructionForFieldAbsence){let i=new ce(e);return i.filterFunction=s=>!this.dates(s).some(a=>a!==null),i}let n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=or.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filterFunction=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new Dr().dates(e).sort(ze.compareByDate)[0]}filterRegExp(){return Dr.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},ur=Dr;ur.happensRegexp=/^happens (before|after|on)? ?(.*)/,ur.instructionForFieldPresence="has happens date",ur.instructionForFieldAbsence="no happens date";var Aa=class extends Mr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var ka=class extends Mr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var Na=class extends yt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Ca=class extends Na{fieldNameSingular(){return"tag"}values(e){return e.tags}};var b_=ms(T_());var Fa=class extends ve{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new ce(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,b_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=Ua(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filterFunction=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var qa=class extends yt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var nA=[()=>new ka,()=>new Aa,()=>new ts,()=>new ur,()=>new ns,()=>new rs,()=>new es,()=>new Ji,()=>new Pa,()=>new Ra,()=>new Ca,()=>new Oa,()=>new Da,()=>new Fa,()=>new qa];function Ua(r){for(let e of nA){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var Wa=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var La=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Wa(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ya=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var $a=class extends Map{},ja=class extends Ya{},Ba=class{constructor(e,t){this.groups=new $a;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new ja(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Pr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new ja([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new $a([...this.groups.entries()].sort())}};var Ga=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Ha=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ba(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new La(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ga(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var Q=class{static by(e,t){return new Ha(e,t)}static getGroupNamesForTask(e,t){let n=Q.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[Q.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[Q.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[Q.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[Q.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new ur().earliestDate(e);return[Q.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(Q.groupDateFormat)}static groupByPath(e){return[Q.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[Q.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[Q.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[Q.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=Q.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=Q.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Pr=Q;Pr.groupDateFormat="YYYY-MM-DD dddd",Pr.groupers={backlink:Q.groupByBacklink,done:Q.groupByDoneDate,due:Q.groupByDueDate,filename:Q.groupByFileName,folder:Q.groupByFolder,happens:Q.groupByHappensDate,heading:Q.groupByHeading,path:Q.groupByPath,priority:Q.groupByPriority,recurrence:Q.groupByRecurrence,recurring:Q.groupByRecurring,root:Q.groupByRoot,scheduled:Q.groupByScheduledDate,start:Q.groupByStartDate,status:Q.groupByStatus,tags:Q.groupByTags};var xn=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new tn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=ze.by(this,e).slice(0,this.limit);return Pr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=Ua(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var za=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return ne(this,null,function*(){n.addChild(new Cd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Cd=class extends Ka.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new xn({source:s}),this.queryType="tasks";break;default:this.query=new xn({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new xn({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return ne(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return ne(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{gs({originalTask:n,newTasks:u})};new Mn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return ne(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield Ka.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var Bt=require("obsidian");var Va=class extends Bt.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new Bt.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ie();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>ne(this,null,function*(){kt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new Bt.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ie();n.setValue(i.removeGlobalFilter).onChange(s=>ne(this,null,function*(){kt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new Bt.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ie();n.setValue(i.setDoneDate).onChange(s=>ne(this,null,function*(){kt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new Bt.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ie();n.setValue(i.autoSuggestInEditor).onChange(s=>ne(this,null,function*(){kt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new Bt.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ie();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>ne(this,null,function*(){kt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new Bt.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ie();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>ne(this,null,function*(){kt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))}),new Bt.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(n=>{let i=ie();n.setValue(i.provideAccessKeys).onChange(s=>ne(this,null,function*(){kt({provideAccessKeys:s}),yield this.plugin.saveSettings()}))})}};var E_=require("obsidian");var iA=`${St}${xt}${It}`;function v_(r,e,t){let n=[];n=n.concat(oA(r,e,t)),n=n.concat(uA(r,e,t));let i=aA(r,t),s=Sd(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function sA(r){if(Object.values(Ee).some(e=>e.length>0&&r.includes(e)))return!0}function aA(r,e){let t=[];return r.includes(It)||t.push({displayText:`${It} due date`,appendText:`${It} `}),r.includes(St)||t.push({displayText:`${St} start date`,appendText:`${St} `}),r.includes(xt)||t.push({displayText:`${xt} scheduled date`,appendText:`${xt} `}),sA(r)||(t.push({displayText:`${Ee.High} high priority`,appendText:`${Ee.High} `}),t.push({displayText:`${Ee.Medium} medium priority`,appendText:`${Ee.Medium} `}),t.push({displayText:`${Ee.Low} low priority`,appendText:`${Ee.Low} `})),r.includes(Ct)||t.push({displayText:`${Ct} recurring (repeat)`,appendText:`${Ct} `}),t}function oA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${iA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Sd(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?or.parseDate(Rn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(M.dateFormat)}`,appendText:`${o} ${l.format(M.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${or.parseDate(h,!0).format(M.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function uA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Ct})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Sd(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=Re.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let y=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Sd(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Za=class extends E_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(M.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=v_(n,i.ch,this.settings),a=[];for(let o of s)a.push(zt($e({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Xa=class extends w_.Plugin{onload(){return ne(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Va({plugin:this})),rf({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new Ea({obsidianEvents:this.app.workspace});this.cache=new gr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new wa({plugin:this}),this.queryRenderer=new za({plugin:this,events:t}),this.registerEditorExtension(a_()),this.registerEditorSuggest(new Za(this.app,ie())),new va({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return ne(this,null,function*(){let t=yield this.loadData();kt(t)})}saveSettings(){return ne(this,null,function*(){yield this.saveData(ie())})}};
