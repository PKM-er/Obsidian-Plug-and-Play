/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var F_=Object.create;var Wn=Object.defineProperty,U_=Object.defineProperties,q_=Object.getOwnPropertyDescriptor,W_=Object.getOwnPropertyDescriptors,L_=Object.getOwnPropertyNames,uf=Object.getOwnPropertySymbols,Y_=Object.getPrototypeOf,cf=Object.prototype.hasOwnProperty,$_=Object.prototype.propertyIsEnumerable;var lf=(r,e,t)=>e in r?Wn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Le=(r,e)=>{for(var t in e||(e={}))cf.call(e,t)&&lf(r,t,e[t]);if(uf)for(var t of uf(e))$_.call(e,t)&&lf(r,t,e[t]);return r},$t=(r,e)=>U_(r,W_(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),j_=(r,e)=>{for(var t in e)Wn(r,t,{get:e[t],enumerable:!0})},df=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of L_(e))!cf.call(r,i)&&i!==t&&Wn(r,i,{get:()=>e[i],enumerable:!(n=q_(e,i))||n.enumerable});return r};var ys=(r,e,t)=>(t=r!=null?F_(Y_(r)):{},df(e||!r||!r.__esModule?Wn(t,"default",{value:r,enumerable:!0}):t,r)),B_=r=>df(Wn({},"__esModule",{value:!0}),r);var se=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Lf=p((YA,ws)=>{var Tf,bf,vf,Ef,wf,Rf,Mf,Df,Of,vs,oo,Pf,Af,kf,rn,Nf,Cf,Sf,xf,If,Ff,Uf,qf,Wf,Es;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof ws=="object"&&typeof ws.exports=="object"?r(t(e,t(ws.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};Tf=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},bf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},vf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},Ef=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},wf=function(n,i){return function(s,a){i(s,a,n)}},Rf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},Mf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(g){l(g)}}function d(h){try{f(a.throw(h))}catch(g){l(g)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},Df=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Of=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Es(i,n,s)},Es=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},vs=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},oo=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},Pf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(oo(arguments[i]));return n},Af=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},kf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},rn=function(n){return this instanceof rn?(this.v=n,this):new rn(n)},Nf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(y){a[y]&&(o[y]=function(_){return new Promise(function(P,A){u.push([y,_,P,A])>1||c(y,_)})})}function c(y,_){try{d(a[y](_))}catch(P){g(u[0][3],P)}}function d(y){y.value instanceof rn?Promise.resolve(y.value.v).then(f,h):g(u[0][2],y)}function f(y){c("next",y)}function h(y){c("throw",y)}function g(y,_){y(_),u.shift(),u.length&&c(u[0][0],u[0][1])}},Cf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:rn(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Sf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof vs=="function"?vs(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},xf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};If=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Es(i,n,s);return t(i,n),i},Ff=function(n){return n&&n.__esModule?n:{default:n}},Uf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},qf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},Wf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",Tf),r("__assign",bf),r("__rest",vf),r("__decorate",Ef),r("__param",wf),r("__metadata",Rf),r("__awaiter",Mf),r("__generator",Df),r("__exportStar",Of),r("__createBinding",Es),r("__values",vs),r("__read",oo),r("__spread",Pf),r("__spreadArrays",Af),r("__spreadArray",kf),r("__await",rn),r("__asyncGenerator",Nf),r("__asyncDelegator",Cf),r("__asyncValues",Sf),r("__makeTemplateObject",xf),r("__importStar",If),r("__importDefault",Ff),r("__classPrivateFieldGet",Uf),r("__classPrivateFieldSet",qf),r("__classPrivateFieldIn",Wf)})});var ne=p(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.matchAnyPattern=Tr.extractTerms=Tr.repeatedTimeunitPattern=void 0;function FT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Tr.repeatedTimeunitPattern=FT;function xp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Tr.extractTerms=xp;function UT(r){return`(?:${xp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Tr.matchAnyPattern=UT});var Z=p((bo,vo)=>{(function(r,e){typeof bo=="object"&&typeof vo!="undefined"?vo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(bo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},P=function(O,b,T){var v=String(O);return!v||v.length>=b?O:""+Array(b+1-v.length).join(T)+O},A={s:P,z:function(O){var b=-O.utcOffset(),T=Math.abs(b),v=Math.floor(T/60),E=T%60;return(b<=0?"+":"-")+P(v,2,"0")+":"+P(E,2,"0")},m:function O(b,T){if(b.date()<T.date())return-O(T,b);var v=12*(T.year()-b.year())+(T.month()-b.month()),E=b.clone().add(v,l),x=T-E<0,I=b.clone().add(v+(x?-1:1),l);return+(-(v+(T-E)/(x?E-I:I-E))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},N="en",H={};H[N]=_;var Y=function(O){return O instanceof yt},oe=function(O,b,T){var v;if(!O)return N;if(typeof O=="string")H[O]&&(v=O),b&&(H[O]=b,v=O);else{var E=O.name;H[E]=O,v=E}return!T&&v&&(N=v),v||!T&&N},Q=function(O,b){if(Y(O))return O.clone();var T=typeof b=="object"?b:{};return T.date=O,T.args=arguments,new yt(T)},$=A;$.l=oe,$.i=Y,$.w=function(O,b){return Q(O,{locale:b.$L,utc:b.$u,x:b.$x,$offset:b.$offset})};var yt=function(){function O(T){this.$L=oe(T.locale,null,!0),this.parse(T)}var b=O.prototype;return b.parse=function(T){this.$d=function(v){var E=v.date,x=v.utc;if(E===null)return new Date(NaN);if($.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var I=E.match(g);if(I){var F=I[2]-1||0,re=(I[7]||"0").substring(0,3);return x?new Date(Date.UTC(I[1],F,I[3]||1,I[4]||0,I[5]||0,I[6]||0,re)):new Date(I[1],F,I[3]||1,I[4]||0,I[5]||0,I[6]||0,re)}}return new Date(E)}(T),this.$x=T.x||{},this.init()},b.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},b.$utils=function(){return $},b.isValid=function(){return this.$d.toString()!==h},b.isSame=function(T,v){var E=Q(T);return this.startOf(v)<=E&&E<=this.endOf(v)},b.isAfter=function(T,v){return Q(T)<this.startOf(v)},b.isBefore=function(T,v){return this.endOf(v)<Q(T)},b.$g=function(T,v,E){return $.u(T)?this[v]:this.set(E,T)},b.unix=function(){return Math.floor(this.valueOf()/1e3)},b.valueOf=function(){return this.$d.getTime()},b.startOf=function(T,v){var E=this,x=!!$.u(v)||v,I=$.p(T),F=function(Lt,fe){var Xe=$.w(E.$u?Date.UTC(E.$y,fe,Lt):new Date(E.$y,fe,Lt),E);return x?Xe:Xe.endOf(o)},re=function(Lt,fe){return $.w(E.toDate()[Lt].apply(E.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(fe)),E)},J=this.$W,ce=this.$M,Ze=this.$D,je="set"+(this.$u?"UTC":"");switch(I){case d:return x?F(1,0):F(31,11);case l:return x?F(1,ce):F(0,ce+1);case u:var cr=this.$locale().weekStart||0,dr=(J<cr?J+7:J)-cr;return F(x?Ze-dr:Ze+(6-dr),ce);case o:case f:return re(je+"Hours",0);case a:return re(je+"Minutes",1);case s:return re(je+"Seconds",2);case i:return re(je+"Milliseconds",3);default:return this.clone()}},b.endOf=function(T){return this.startOf(T,!1)},b.$set=function(T,v){var E,x=$.p(T),I="set"+(this.$u?"UTC":""),F=(E={},E[o]=I+"Date",E[f]=I+"Date",E[l]=I+"Month",E[d]=I+"FullYear",E[a]=I+"Hours",E[s]=I+"Minutes",E[i]=I+"Seconds",E[n]=I+"Milliseconds",E)[x],re=x===o?this.$D+(v-this.$W):v;if(x===l||x===d){var J=this.clone().set(f,1);J.$d[F](re),J.init(),this.$d=J.set(f,Math.min(this.$D,J.daysInMonth())).$d}else F&&this.$d[F](re);return this.init(),this},b.set=function(T,v){return this.clone().$set(T,v)},b.get=function(T){return this[$.p(T)]()},b.add=function(T,v){var E,x=this;T=Number(T);var I=$.p(v),F=function(ce){var Ze=Q(x);return $.w(Ze.date(Ze.date()+Math.round(ce*T)),x)};if(I===l)return this.set(l,this.$M+T);if(I===d)return this.set(d,this.$y+T);if(I===o)return F(1);if(I===u)return F(7);var re=(E={},E[s]=e,E[a]=t,E[i]=r,E)[I]||1,J=this.$d.getTime()+T*re;return $.w(J,this)},b.subtract=function(T,v){return this.add(-1*T,v)},b.format=function(T){var v=this,E=this.$locale();if(!this.isValid())return E.invalidDate||h;var x=T||"YYYY-MM-DDTHH:mm:ssZ",I=$.z(this),F=this.$H,re=this.$m,J=this.$M,ce=E.weekdays,Ze=E.months,je=function(fe,Xe,Qr,Be){return fe&&(fe[Xe]||fe(v,x))||Qr[Xe].substr(0,Be)},cr=function(fe){return $.s(F%12||12,fe,"0")},dr=E.meridiem||function(fe,Xe,Qr){var Be=fe<12?"AM":"PM";return Qr?Be.toLowerCase():Be},Lt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:J+1,MM:$.s(J+1,2,"0"),MMM:je(E.monthsShort,J,Ze,3),MMMM:je(Ze,J),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:je(E.weekdaysMin,this.$W,ce,2),ddd:je(E.weekdaysShort,this.$W,ce,3),dddd:ce[this.$W],H:String(F),HH:$.s(F,2,"0"),h:cr(1),hh:cr(2),a:dr(F,re,!0),A:dr(F,re,!1),m:String(re),mm:$.s(re,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:I};return x.replace(y,function(fe,Xe){return Xe||Lt[fe]||I.replace(":","")})},b.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},b.diff=function(T,v,E){var x,I=$.p(v),F=Q(T),re=(F.utcOffset()-this.utcOffset())*e,J=this-F,ce=$.m(this,F);return ce=(x={},x[d]=ce/12,x[l]=ce,x[c]=ce/3,x[u]=(J-re)/6048e5,x[o]=(J-re)/864e5,x[a]=J/t,x[s]=J/e,x[i]=J/r,x)[I]||J,E?ce:$.a(ce)},b.daysInMonth=function(){return this.endOf(l).$D},b.$locale=function(){return H[this.$L]},b.locale=function(T,v){if(!T)return this.$L;var E=this.clone(),x=oe(T,v,!0);return x&&(E.$L=x),E},b.clone=function(){return $.w(this.$d,this)},b.toDate=function(){return new Date(this.valueOf())},b.toJSON=function(){return this.isValid()?this.toISOString():null},b.toISOString=function(){return this.$d.toISOString()},b.toString=function(){return this.$d.toUTCString()},O}(),st=yt.prototype;return Q.prototype=st,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(O){st[O[1]]=function(b){return this.$g(b,O[0],O[1])}}),Q.extend=function(O,b){return O.$i||(O(b,yt,Q),O.$i=!0),Q},Q.locale=oe,Q.isDayjs=Y,Q.unix=function(O){return Q(1e3*O)},Q.en=H[N],Q.Ls=H,Q.p={},Q})});var Se=p(br=>{"use strict";var qT=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.findYearClosestToRef=br.findMostLikelyADYear=void 0;var WT=qT(Z());function LT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}br.findMostLikelyADYear=LT;function YT(r,e,t){let n=WT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}br.findYearClosestToRef=YT});var xe=p(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parseTimeUnits=W.TIME_UNITS_PATTERN=W.parseYear=W.YEAR_PATTERN=W.parseOrdinalNumberPattern=W.ORDINAL_NUMBER_PATTERN=W.parseNumberPattern=W.NUMBER_PATTERN=W.TIME_UNIT_DICTIONARY=W.ORDINAL_WORD_DICTIONARY=W.INTEGER_WORD_DICTIONARY=W.MONTH_DICTIONARY=W.FULL_MONTH_NAME_DICTIONARY=W.WEEKDAY_DICTIONARY=void 0;var Ns=ne(),$T=Se();W.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};W.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};W.MONTH_DICTIONARY=Object.assign(Object.assign({},W.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});W.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};W.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};W.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};W.NUMBER_PATTERN=`(?:${Ns.matchAnyPattern(W.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Fp(r){let e=r.toLowerCase();return W.INTEGER_WORD_DICTIONARY[e]!==void 0?W.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}W.parseNumberPattern=Fp;W.ORDINAL_NUMBER_PATTERN=`(?:${Ns.matchAnyPattern(W.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function jT(r){let e=r.toLowerCase();return W.ORDINAL_WORD_DICTIONARY[e]!==void 0?W.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}W.parseOrdinalNumberPattern=jT;W.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function BT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return $T.findMostLikelyADYear(e)}W.parseYear=BT;var Up=`(${W.NUMBER_PATTERN})\\s{0,3}(${Ns.matchAnyPattern(W.TIME_UNIT_DICTIONARY)})`,Ip=new RegExp(Up,"i");W.TIME_UNITS_PATTERN=Ns.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Up);function GT(r){let e={},t=r,n=Ip.exec(t);for(;n;)HT(e,n),t=t.substring(n[0].length).trim(),n=Ip.exec(t);return e}W.parseTimeUnits=GT;function HT(r,e){let t=Fp(e[1]),n=W.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var qp=p((Eo,wo)=>{(function(r,e){typeof Eo=="object"&&typeof wo!="undefined"?wo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Eo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var ut=p(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.implySimilarTime=St.assignSimilarTime=St.assignSimilarDate=St.assignTheNextDay=void 0;var Wp=Ee();function zT(r,e){e=e.add(1,"day"),Lp(r,e),Yp(r,e)}St.assignTheNextDay=zT;function Lp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}St.assignSimilarDate=Lp;function KT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",Wp.Meridiem.AM):r.assign("meridiem",Wp.Meridiem.PM)}St.assignSimilarTime=KT;function Yp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}St.implySimilarTime=Yp});var $p=p(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.toTimezoneOffset=Ur.TIMEZONE_ABBR_MAP=void 0;Ur.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function VT(r){var e;return r==null?null:typeof r=="number"?r:(e=Ur.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Ur.toTimezoneOffset=VT});var pe=p(xt=>{"use strict";var jp=xt&&xt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xt,"__esModule",{value:!0});xt.ParsingResult=xt.ParsingComponents=xt.ReferenceWithTimezone=void 0;var ZT=jp(qp()),Cs=jp(Z()),Ro=ut(),XT=$p();Cs.default.extend(ZT.default);var Mo=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=XT.toTimezoneOffset(e.timezone))}};xt.ReferenceWithTimezone=Mo;var qr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Cs.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new qr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Cs.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Cs.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new qr(e);return t.hour||t.minute||t.second?(Ro.assignSimilarTime(i,n),Ro.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Ro.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};xt.ParsingComponents=qr;var Zn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new qr(e),this.end=s}clone(){let e=new Zn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};xt.ParsingResult=Zn});var R=p(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.AbstractParserWithWordBoundaryChecking=void 0;var Do=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ss.AbstractParserWithWordBoundaryChecking=Do});var Bp=p(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});var Po=xe(),QT=pe(),JT=R(),eb=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),tb=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Oo=class extends JT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?tb:eb}innerExtract(e,t){let n=Po.parseTimeUnits(t[1]);return QT.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ao.default=Oo});var Zp=p(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var rb=Se(),Kp=xe(),Vp=xe(),xs=xe(),nb=ne(),ib=R(),sb=new RegExp(`(?:on\\s{0,3})?(${xs.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${xs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${nb.matchAnyPattern(Kp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Vp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Gp=1,Hp=2,ab=3,zp=4,ko=class extends ib.AbstractParserWithWordBoundaryChecking{innerPattern(){return sb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Kp.MONTH_DICTIONARY[t[ab].toLowerCase()],s=xs.parseOrdinalNumberPattern(t[Gp]);if(s>31)return t.index=t.index+t[Gp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[zp]){let a=Vp.parseYear(t[zp]);n.start.assign("year",a)}else{let a=rb.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Hp]){let a=xs.parseOrdinalNumberPattern(t[Hp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};No.default=ko});var th=p(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var ob=Se(),Jp=xe(),Is=xe(),eh=xe(),ub=ne(),lb=R(),cb=new RegExp(`(${ub.matchAnyPattern(Jp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Is.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Is.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${eh.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),db=1,fb=2,Xp=3,Qp=4,Co=class extends lb.AbstractParserWithWordBoundaryChecking{innerPattern(){return cb}innerExtract(e,t){let n=Jp.MONTH_DICTIONARY[t[db].toLowerCase()],i=Is.parseOrdinalNumberPattern(t[fb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Qp]){let u=eh.parseYear(t[Qp]);s.assign("year",u)}else{let u=ob.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Xp])return s;let a=Is.parseOrdinalNumberPattern(t[Xp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};So.default=Co});var ih=p(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var xo=xe(),pb=Se(),hb=ne(),nh=xe(),mb=R(),yb=new RegExp(`((?:in)\\s*)?(${hb.matchAnyPattern(xo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${nh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),gb=1,_b=2,rh=3,Io=class extends mb.AbstractParserWithWordBoundaryChecking{innerPattern(){return yb}innerExtract(e,t){let n=t[_b].toLowerCase();if(t[0].length<=3&&!xo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[gb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=xo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[rh]){let a=nh.parseYear(t[rh]);i.start.assign("year",a)}else{let a=pb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Fo.default=Io});var oh=p(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var ah=xe(),Tb=ne(),bb=R(),vb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Tb.matchAnyPattern(ah.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Eb=1,wb=2,sh=3,Rb=4,Uo=class extends bb.AbstractParserWithWordBoundaryChecking{innerPattern(){return vb}innerExtract(e,t){let n=t[sh]?parseInt(t[sh]):ah.MONTH_DICTIONARY[t[wb].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Eb]);return{day:parseInt(t[Rb]),month:n,year:i}}};qo.default=Uo});var uh=p(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Mb=R(),Db=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Ob=1,Pb=2,Wo=class extends Mb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Db}innerExtract(e,t){let n=parseInt(t[Pb]),i=parseInt(t[Ob]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Lo.default=Wo});var Wr=p(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.AbstractTimeExpressionParser=void 0;var $e=Ee();function Ab(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function kb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var lh=2,ln=3,Fs=4,Us=5,Xn=6,Yo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[lh]);if(o>100){if(this.strictMode||t[ln]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[ln]!=null){if(t[ln].length==1&&!t[Xn])return null;s=parseInt(t[ln])}if(s>=60)return null;if(o>12&&(a=$e.Meridiem.PM),t[Xn]!=null){if(o>12)return null;let u=t[Xn][0].toLowerCase();u=="a"&&(a=$e.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=$e.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",$e.Meridiem.AM):i.imply("meridiem",$e.Meridiem.PM),t[Us]!=null){let u=parseInt(t[Us].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Fs]!=null){let u=parseInt(t[Fs]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Us]!=null){let u=parseInt(t[Us].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Fs]!=null){let u=parseInt(t[Fs]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[lh]),a=0,o=-1;if(t[ln]!=null?a=parseInt(t[ln]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=$e.Meridiem.PM),t[Xn]!=null){if(s>12)return null;let u=t[Xn][0].toLowerCase();u=="a"&&(o=$e.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=$e.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==$e.Meridiem.AM?(n.start.imply("meridiem",$e.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",$e.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",$e.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",$e.Meridiem.PM)):s>12?i.imply("meridiem",$e.Meridiem.PM):s<=12&&i.imply("meridiem",$e.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Ab(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=kb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};qs.AbstractTimeExpressionParser=Yo});var ch=p(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var Ws=Ee(),Nb=Wr(),$o=class extends Nb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ws.Meridiem.PM)):i<6&&n.assign("meridiem",Ws.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Ws.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Ws.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};jo.default=$o});var lt=p(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});cn.addImpliedTimeUnits=cn.reverseTimeUnits=void 0;function Cb(r){let e={};for(let t in r)e[t]=-r[t];return e}cn.reverseTimeUnits=Cb;function Sb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}cn.addImpliedTimeUnits=Sb});var dh=p(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var Go=xe(),xb=pe(),Ib=R(),Fb=lt(),Ub=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),qb=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Bo=class extends Ib.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?qb:Ub}innerExtract(e,t){let n=Go.parseTimeUnits(t[1]),i=Fb.reverseTimeUnits(n);return xb.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ho.default=Bo});var fh=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Ko=xe(),Wb=pe(),Lb=R(),Yb=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),$b=new RegExp("("+Ko.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),jb=1,zo=class extends Lb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?$b:Yb}innerExtract(e,t){let n=Ko.parseTimeUnits(t[jb]);return Wb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Vo.default=zo});var fn=p(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.MergingRefiner=dn.Filter=void 0;var Zo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};dn.Filter=Zo;var Xo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};dn.MergingRefiner=Xo});var It=p(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Bb=fn(),Qo=class extends Bb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Jo.default=Qo});var ph=p(Qn=>{"use strict";var Gb=Qn&&Qn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qn,"__esModule",{value:!0});var Hb=Gb(It()),eu=class extends Hb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Qn.default=eu});var hh=p(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.mergeDateTimeComponent=pn.mergeDateTimeResult=void 0;var zb=Ee();function Kb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=tu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=tu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}pn.mergeDateTimeResult=Kb;function tu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==zb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}pn.mergeDateTimeComponent=tu});var Kt=p(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var Vb=fn(),mh=hh(),ru=class extends Vb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?mh.mergeDateTimeResult(t,n):mh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};nu.default=ru});var yh=p(Jn=>{"use strict";var Zb=Jn&&Jn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jn,"__esModule",{value:!0});var Xb=Zb(Kt()),iu=class extends Xb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Jn.default=iu});var gh=p(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Qb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Jb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},su=class{constructor(e){this.timezone=Object.assign(Object.assign({},Jb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Qb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};au.default=su});var Ls=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var e1=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),t1=1,r1=2,n1=3,ou=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=e1.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[r1]),o=parseInt(s[n1]||"0"),u=a*60+o;u>14*60||(s[t1]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};uu.default=ou});var _h=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var lu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};cu.default=lu});var Th=p(ei=>{"use strict";var i1=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var s1=i1(Z()),du=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=s1.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};ei.default=du});var bh=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var a1=fn(),fu=class extends a1.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};pu.default=fu});var yu=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var o1=R(),u1=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),l1=1,c1=2,d1=3,vh=4,f1=5,Eh=6,wh=7,Rh=8,Mh=9,hu=class extends o1.AbstractParserWithWordBoundaryChecking{innerPattern(){return u1}innerExtract(e,t){let n={};if(n.year=parseInt(t[l1]),n.month=parseInt(t[c1]),n.day=parseInt(t[d1]),t[vh]!=null)if(n.hour=parseInt(t[vh]),n.minute=parseInt(t[f1]),t[Eh]!=null&&(n.second=parseInt(t[Eh])),t[wh]!=null&&(n.millisecond=parseInt(t[wh])),t[Rh]==null)n.timezoneOffset=0;else{let i=parseInt(t[Rh]),s=0;t[Mh]!=null&&(s=parseInt(t[Mh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};mu.default=hu});var Dh=p(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var p1=fn(),gu=class extends p1.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};_u.default=gu});var Vt=p(hn=>{"use strict";var Lr=hn&&hn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hn,"__esModule",{value:!0});hn.includeCommonConfiguration=void 0;var h1=Lr(gh()),m1=Lr(Ls()),Oh=Lr(_h()),y1=Lr(Th()),g1=Lr(bh()),_1=Lr(yu()),T1=Lr(Dh());function b1(r,e=!1){return r.parsers.unshift(new _1.default),r.refiners.unshift(new T1.default),r.refiners.unshift(new h1.default),r.refiners.unshift(new m1.default),r.refiners.unshift(new Oh.default),r.refiners.push(new Oh.default),r.refiners.push(new y1.default),r.refiners.push(new g1.default(e)),r}hn.includeCommonConfiguration=b1});var Xt=p(te=>{"use strict";var v1=te&&te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(te,"__esModule",{value:!0});te.noon=te.morning=te.midnight=te.yesterdayEvening=te.evening=te.lastNight=te.tonight=te.theDayAfter=te.tomorrow=te.theDayBefore=te.yesterday=te.today=te.now=void 0;var Ft=pe(),mn=v1(Z()),Zt=ut(),ti=Ee();function E1(r){let e=mn.default(r.instant),t=new Ft.ParsingComponents(r,{});return Zt.assignSimilarDate(t,e),Zt.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}te.now=E1;function w1(r){let e=mn.default(r.instant),t=new Ft.ParsingComponents(r,{});return Zt.assignSimilarDate(t,e),Zt.implySimilarTime(t,e),t}te.today=w1;function R1(r){return Ph(r,1)}te.yesterday=R1;function Ph(r,e){return Tu(r,-e)}te.theDayBefore=Ph;function M1(r){return Tu(r,1)}te.tomorrow=M1;function Tu(r,e){let t=mn.default(r.instant),n=new Ft.ParsingComponents(r,{});return t=t.add(e,"day"),Zt.assignSimilarDate(n,t),Zt.implySimilarTime(n,t),n}te.theDayAfter=Tu;function D1(r,e=22){let t=mn.default(r.instant),n=new Ft.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ti.Meridiem.PM),Zt.assignSimilarDate(n,t),n}te.tonight=D1;function O1(r,e=0){let t=mn.default(r.instant),n=new Ft.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Zt.assignSimilarDate(n,t),n.imply("hour",e),n}te.lastNight=O1;function P1(r,e=20){let t=new Ft.ParsingComponents(r,{});return t.imply("meridiem",ti.Meridiem.PM),t.imply("hour",e),t}te.evening=P1;function A1(r,e=20){let t=mn.default(r.instant),n=new Ft.ParsingComponents(r,{});return t=t.add(-1,"day"),Zt.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ti.Meridiem.PM),n}te.yesterdayEvening=A1;function k1(r){let e=new Ft.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}te.midnight=k1;function N1(r,e=6){let t=new Ft.ParsingComponents(r,{});return t.imply("meridiem",ti.Meridiem.AM),t.imply("hour",e),t}te.morning=N1;function C1(r){let e=new Ft.ParsingComponents(r,{});return e.imply("meridiem",ti.Meridiem.AM),e.imply("hour",12),e}te.noon=C1});var Ah=p(Tt=>{"use strict";var S1=Tt&&Tt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),x1=Tt&&Tt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),I1=Tt&&Tt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&S1(e,r,t);return x1(e,r),e},F1=Tt&&Tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tt,"__esModule",{value:!0});var U1=F1(Z()),q1=R(),W1=ut(),ri=I1(Xt()),L1=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,bu=class extends q1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return L1}innerExtract(e,t){let n=U1.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return ri.now(e.reference);case"today":return ri.today(e.reference);case"yesterday":return ri.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return ri.tomorrow(e.reference);case"tonight":return ri.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),W1.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Tt.default=bu});var kh=p(ni=>{"use strict";var Y1=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var Ys=Ee(),$1=R(),j1=Y1(Z()),B1=ut(),G1=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,vu=class extends $1.AbstractParserWithWordBoundaryChecking{innerPattern(){return G1}innerExtract(e,t){let n=j1.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ys.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ys.Meridiem.PM),i.imply("hour",20);break;case"midnight":B1.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ys.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ys.Meridiem.AM),i.imply("hour",12);break}return i}};ni.default=vu});var Yr=p(vr=>{"use strict";var H1=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});vr.toDayJSClosestWeekday=vr.toDayJSWeekday=void 0;var Nh=H1(Z());function z1(r,e,t){if(!t)return Ch(r,e);let n=Nh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}vr.toDayJSWeekday=z1;function Ch(r,e){let t=Nh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}vr.toDayJSClosestWeekday=Ch});var xh=p(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var Sh=xe(),K1=ne(),V1=R(),Z1=Yr(),X1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${K1.matchAnyPattern(Sh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Q1=1,J1=2,ev=3,Eu=class extends V1.AbstractParserWithWordBoundaryChecking{innerPattern(){return X1}innerExtract(e,t){let n=t[J1].toLowerCase(),i=Sh.WEEKDAY_DICTIONARY[n],s=t[Q1],a=t[ev],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=Z1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};wu.default=Eu});var Uh=p(ii=>{"use strict";var tv=ii&&ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ii,"__esModule",{value:!0});var Fh=xe(),Ih=pe(),rv=tv(Z()),nv=R(),iv=ne(),sv=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${iv.matchAnyPattern(Fh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),av=1,ov=2,Ru=class extends nv.AbstractParserWithWordBoundaryChecking{innerPattern(){return sv}innerExtract(e,t){let n=t[av].toLowerCase(),i=t[ov].toLowerCase(),s=Fh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Ih.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Ih.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=rv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ii.default=Ru});var bt=p(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.ParsingContext=_n.Chrono=void 0;var yn=pe(),uv=Mu(),gn=class{constructor(e){e=e||uv.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new gn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new $s(e,t,n),s=[];return this.parsers.forEach(a=>{let o=gn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof yn.ParsingResult?c=l:l instanceof yn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};_n.Chrono=gn;var $s=class{constructor(e,t,n){this.text=e,this.reference=new yn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof yn.ParsingComponents?e:new yn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new yn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};_n.ParsingContext=$s});var $r=p(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var qh=Se(),lv=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),js=1,Wh=5,Lh=2,Yh=3,Du=4,Ou=class{constructor(e){this.groupNumberMonth=e?Yh:Lh,this.groupNumberDay=e?Lh:Yh}pattern(){return lv}extract(e,t){if(t[js]=="/"||t[Wh]=="/"){t.index+=t[0].length;return}let n=t.index+t[js].length,i=t[0].substr(t[js].length,t[0].length-t[js].length-t[Wh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Du]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Du]){let u=parseInt(t[Du]),l=qh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=qh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Pu.default=Ou});var jh=p(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var $h=xe(),cv=pe(),dv=R(),fv=lt(),pv=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${$h.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Au=class extends dv.AbstractParserWithWordBoundaryChecking{innerPattern(){return pv}innerExtract(e,t){let n=t[1].toLowerCase(),i=$h.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=fv.reverseTimeUnits(i);break}return cv.ParsingComponents.createRelativeFromReference(e.reference,i)}};ku.default=Au});var Gh=p(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});var hv=fn(),Nu=pe(),mv=xe(),yv=lt();function Bh(r){return r.text.match(/\s+(before|from)$/i)!=null}function gv(r){return r.text.match(/\s+(after|since)$/i)!=null}var Cu=class extends hv.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!Bh(t)&&!gv(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=mv.parseTimeUnits(t.text);Bh(t)&&(i=yv.reverseTimeUnits(i));let s=Nu.ParsingComponents.createRelativeFromReference(new Nu.ReferenceWithTimezone(n.start.date()),i);return new Nu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Su.default=Cu});var Mu=p(ge=>{"use strict";var Me=ge&&ge.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ge,"__esModule",{value:!0});ge.createConfiguration=ge.createCasualConfiguration=ge.parseDate=ge.parse=ge.GB=ge.strict=ge.casual=void 0;var _v=Me(Bp()),Tv=Me(Zp()),bv=Me(th()),vv=Me(ih()),Ev=Me(oh()),wv=Me(uh()),Rv=Me(ch()),Mv=Me(dh()),Dv=Me(fh()),Ov=Me(ph()),Pv=Me(yh()),Av=Vt(),kv=Me(Ah()),Nv=Me(kh()),Cv=Me(xh()),Sv=Me(Uh()),xu=bt(),xv=Me($r()),Iv=Me(jh()),Fv=Me(Gh());ge.casual=new xu.Chrono(Hh(!1));ge.strict=new xu.Chrono(Bs(!0,!1));ge.GB=new xu.Chrono(Bs(!1,!0));function Uv(r,e,t){return ge.casual.parse(r,e,t)}ge.parse=Uv;function qv(r,e,t){return ge.casual.parseDate(r,e,t)}ge.parseDate=qv;function Hh(r=!1){let e=Bs(!1,r);return e.parsers.unshift(new kv.default),e.parsers.unshift(new Nv.default),e.parsers.unshift(new vv.default),e.parsers.unshift(new Sv.default),e.parsers.unshift(new Iv.default),e}ge.createCasualConfiguration=Hh;function Bs(r=!0,e=!1){return Av.includeCommonConfiguration({parsers:[new xv.default(e),new _v.default,new Tv.default,new bv.default,new Cv.default,new Ev.default,new wv.default,new Rv.default(r),new Mv.default(r),new Dv.default(r)],refiners:[new Fv.default,new Pv.default,new Ov.default]},r)}ge.createConfiguration=Bs});var zh=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var Wv=Wr(),Iu=class extends Wv.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Fu.default=Iu});var si=p(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.parseTimeUnits=ie.TIME_UNITS_PATTERN=ie.parseYear=ie.YEAR_PATTERN=ie.parseNumberPattern=ie.NUMBER_PATTERN=ie.TIME_UNIT_DICTIONARY=ie.INTEGER_WORD_DICTIONARY=ie.MONTH_DICTIONARY=ie.WEEKDAY_DICTIONARY=void 0;var Uu=ne(),Lv=Se();ie.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ie.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ie.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ie.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ie.NUMBER_PATTERN=`(?:${Uu.matchAnyPattern(ie.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Vh(r){let e=r.toLowerCase();return ie.INTEGER_WORD_DICTIONARY[e]!==void 0?ie.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ie.parseNumberPattern=Vh;ie.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function Yv(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return Lv.findMostLikelyADYear(e)}ie.parseYear=Yv;var Zh=`(${ie.NUMBER_PATTERN})\\s{0,5}(${Uu.matchAnyPattern(ie.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Kh=new RegExp(Zh,"i");ie.TIME_UNITS_PATTERN=Uu.repeatedTimeunitPattern("",Zh);function $v(r){let e={},t=r,n=Kh.exec(t);for(;n;)jv(e,n),t=t.substring(n[0].length),n=Kh.exec(t);return e}ie.parseTimeUnits=$v;function jv(r,e){let t=Vh(e[1]),n=ie.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Qh=p(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Xh=si(),Bv=ne(),Gv=R(),Hv=Yr(),zv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${Bv.matchAnyPattern(Xh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),Kv=1,Vv=3,Zv=2,qu=class extends Gv.AbstractParserWithWordBoundaryChecking{innerPattern(){return zv}innerExtract(e,t){let n=t[Zv].toLowerCase(),i=Xh.WEEKDAY_DICTIONARY[n],s=t[Kv],a=t[Vv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=Hv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Wu.default=qu});var rm=p(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var Er=Ee(),Xv=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Qv=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Jv=2,Jh=3,em=4,tm=5,Tn=class{pattern(e){return Xv}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Tn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=Qv.exec(i);return s&&(n.end=Tn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Jv]),t[Jh]!=null&&(i=parseInt(t[Jh])),i>=60||n>24)return null;if(n>=12&&(s=Er.Meridiem.PM),t[tm]!=null){if(n>12)return null;let a=t[tm].toLowerCase();a.match(/morgen|vormittag/)&&(s=Er.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Er.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Er.Meridiem.AM,n=0):n<6?s=Er.Meridiem.AM:(s=Er.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Er.Meridiem.AM):e.imply("meridiem",Er.Meridiem.PM),t[em]!=null){let a=parseInt(t[em]);if(a>=60)return null;e.assign("second",a)}return e}};Lu.default=Tn});var nm=p(ai=>{"use strict";var eE=ai&&ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ai,"__esModule",{value:!0});var tE=eE(It()),Yu=class extends tE.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ai.default=Yu});var im=p(oi=>{"use strict";var rE=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var nE=rE(Kt()),$u=class extends nE.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};oi.default=$u});var ju=p(li=>{"use strict";var iE=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var sE=iE(Z()),jr=Ee(),aE=R(),oE=ut(),uE=lt(),ui=class extends aE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=sE.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return oE.implySimilarTime(s,n),ui.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=uE.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",jr.Meridiem.AM);break}return e}};li.default=ui});var om=p(vt=>{"use strict";var lE=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),cE=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),dE=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&lE(e,r,t);return cE(e,r),e},am=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var fE=am(Z()),pE=R(),Br=ut(),hE=am(ju()),sm=dE(Xt()),mE=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),yE=1,gE=2,Bu=class extends pE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return mE}innerExtract(e,t){let n=fE.default(e.refDate),i=(t[yE]||"").toLowerCase(),s=(t[gE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=sm.now(e.reference);break;case"heute":a=sm.today(e.reference);break;case"morgen":Br.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),Br.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),Br.assignSimilarDate(a,n),Br.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),Br.assignSimilarDate(a,n),Br.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),Br.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=hE.default.extractTimeComponents(a,s)),a}};vt.default=Bu});var pm=p(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var _E=Se(),dm=si(),fm=si(),TE=ne(),bE=R(),vE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${TE.matchAnyPattern(dm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${fm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),um=1,lm=2,EE=3,cm=4,Gu=class extends bE.AbstractParserWithWordBoundaryChecking{innerPattern(){return vE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=dm.MONTH_DICTIONARY[t[EE].toLowerCase()],s=parseInt(t[um]);if(s>31)return t.index=t.index+t[um].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[cm]){let a=fm.parseYear(t[cm]);n.start.assign("year",a)}else{let a=_E.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[lm]){let a=parseInt(t[lm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hu.default=Gu});var hm=p(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var Gs=si(),wE=pe(),RE=R(),ME=lt(),DE=ne(),zu=class extends RE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Gs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${DE.matchAnyPattern(Gs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Gs.parseNumberPattern(t[2]):1,i=Gs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=ME.reverseTimeUnits(s)),wE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Ku.default=zu});var gm=p(De=>{"use strict";var Et=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var OE=Vt(),mm=bt(),PE=Et($r()),AE=Et(yu()),kE=Et(zh()),NE=Et(Qh()),CE=Et(rm()),SE=Et(nm()),xE=Et(im()),IE=Et(om()),FE=Et(ju()),UE=Et(pm()),qE=Et(hm());De.casual=new mm.Chrono(ym());De.strict=new mm.Chrono(Vu(!0));function WE(r,e,t){return De.casual.parse(r,e,t)}De.parse=WE;function LE(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=LE;function ym(r=!0){let e=Vu(!1,r);return e.parsers.unshift(new FE.default),e.parsers.unshift(new IE.default),e.parsers.unshift(new qE.default),e}De.createCasualConfiguration=ym;function Vu(r=!0,e=!0){return OE.includeCommonConfiguration({parsers:[new AE.default,new PE.default(e),new kE.default,new CE.default,new UE.default,new NE.default],refiners:[new SE.default,new xE.default]},r)}De.createConfiguration=Vu});var Tm=p(wt=>{"use strict";var YE=wt&&wt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),$E=wt&&wt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),jE=wt&&wt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&YE(e,r,t);return $E(e,r),e},BE=wt&&wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wt,"__esModule",{value:!0});var GE=BE(Z()),HE=Ee(),zE=R(),_m=ut(),Hs=jE(Xt()),Zu=class extends zE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=GE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Hs.now(e.reference);case"aujourd'hui":return Hs.today(e.reference);case"hier":return Hs.yesterday(e.reference);case"demain":return Hs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(_m.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",HE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),_m.assignSimilarDate(s,n),s.imply("hour",0))}return s}};wt.default=Zu});var bm=p(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var ci=Ee(),KE=R(),Xu=class extends KE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",ci.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",ci.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",ci.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",ci.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",ci.Meridiem.AM);break}return i}};Qu.default=Xu});var vm=p(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var VE=Wr(),Ju=class extends VE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};el.default=Ju});var Em=p(di=>{"use strict";var ZE=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var XE=ZE(Kt()),tl=class extends XE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};di.default=tl});var wm=p(fi=>{"use strict";var QE=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var JE=QE(It()),rl=class extends JE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};fi.default=rl});var wr=p(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});X.parseTimeUnits=X.TIME_UNITS_PATTERN=X.parseYear=X.YEAR_PATTERN=X.parseOrdinalNumberPattern=X.ORDINAL_NUMBER_PATTERN=X.parseNumberPattern=X.NUMBER_PATTERN=X.TIME_UNIT_DICTIONARY=X.INTEGER_WORD_DICTIONARY=X.MONTH_DICTIONARY=X.WEEKDAY_DICTIONARY=void 0;var nl=ne();X.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};X.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};X.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};X.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};X.NUMBER_PATTERN=`(?:${nl.matchAnyPattern(X.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function Mm(r){let e=r.toLowerCase();return X.INTEGER_WORD_DICTIONARY[e]!==void 0?X.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}X.parseNumberPattern=Mm;X.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function e0(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}X.parseOrdinalNumberPattern=e0;X.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function t0(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}X.parseYear=t0;var Dm=`(${X.NUMBER_PATTERN})\\s{0,5}(${nl.matchAnyPattern(X.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Rm=new RegExp(Dm,"i");X.TIME_UNITS_PATTERN=nl.repeatedTimeunitPattern("",Dm);function r0(r){let e={},t=r,n=Rm.exec(t);for(;n;)n0(e,n),t=t.substring(n[0].length),n=Rm.exec(t);return e}X.parseTimeUnits=r0;function n0(r,e){let t=Mm(e[1]),n=X.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Pm=p(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var Om=wr(),i0=ne(),s0=R(),a0=Yr(),o0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${i0.matchAnyPattern(Om.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),u0=1,l0=2,il=class extends s0.AbstractParserWithWordBoundaryChecking{innerPattern(){return o0}innerExtract(e,t){let n=t[u0].toLowerCase(),i=Om.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[l0];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=a0.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};sl.default=il});var Cm=p(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var pi=Ee(),c0=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),d0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),f0=2,Am=3,km=4,Nm=5,bn=class{pattern(e){return c0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=bn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=d0.exec(i);return s&&(n.end=bn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[f0]),t[Am]!=null&&(i=parseInt(t[Am])),i>=60||n>24)return null;if(n>=12&&(s=pi.Meridiem.PM),t[Nm]!=null){if(n>12)return null;let a=t[Nm][0].toLowerCase();a=="a"&&(s=pi.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=pi.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",pi.Meridiem.AM):e.imply("meridiem",pi.Meridiem.PM),t[km]!=null){let a=parseInt(t[km]);if(a>=60)return null;e.assign("second",a)}return e}};al.default=bn});var qm=p(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var p0=Se(),Fm=wr(),Um=wr(),zs=wr(),h0=ne(),m0=R(),y0=new RegExp(`(?:on\\s*?)?(${zs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${zs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${h0.matchAnyPattern(Fm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Um.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Sm=1,xm=2,g0=3,Im=4,ol=class extends m0.AbstractParserWithWordBoundaryChecking{innerPattern(){return y0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Fm.MONTH_DICTIONARY[t[g0].toLowerCase()],s=zs.parseOrdinalNumberPattern(t[Sm]);if(s>31)return t.index=t.index+t[Sm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Im]){let a=Um.parseYear(t[Im]);n.start.assign("year",a)}else{let a=p0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[xm]){let a=zs.parseOrdinalNumberPattern(t[xm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ul.default=ol});var Lm=p(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var Wm=wr(),_0=pe(),T0=R(),b0=lt(),ll=class extends T0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${Wm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=Wm.parseTimeUnits(t[1]),i=b0.reverseTimeUnits(n);return _0.ParsingComponents.createRelativeFromReference(e.reference,i)}};cl.default=ll});var $m=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Ym=wr(),v0=pe(),E0=R(),dl=class extends E0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Ym.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Ym.parseTimeUnits(t[1]);return v0.ParsingComponents.createRelativeFromReference(e.reference,n)}};fl.default=dl});var jm=p(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var Ks=wr(),w0=pe(),R0=R(),M0=lt(),D0=ne(),pl=class extends R0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Ks.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${D0.matchAnyPattern(Ks.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Ks.parseNumberPattern(t[1]):1,i=Ks.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=M0.reverseTimeUnits(s)),w0.ParsingComponents.createRelativeFromReference(e.reference,s)}};hl.default=pl});var Hm=p(Oe=>{"use strict";var ct=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var O0=Vt(),Bm=bt(),P0=ct(Tm()),A0=ct(bm()),k0=ct($r()),N0=ct(vm()),C0=ct(Em()),S0=ct(wm()),x0=ct(Pm()),I0=ct(Cm()),F0=ct(qm()),U0=ct(Lm()),q0=ct($m()),W0=ct(jm());Oe.casual=new Bm.Chrono(Gm());Oe.strict=new Bm.Chrono(ml(!0));function L0(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=L0;function Y0(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=Y0;function Gm(r=!0){let e=ml(!1,r);return e.parsers.unshift(new P0.default),e.parsers.unshift(new A0.default),e.parsers.unshift(new W0.default),e}Oe.createCasualConfiguration=Gm;function ml(r=!0,e=!0){return O0.includeCommonConfiguration({parsers:[new k0.default(e),new F0.default,new N0.default,new I0.default,new U0.default,new q0.default,new x0.default],refiners:[new C0.default,new S0.default]},r)}Oe.createConfiguration=ml});var zm=p(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.toHankaku=void 0;function $0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,j0)}Vs.toHankaku=$0;function j0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Vm=p(hi=>{"use strict";var B0=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var yl=zm(),G0=Se(),H0=B0(Z()),z0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Km=1,K0=2,gl=3,V0=4,Z0=5,X0=6,_l=class{pattern(){return z0}extract(e,t){let n=parseInt(yl.toHankaku(t[Z0])),i=parseInt(yl.toHankaku(t[X0])),s=e.createParsingComponents({day:i,month:n});if(t[Km]&&t[Km].match("\u540C|\u4ECA|\u672C")){let a=H0.default(e.refDate);s.assign("year",a.year())}if(t[K0]){let a=t[V0],o=a=="\u5143"?1:parseInt(yl.toHankaku(a));t[gl]=="\u4EE4\u548C"?o+=2018:t[gl]=="\u5E73\u6210"?o+=1988:t[gl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=G0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};hi.default=_l});var Zm=p(mi=>{"use strict";var Q0=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var J0=Q0(It()),Tl=class extends J0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};mi.default=Tl});var Qm=p(Rt=>{"use strict";var ew=Rt&&Rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),tw=Rt&&Rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),rw=Rt&&Rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ew(e,r,t);return tw(e,r),e},nw=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0});var iw=nw(Z()),Xm=Ee(),bl=rw(Xt()),sw=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,vl=class{pattern(){return sw}extract(e,t){let n=t[0],i=iw.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return bl.yesterday(e.reference);case"\u660E\u65E5":return bl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return bl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Xm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Xm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Rt.default=vl});var ty=p(Pe=>{"use strict";var El=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var aw=El(Vm()),ow=El(Zm()),uw=El(Qm()),Jm=bt();Pe.casual=new Jm.Chrono(ey());Pe.strict=new Jm.Chrono(wl());function lw(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=lw;function cw(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=cw;function ey(){let r=wl();return r.parsers.unshift(new uw.default),r}Pe.createCasualConfiguration=ey;function wl(){return{parsers:[new aw.default],refiners:[new ow.default]}}Pe.createConfiguration=wl});var Zs=p(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.parseYear=Ut.YEAR_PATTERN=Ut.MONTH_DICTIONARY=Ut.WEEKDAY_DICTIONARY=void 0;Ut.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};Ut.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};Ut.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function dw(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}Ut.parseYear=dw});var ny=p(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var ry=Zs(),fw=ne(),pw=R(),hw=Yr(),mw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${fw.matchAnyPattern(ry.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),yw=1,gw=2,_w=3,Rl=class extends pw.AbstractParserWithWordBoundaryChecking{innerPattern(){return mw}innerExtract(e,t){let n=t[gw].toLowerCase(),i=ry.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[yw],a=t[_w],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=hw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ml.default=Rl});var iy=p(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var Tw=Wr(),Dl=class extends Tw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Ol.default=Dl});var sy=p(yi=>{"use strict";var bw=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var vw=bw(Kt()),Pl=class extends vw.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};yi.default=Pl});var ay=p(gi=>{"use strict";var Ew=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var ww=Ew(It()),Al=class extends ww.default{patternBetween(){return/^\s*(?:-)\s*$/i}};gi.default=Al});var fy=p(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var Rw=Se(),cy=Zs(),dy=Zs(),Mw=ne(),Dw=R(),Ow=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${Mw.matchAnyPattern(cy.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${dy.YEAR_PATTERN}))?(?=\\W|$)`,"i"),oy=1,uy=2,Pw=3,ly=4,kl=class extends Dw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ow}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=cy.MONTH_DICTIONARY[t[Pw].toLowerCase()],s=parseInt(t[oy]);if(s>31)return t.index=t.index+t[oy].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[ly]){let a=dy.parseYear(t[ly]);n.start.assign("year",a)}else{let a=Rw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[uy]){let a=parseInt(t[uy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Nl.default=kl});var py=p(Qt=>{"use strict";var Aw=Qt&&Qt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),kw=Qt&&Qt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Nw=Qt&&Qt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Aw(e,r,t);return kw(e,r),e};Object.defineProperty(Qt,"__esModule",{value:!0});var Cw=R(),Xs=Nw(Xt()),Cl=class extends Cw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Xs.now(e.reference);case"hoje":return Xs.today(e.reference);case"amanha":case"amanh\xE3":return Xs.tomorrow(e.reference);case"ontem":return Xs.yesterday(e.reference)}return i}};Qt.default=Cl});var hy=p(_i=>{"use strict";var Sw=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var Qs=Ee(),xw=R(),Iw=ut(),Fw=Sw(Z()),Sl=class extends xw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=Fw.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Qs.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Qs.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Qs.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":Iw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Qs.Meridiem.AM),i.imply("hour",12);break}return i}};_i.default=Sl});var gy=p(Ae=>{"use strict";var Rr=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var Uw=Vt(),my=bt(),qw=Rr($r()),Ww=Rr(ny()),Lw=Rr(iy()),Yw=Rr(sy()),$w=Rr(ay()),jw=Rr(fy()),Bw=Rr(py()),Gw=Rr(hy());Ae.casual=new my.Chrono(yy());Ae.strict=new my.Chrono(xl(!0));function Hw(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=Hw;function zw(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=zw;function yy(r=!0){let e=xl(!1,r);return e.parsers.push(new Bw.default),e.parsers.push(new Gw.default),e}Ae.createCasualConfiguration=yy;function xl(r=!0,e=!0){return Uw.includeCommonConfiguration({parsers:[new qw.default(e),new Ww.default,new Lw.default,new jw.default],refiners:[new Yw.default,new $w.default]},r)}Ae.createConfiguration=xl});var _y=p(Ti=>{"use strict";var Kw=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var Vw=Kw(It()),Il=class extends Vw.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Ti.default=Il});var Ty=p(bi=>{"use strict";var Zw=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var Xw=Zw(Kt()),Fl=class extends Xw.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};bi.default=Fl});var by=p(Jt=>{"use strict";var Qw=Jt&&Jt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Jw=Jt&&Jt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eR=Jt&&Jt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Qw(e,r,t);return Jw(e,r),e};Object.defineProperty(Jt,"__esModule",{value:!0});var tR=R(),Js=eR(Xt()),Ul=class extends tR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Js.now(e.reference);case"vandaag":return Js.today(e.reference);case"morgen":case"morgend":return Js.tomorrow(e.reference);case"gisteren":return Js.yesterday(e.reference)}return i}};Jt.default=Ul});var vy=p(vi=>{"use strict";var rR=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var ea=Ee(),nR=R(),iR=rR(Z()),sR=ut(),aR=1,oR=2,ql=class extends nR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=iR.default(e.refDate),i=e.createParsingComponents();switch(t[aR]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[oR].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",ea.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",ea.Meridiem.PM),i.imply("hour",20);break;case"middernacht":sR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",ea.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",ea.Meridiem.AM),i.imply("hour",12);break}return i}};vi.default=ql});var tt=p(B=>{"use strict";Object.defineProperty(B,"__esModule",{value:!0});B.parseTimeUnits=B.TIME_UNITS_PATTERN=B.parseYear=B.YEAR_PATTERN=B.parseOrdinalNumberPattern=B.ORDINAL_NUMBER_PATTERN=B.parseNumberPattern=B.NUMBER_PATTERN=B.TIME_UNIT_DICTIONARY=B.ORDINAL_WORD_DICTIONARY=B.INTEGER_WORD_DICTIONARY=B.MONTH_DICTIONARY=B.WEEKDAY_DICTIONARY=void 0;var ta=ne(),uR=Se();B.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};B.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};B.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};B.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};B.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};B.NUMBER_PATTERN=`(?:${ta.matchAnyPattern(B.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function wy(r){let e=r.toLowerCase();return B.INTEGER_WORD_DICTIONARY[e]!==void 0?B.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}B.parseNumberPattern=wy;B.ORDINAL_NUMBER_PATTERN=`(?:${ta.matchAnyPattern(B.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function lR(r){let e=r.toLowerCase();return B.ORDINAL_WORD_DICTIONARY[e]!==void 0?B.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}B.parseOrdinalNumberPattern=lR;B.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function cR(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return uR.findMostLikelyADYear(e)}B.parseYear=cR;var Ry=`(${B.NUMBER_PATTERN})\\s{0,5}(${ta.matchAnyPattern(B.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Ey=new RegExp(Ry,"i");B.TIME_UNITS_PATTERN=ta.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Ry);function dR(r){let e={},t=r,n=Ey.exec(t);for(;n;)fR(e,n),t=t.substring(n[0].length),n=Ey.exec(t);return e}B.parseTimeUnits=dR;function fR(r,e){let t=wy(e[1]),n=B.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Dy=p(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var My=tt(),pR=pe(),hR=R(),Wl=class extends hR.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+My.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=My.parseTimeUnits(t[1]);return pR.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ll.default=Wl});var Py=p($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var Oy=tt(),mR=ne(),yR=R(),gR=Yr(),_R=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${mR.matchAnyPattern(Oy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),TR=1,bR=2,vR=3,Yl=class extends yR.AbstractParserWithWordBoundaryChecking{innerPattern(){return _R}innerExtract(e,t){let n=t[bR].toLowerCase(),i=Oy.WEEKDAY_DICTIONARY[n],s=t[TR],a=t[vR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=gR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$l.default=Yl});var xy=p(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var ER=Se(),Cy=tt(),ra=tt(),Sy=tt(),wR=ne(),RR=R(),MR=new RegExp(`(?:on\\s*?)?(${ra.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${ra.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+wR.matchAnyPattern(Cy.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Sy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),DR=3,Ay=1,ky=2,Ny=4,jl=class extends RR.AbstractParserWithWordBoundaryChecking{innerPattern(){return MR}innerExtract(e,t){let n=Cy.MONTH_DICTIONARY[t[DR].toLowerCase()],i=ra.parseOrdinalNumberPattern(t[Ay]);if(i>31)return t.index=t.index+t[Ay].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[Ny]){let u=Sy.parseYear(t[Ny]);s.assign("year",u)}else{let u=ER.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[ky])return s;let a=ra.parseOrdinalNumberPattern(t[ky]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Bl.default=jl});var qy=p(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Fy=tt(),OR=Se(),PR=ne(),Uy=tt(),AR=R(),kR=new RegExp(`(${PR.matchAnyPattern(Fy.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Uy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),NR=1,Iy=2,Gl=class extends AR.AbstractParserWithWordBoundaryChecking{innerPattern(){return kR}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[NR],s=Fy.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Iy]){let a=Uy.parseYear(t[Iy]);n.assign("year",a)}else{let a=OR.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Hl.default=Gl});var Wy=p(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var CR=R(),SR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),xR=1,IR=2,zl=class extends CR.AbstractParserWithWordBoundaryChecking{innerPattern(){return SR}innerExtract(e,t){let n=parseInt(t[IR]),i=parseInt(t[xR]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Kl.default=zl});var Ly=p(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var FR=Wr(),Vl=class extends FR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Zl.default=Vl});var jy=p(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var $y=tt(),UR=ne(),qR=R(),WR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${UR.matchAnyPattern($y.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),LR=1,YR=2,Yy=3,$R=4,Xl=class extends qR.AbstractParserWithWordBoundaryChecking{innerPattern(){return WR}innerExtract(e,t){let n=t[Yy]?parseInt(t[Yy]):$y.MONTH_DICTIONARY[t[YR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[LR]);return{day:parseInt(t[$R]),month:n,year:i}}};Ql.default=Xl});var By=p(Ei=>{"use strict";var jR=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var BR=R(),na=Ee(),Jl=ut(),GR=jR(Z()),HR=1,zR=2,ec=class extends BR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[HR].toLowerCase(),i=t[zR].toLowerCase(),s=e.createParsingComponents(),a=GR.default(e.refDate);switch(n){case"gisteren":Jl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Jl.assignSimilarDate(s,a);break;case"morgen":Jl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",na.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",na.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",na.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",na.Meridiem.PM),s.imply("hour",20);break}return s}};Ei.default=ec});var Hy=p(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var Gy=tt(),KR=pe(),VR=R(),ZR=lt(),XR=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Gy.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),tc=class extends VR.AbstractParserWithWordBoundaryChecking{innerPattern(){return XR}innerExtract(e,t){let n=t[1].toLowerCase(),i=Gy.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=ZR.reverseTimeUnits(i);break}return KR.ParsingComponents.createRelativeFromReference(e.reference,i)}};rc.default=tc});var Vy=p(wi=>{"use strict";var QR=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var Ky=tt(),zy=pe(),JR=QR(Z()),eM=R(),tM=ne(),rM=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${tM.matchAnyPattern(Ky.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),nM=1,iM=2,nc=class extends eM.AbstractParserWithWordBoundaryChecking{innerPattern(){return rM}innerExtract(e,t){let n=t[nM].toLowerCase(),i=t[iM].toLowerCase(),s=Ky.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,zy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,zy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=JR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};wi.default=nc});var Zy=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var sc=tt(),sM=pe(),aM=R(),oM=lt(),uM=new RegExp("("+sc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),lM=new RegExp("("+sc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),ic=class extends aM.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?lM:uM}innerExtract(e,t){let n=sc.parseTimeUnits(t[1]),i=oM.reverseTimeUnits(n);return sM.ParsingComponents.createRelativeFromReference(e.reference,i)}};ac.default=ic});var Xy=p(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var uc=tt(),cM=pe(),dM=R(),fM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),pM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),hM=1,oc=class extends dM.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?pM:fM}innerExtract(e,t){let n=uc.parseTimeUnits(t[hM]);return cM.ParsingComponents.createRelativeFromReference(e.reference,n)}};lc.default=oc});var tg=p(ke=>{"use strict";var Ie=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var mM=Vt(),Qy=bt(),yM=Ie(_y()),gM=Ie(Ty()),_M=Ie(by()),TM=Ie(vy()),bM=Ie($r()),vM=Ie(Dy()),EM=Ie(Py()),wM=Ie(xy()),Jy=Ie(qy()),RM=Ie(Wy()),MM=Ie(Ly()),DM=Ie(jy()),OM=Ie(By()),PM=Ie(Hy()),AM=Ie(Vy()),kM=Ie(Zy()),NM=Ie(Xy());ke.casual=new Qy.Chrono(eg());ke.strict=new Qy.Chrono(cc(!0));function CM(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=CM;function SM(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=SM;function eg(r=!0){let e=cc(!1,r);return e.parsers.unshift(new _M.default),e.parsers.unshift(new TM.default),e.parsers.unshift(new OM.default),e.parsers.unshift(new Jy.default),e.parsers.unshift(new AM.default),e.parsers.unshift(new PM.default),e}ke.createCasualConfiguration=eg;function cc(r=!0,e=!0){return mM.includeCommonConfiguration({parsers:[new bM.default(e),new vM.default,new wM.default,new Jy.default,new EM.default,new DM.default,new RM.default,new MM.default(r),new kM.default(r),new NM.default(r)],refiners:[new gM.default,new yM.default]},r)}ke.createConfiguration=cc});var sg=p(Ri=>{"use strict";var xM=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var IM=xM(Z()),FM=R(),UM=1,rg=2,qM=3,ng=4,ig=5,WM=6,dc=class extends FM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=IM.default(e.refDate),a=s;if(t[UM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[rg]){let o=t[rg],u=t[qM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[ng]){let u=t[ng][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ig]){let o=t[ig];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[WM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ri.default=dc});var vn=p(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.zhStringToYear=ze.zhStringToNumber=ze.WEEKDAY_OFFSET=ze.NUMBER=void 0;ze.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function LM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ze.NUMBER[n]:e*ze.NUMBER[n]:e+=ze.NUMBER[n]}return e}ze.zhStringToNumber=LM;function YM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ze.NUMBER[n]}return parseInt(e)}ze.zhStringToYear=YM});var og=p(Mi=>{"use strict";var $M=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var jM=$M(Z()),BM=R(),Gr=vn(),fc=1,ag=2,pc=3,hc=class extends BM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Gr.NUMBER).join("")+"]{4}|["+Object.keys(Gr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Gr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=jM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[ag]);if(isNaN(s)&&(s=Gr.zhStringToNumber(t[ag])),i.start.assign("month",s),t[pc]){let a=parseInt(t[pc]);isNaN(a)&&(a=Gr.zhStringToNumber(t[pc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[fc]){let a=parseInt(t[fc]);isNaN(a)&&(a=Gr.zhStringToYear(t[fc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Mi.default=hc});var lg=p(Di=>{"use strict";var GM=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var HM=GM(Z()),zM=R(),ug=vn(),KM=new RegExp("(\\d+|["+Object.keys(ug.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),mc=1,VM=2,yc=class extends zM.AbstractParserWithWordBoundaryChecking{innerPattern(){return KM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[mc]);if(isNaN(i)&&(i=ug.zhStringToNumber(t[mc])),isNaN(i)){let u=t[mc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=HM.default(e.refDate),o=t[VM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Di.default=yc});var dg=p(Oi=>{"use strict";var ZM=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var XM=ZM(Z()),QM=R(),cg=vn(),JM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(cg.WEEKDAY_OFFSET).join("|")+")"),gc=class extends QM.AbstractParserWithWordBoundaryChecking{innerPattern(){return JM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=cg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=XM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Oi.default=gc});var fg=p(Pi=>{"use strict";var eD=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var tD=eD(Z()),rD=R(),ft=vn(),nD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ft.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ft.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ft.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),iD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ft.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ft.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ft.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ia=1,sa=2,aa=3,oa=4,ua=5,la=6,dt=7,En=8,ca=9,_c=class extends rD.AbstractParserWithWordBoundaryChecking{innerPattern(){return nD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=tD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ia]){var a=t[ia];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[oa]){var o=t[oa];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[En]){var d=parseInt(t[En]);if(isNaN(d)&&(d=ft.zhStringToNumber(t[En])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[la]),isNaN(u)&&(u=ft.zhStringToNumber(t[la])),t[dt]?t[dt]=="\u534A"?l=30:t[dt]=="\u6B63"||t[dt]=="\u6574"?l=0:(l=parseInt(t[dt]),isNaN(l)&&(l=ft.zhStringToNumber(t[dt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ca]){if(u>12)return null;var f=t[ca][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[sa]){var h=t[sa],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[aa]){var y=t[aa],_=y[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ua]){var P=t[ua],A=P[0];A=="\u4E0A"||A=="\u671D"||A=="\u65E9"||A=="\u51CC"?(c=0,u==12&&(u=0)):(A=="\u4E0B"||A=="\u664F"||A=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=iD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let N=s.clone();if(i.end=e.createParsingComponents(),t[ia]){var a=t[ia];a=="\u660E"||a=="\u807D"?n.hour()>1&&N.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?N.add(-1,"day"):a=="\u524D"?N.add(-2,"day"):a=="\u5927\u524D"?N.add(-3,"day"):a=="\u5F8C"?N.add(2,"day"):a=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else if(t[oa]){var o=t[oa];o=="\u660E"||o=="\u807D"?N.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?N.add(-1,"day"):o=="\u524D"?N.add(-2,"day"):o=="\u5927\u524D"?N.add(-3,"day"):o=="\u5F8C"?N.add(2,"day"):o=="\u5927\u5F8C"&&N.add(3,"day"),i.end.assign("day",N.date()),i.end.assign("month",N.month()+1),i.end.assign("year",N.year())}else i.end.imply("day",N.date()),i.end.imply("month",N.month()+1),i.end.imply("year",N.year());if(u=0,l=0,c=-1,t[En]){var d=parseInt(t[En]);if(isNaN(d)&&(d=ft.zhStringToNumber(t[En])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[la]),isNaN(u)&&(u=ft.zhStringToNumber(t[la])),t[dt]?t[dt]=="\u534A"?l=30:t[dt]=="\u6B63"||t[dt]=="\u6574"?l=0:(l=parseInt(t[dt]),isNaN(l)&&(l=ft.zhStringToNumber(t[dt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ca]){if(u>12)return null;var f=t[ca][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[sa]){var h=t[sa],g=h[0];g=="\u671D"||g=="\u65E9"?(c=0,u==12&&(u=0)):g=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[aa]){var y=t[aa],_=y[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[ua]){var P=t[ua],A=P[0];A=="\u4E0A"||A=="\u671D"||A=="\u65E9"||A=="\u51CC"?(c=0,u==12&&(u=0)):(A=="\u4E0B"||A=="\u664F"||A=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Pi.default=_c});var hg=p(Ai=>{"use strict";var sD=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var aD=sD(Z()),oD=R(),pg=vn(),uD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(pg.WEEKDAY_OFFSET).join("|")+")"),Tc=class extends oD.AbstractParserWithWordBoundaryChecking{innerPattern(){return uD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=pg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=aD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ai.default=Tc});var mg=p(ki=>{"use strict";var lD=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var cD=lD(It()),bc=class extends cD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};ki.default=bc});var yg=p(Ni=>{"use strict";var dD=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var fD=dD(Kt()),vc=class extends fD.default{patternBetween(){return/^\s*$/i}};Ni.default=vc});var gg=p(_e=>{"use strict";var er=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.strict=_e.casual=_e.hant=void 0;var Ec=bt(),pD=er(Ls()),hD=Vt(),mD=er(sg()),yD=er(og()),gD=er(lg()),_D=er(dg()),TD=er(fg()),bD=er(hg()),vD=er(mg()),ED=er(yg());_e.hant=new Ec.Chrono(wc());_e.casual=new Ec.Chrono(wc());_e.strict=new Ec.Chrono(Rc());function wD(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=wD;function RD(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=RD;function wc(){let r=Rc();return r.parsers.unshift(new mD.default),r}_e.createCasualConfiguration=wc;function Rc(){let r=hD.includeCommonConfiguration({parsers:[new yD.default,new _D.default,new bD.default,new TD.default,new gD.default],refiners:[new vD.default,new ED.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof pD.default)),r}_e.createConfiguration=Rc});var vg=p(Ci=>{"use strict";var MD=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var DD=MD(Z()),OD=R(),PD=1,_g=2,AD=3,Tg=4,bg=5,kD=6,Mc=class extends OD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=DD.default(e.refDate),a=s;if(t[PD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[_g]){let o=t[_g],u=t[AD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Tg]){let u=t[Tg][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[bg]){let o=t[bg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[kD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ci.default=Mc});var wn=p(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.zhStringToYear=Ke.zhStringToNumber=Ke.WEEKDAY_OFFSET=Ke.NUMBER=void 0;Ke.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ke.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function ND(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ke.NUMBER[n]:e*Ke.NUMBER[n]:e+=Ke.NUMBER[n]}return e}Ke.zhStringToNumber=ND;function CD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ke.NUMBER[n]}return parseInt(e)}Ke.zhStringToYear=CD});var wg=p(Si=>{"use strict";var SD=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var xD=SD(Z()),ID=R(),Hr=wn(),Dc=1,Eg=2,Oc=3,Pc=class extends ID.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Hr.NUMBER).join("")+"]{4}|["+Object.keys(Hr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Hr.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Hr.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=xD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Eg]);if(isNaN(s)&&(s=Hr.zhStringToNumber(t[Eg])),i.start.assign("month",s),t[Oc]){let a=parseInt(t[Oc]);isNaN(a)&&(a=Hr.zhStringToNumber(t[Oc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Dc]){let a=parseInt(t[Dc]);isNaN(a)&&(a=Hr.zhStringToYear(t[Dc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Si.default=Pc});var Mg=p(xi=>{"use strict";var FD=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var UD=FD(Z()),qD=R(),Rg=wn(),WD=new RegExp("(\\d+|["+Object.keys(Rg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Ac=1,LD=2,kc=class extends qD.AbstractParserWithWordBoundaryChecking{innerPattern(){return WD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Ac]);if(isNaN(i)&&(i=Rg.zhStringToNumber(t[Ac])),isNaN(i)){let u=t[Ac];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=UD.default(e.refDate),o=t[LD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};xi.default=kc});var Og=p(Ii=>{"use strict";var YD=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var $D=YD(Z()),jD=R(),Dg=wn(),BD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Dg.WEEKDAY_OFFSET).join("|")+")"),Nc=class extends jD.AbstractParserWithWordBoundaryChecking{innerPattern(){return BD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Dg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=$D.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ii.default=Nc});var Pg=p(Fi=>{"use strict";var GD=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var HD=GD(Z()),zD=R(),ht=wn(),KD=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ht.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ht.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ht.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),VD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(ht.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(ht.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(ht.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),da=1,fa=2,pa=3,ha=4,ma=5,ya=6,pt=7,Rn=8,ga=9,Cc=class extends zD.AbstractParserWithWordBoundaryChecking{innerPattern(){return KD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=HD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[da]){let c=t[da];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[ha]){let c=t[ha];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Rn]){let c=parseInt(t[Rn]);if(isNaN(c)&&(c=ht.zhStringToNumber(t[Rn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ya]),isNaN(a)&&(a=ht.zhStringToNumber(t[ya])),t[pt]?t[pt]=="\u534A"?o=30:t[pt]=="\u6B63"||t[pt]=="\u6574"?o=0:(o=parseInt(t[pt]),isNaN(o)&&(o=ht.zhStringToNumber(t[pt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ga]){if(a>12)return null;let c=t[ga][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[fa]){let d=t[fa][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[pa]){let d=t[pa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ma]){let d=t[ma][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=VD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[da]){let c=t[da];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[ha]){let c=t[ha];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Rn]){let c=parseInt(t[Rn]);if(isNaN(c)&&(c=ht.zhStringToNumber(t[Rn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ya]),isNaN(a)&&(a=ht.zhStringToNumber(t[ya])),t[pt]?t[pt]=="\u534A"?o=30:t[pt]=="\u6B63"||t[pt]=="\u6574"?o=0:(o=parseInt(t[pt]),isNaN(o)&&(o=ht.zhStringToNumber(t[pt]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ga]){if(a>12)return null;let c=t[ga][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[fa]){let d=t[fa][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[pa]){let d=t[pa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ma]){let d=t[ma][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Fi.default=Cc});var kg=p(Ui=>{"use strict";var ZD=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var XD=ZD(Z()),QD=R(),Ag=wn(),JD=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Ag.WEEKDAY_OFFSET).join("|")+")"),Sc=class extends QD.AbstractParserWithWordBoundaryChecking{innerPattern(){return JD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Ag.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=XD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Ui.default=Sc});var Ng=p(qi=>{"use strict";var eO=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var tO=eO(It()),xc=class extends tO.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};qi.default=xc});var Cg=p(Wi=>{"use strict";var rO=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var nO=rO(Kt()),Ic=class extends nO.default{patternBetween(){return/^\s*$/i}};Wi.default=Ic});var Sg=p(Te=>{"use strict";var tr=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hans=void 0;var Fc=bt(),iO=tr(Ls()),sO=Vt(),aO=tr(vg()),oO=tr(wg()),uO=tr(Mg()),lO=tr(Og()),cO=tr(Pg()),dO=tr(kg()),fO=tr(Ng()),pO=tr(Cg());Te.hans=new Fc.Chrono(Uc());Te.casual=new Fc.Chrono(Uc());Te.strict=new Fc.Chrono(qc());function hO(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=hO;function mO(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=mO;function Uc(){let r=qc();return r.parsers.unshift(new aO.default),r}Te.createCasualConfiguration=Uc;function qc(){let r=sO.includeCommonConfiguration({parsers:[new oO.default,new lO.default,new dO.default,new cO.default,new uO.default],refiners:[new fO.default,new pO.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof iO.default)),r}Te.createConfiguration=qc});var Ig=p(rt=>{"use strict";var xg=rt&&rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),yO=rt&&rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),gO=rt&&rt.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xg(e,r,t)},_O=rt&&rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xg(e,r,t);return yO(e,r),e};Object.defineProperty(rt,"__esModule",{value:!0});rt.hans=void 0;gO(gg(),rt);rt.hans=_O(Sg())});var Ve=p(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var _a=ne(),TO=Se();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${_a.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Ug(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=Ug;U.ORDINAL_NUMBER_PATTERN=`(?:${_a.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function bO(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=bO;var Wc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Wc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Wc}|[5-9][0-9]${Wc})`;function vO(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return TO.findMostLikelyADYear(e)}U.parseYear=vO;var qg=`(${U.NUMBER_PATTERN})\\s{0,3}(${_a.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,Fg=new RegExp(qg,"i");U.TIME_UNITS_PATTERN=_a.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",qg);function EO(r){let e={},t=r,n=Fg.exec(t);for(;n;)wO(e,n),t=t.substring(n[0].length).trim(),n=Fg.exec(t);return e}U.parseTimeUnits=EO;function wO(r,e){let t=Ug(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Lg=p(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var Li=Ve(),RO=pe(),MO=R(),Wg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Li.TIME_UNITS_PATTERN})${Li.REGEX_PARTS.rightBoundary}`,DO=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${Wg}`,Li.REGEX_PARTS.flags),OO=new RegExp(Wg,"i"),Lc=class extends MO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Li.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?OO:DO}innerExtract(e,t){let n=Li.parseTimeUnits(t[1]);return RO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Yc.default=Lc});var Gg=p(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var PO=Se(),Yi=Ve(),Bg=Ve(),Ta=Ve(),AO=ne(),kO=R(),NO=new RegExp(`(?:\u0441)?\\s*(${Ta.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Ta.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${AO.matchAnyPattern(Yi.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${Bg.YEAR_PATTERN}(?![^\\s]\\d)))?${Yi.REGEX_PARTS.rightBoundary}`,Yi.REGEX_PARTS.flags),Yg=1,$g=2,CO=3,jg=4,$c=class extends kO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Yi.REGEX_PARTS.leftBoundary}innerPattern(){return NO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Yi.MONTH_DICTIONARY[t[CO].toLowerCase()],s=Ta.parseOrdinalNumberPattern(t[Yg]);if(s>31)return t.index=t.index+t[Yg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[jg]){let a=Bg.parseYear(t[jg]);n.start.assign("year",a)}else{let a=PO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[$g]){let a=Ta.parseOrdinalNumberPattern(t[$g]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};jc.default=$c});var Kg=p(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var $i=Ve(),SO=Se(),xO=ne(),zg=Ve(),IO=R(),FO=new RegExp(`((?:\u0432)\\s*)?(${xO.matchAnyPattern($i.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${zg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,$i.REGEX_PARTS.flags),UO=2,Hg=3,Bc=class extends IO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return $i.REGEX_PARTS.leftBoundary}innerPattern(){return FO}innerExtract(e,t){let n=t[UO].toLowerCase();if(t[0].length<=3&&!$i.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=$i.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Hg]){let a=zg.parseYear(t[Hg]);i.start.assign("year",a)}else{let a=SO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Gc.default=Bc});var Zg=p(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var ba=Ee(),qO=Wr(),Vg=Ve(),Hc=class extends qO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Vg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Vg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",ba.Meridiem.PM)):i<6&&n.assign("meridiem",ba.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",ba.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",ba.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};zc.default=Hc});var Xg=p(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var va=Ve(),WO=pe(),LO=R(),YO=lt(),$O=new RegExp(`(${va.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,va.REGEX_PARTS.flags),Kc=class extends LO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return va.REGEX_PARTS.leftBoundary}innerPattern(){return $O}innerExtract(e,t){let n=va.parseTimeUnits(t[1]),i=YO.reverseTimeUnits(n);return WO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vc.default=Kc});var Qg=p(ji=>{"use strict";var jO=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var BO=jO(It()),Zc=class extends BO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};ji.default=Zc});var Jg=p(Bi=>{"use strict";var GO=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var HO=GO(Kt()),Xc=class extends HO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Bi.default=Xc});var e_=p(rr=>{"use strict";var zO=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),KO=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),VO=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&zO(e,r,t);return KO(e,r),e};Object.defineProperty(rr,"__esModule",{value:!0});var ZO=R(),Gi=VO(Xt()),Qc=Ve(),XO=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Qc.REGEX_PARTS.rightBoundary}`,Qc.REGEX_PARTS.flags),Jc=class extends ZO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qc.REGEX_PARTS.leftBoundary}innerPattern(e){return XO}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Gi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Gi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Gi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Gi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Gi.theDayBefore(e.reference,2)}return i}};rr.default=Jc});var t_=p(Mt=>{"use strict";var QO=Mt&&Mt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),JO=Mt&&Mt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),eP=Mt&&Mt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&QO(e,r,t);return JO(e,r),e},tP=Mt&&Mt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mt,"__esModule",{value:!0});var rP=R(),zr=eP(Xt()),nP=ut(),iP=tP(Z()),ed=Ve(),sP=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${ed.REGEX_PARTS.rightBoundary}`,ed.REGEX_PARTS.flags),td=class extends rP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ed.REGEX_PARTS.leftBoundary}innerPattern(){return sP}innerExtract(e,t){let n=iP.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return zr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return zr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return zr.morning(e.reference);if(i.match(/в\s*полдень/))return zr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return zr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return zr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),nP.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?zr.midnight(e.reference):s}};Mt.default=td});var r_=p(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var Hi=Ve(),aP=ne(),oP=R(),uP=Yr(),lP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${aP.matchAnyPattern(Hi.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${Hi.REGEX_PARTS.rightBoundary}`,Hi.REGEX_PARTS.flags),cP=1,dP=2,fP=3,rd=class extends oP.AbstractParserWithWordBoundaryChecking{innerPattern(){return lP}patternLeftBoundary(){return Hi.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[dP].toLowerCase(),i=Hi.WEEKDAY_DICTIONARY[n],s=t[cP],a=t[fP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=uP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};nd.default=rd});var i_=p(Ki=>{"use strict";var pP=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var zi=Ve(),n_=pe(),hP=pP(Z()),mP=R(),yP=ne(),gP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${yP.matchAnyPattern(zi.TIME_UNIT_DICTIONARY)})(?=\\s*)${zi.REGEX_PARTS.rightBoundary}`,zi.REGEX_PARTS.flags),_P=1,TP=2,id=class extends mP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return zi.REGEX_PARTS.leftBoundary}innerPattern(){return gP}innerExtract(e,t){let n=t[_P].toLowerCase(),i=t[TP].toLowerCase(),s=zi.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,n_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,n_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=hP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ki.default=id});var s_=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Vi=Ve(),bP=pe(),vP=R(),EP=lt(),wP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Vi.TIME_UNITS_PATTERN})${Vi.REGEX_PARTS.rightBoundary}`,Vi.REGEX_PARTS.flags),sd=class extends vP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Vi.REGEX_PARTS.leftBoundary}innerPattern(){return wP}innerExtract(e,t){let n=t[1].toLowerCase(),i=Vi.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=EP.reverseTimeUnits(i);break}return bP.ParsingComponents.createRelativeFromReference(e.reference,i)}};ad.default=sd});var u_=p(Ne=>{"use strict";var nt=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var RP=nt(Lg()),MP=nt(Gg()),DP=nt(Kg()),OP=nt(Zg()),PP=nt(Xg()),AP=nt(Qg()),kP=nt(Jg()),NP=Vt(),CP=nt(e_()),SP=nt(t_()),xP=nt(r_()),IP=nt(i_()),a_=bt(),FP=nt($r()),UP=nt(s_());Ne.casual=new a_.Chrono(o_());Ne.strict=new a_.Chrono(od(!0));function qP(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=qP;function WP(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=WP;function o_(){let r=od(!1);return r.parsers.unshift(new CP.default),r.parsers.unshift(new SP.default),r.parsers.unshift(new DP.default),r.parsers.unshift(new IP.default),r.parsers.unshift(new UP.default),r}Ne.createCasualConfiguration=o_;function od(r=!0){return NP.includeCommonConfiguration({parsers:[new FP.default(!0),new RP.default,new MP.default,new xP.default,new OP.default(r),new PP.default],refiners:[new kP.default,new AP.default]},r)}Ne.createConfiguration=od});var Ee=p(L=>{"use strict";var LP=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),YP=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Mr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&LP(e,r,t);return YP(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var ud=Mr(Mu());L.en=ud;var $P=bt();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return $P.Chrono}});var jP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(jP=L.Meridiem||(L.Meridiem={}));var BP=Mr(gm());L.de=BP;var GP=Mr(Hm());L.fr=GP;var HP=Mr(ty());L.ja=HP;var zP=Mr(gy());L.pt=zP;var KP=Mr(tg());L.nl=KP;var VP=Mr(Ig());L.zh=VP;var ZP=Mr(u_());L.ru=ZP;L.strict=ud.strict;L.casual=ud.casual;function XP(r,e,t){return L.casual.parse(r,e,t)}L.parse=XP;function QP(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=QP});var Wt=p(Pr=>{"use strict";Pr.__esModule=!0;var aA;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(aA=Pr.Operators||(Pr.Operators={}));var oA;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(oA=Pr.StructuralCharacters||(Pr.StructuralCharacters={}));var uA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(uA=Pr.Tokens||(Pr.Tokens={}))});var vd=p(xa=>{"use strict";xa.__esModule=!0;var he=Wt();xa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};xa.VALID_TOKENS={identifierOnly:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:he.Tokens.IDENTIFIER},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.OPEN_PARENTHESIS},{name:he.Tokens.OPERATOR,value:he.Operators.NOT}],binaryOperator:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR}],binaryOperatorOrClose:[{name:he.Tokens.OPERATOR,value:he.Operators.AND},{name:he.Tokens.OPERATOR,value:he.Operators.OR},{name:he.Tokens.OPERATOR,value:he.Operators.XOR},{name:he.Tokens.STRUCTURAL_CHARACTER,value:he.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Ed=p(sr=>{"use strict";sr.__esModule=!0;var kn=Wt();sr.STRUCTURAL_CHARACTERS={"(":kn.StructuralCharacters.OPEN_PARENTHESIS,")":kn.StructuralCharacters.CLOSE_PARENTHESIS};sr.OPERATORS={AND:kn.Operators.AND,OR:kn.Operators.OR,XOR:kn.Operators.XOR,NOT:kn.Operators.NOT};sr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));sr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);sr.COMMENT_DELIMITER=String.fromCodePoint(35);sr.EOL=String.fromCodePoint(10);sr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var v_=p(ar=>{"use strict";var wd=ar&&ar.__assign||function(){return wd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},wd.apply(this,arguments)};ar.__esModule=!0;var b_=Wt(),Vr=Ed();ar.createResult=function(r,e,t){return{token:wd({name:r},e!==null?{value:e}:{}),remainingString:t}};ar.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===Vr.EOL){e=t;break}}return ar.createResult(b_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};ar.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===Vr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+Vr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===Vr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!Vr.SEPARATORS.has(s)&&!Vr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+Vr.QUOTED_IDENTIFIER_DELIMITER+" character");return ar.createResult(b_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var E_=p(Rd=>{"use strict";Rd.__esModule=!0;var Nn=Wt(),it=Ed(),Cn=v_();Rd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!it.SEPARATORS.has(s)){var a=it.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Nn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!it.SEPARATORS.has(o)&&o!==Nn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Cn.createResult(Nn.Tokens.STRUCTURAL_CHARACTER,it.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===it.QUOTED_IDENTIFIER_DELIMITER)return Cn.getQuotedIdentifier(r.slice(i+1));if(s===it.COMMENT_DELIMITER)return Cn.getComment(r.slice(i+1));e=i}}else if(it.SEPARATORS.has(s)||it.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===it.QUOTED_IDENTIFIER_DELIMITER||s===it.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(it.OPERATORS[u]){if(n&&!it.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Cn.createResult(Nn.Tokens.OPERATOR,it.OPERATORS[u],l)}else return Cn.createResult(Nn.Tokens.IDENTIFIER,u,l)}return Cn.createResult(Nn.Tokens.EOF,null,"")}});var w_=p(or=>{"use strict";var lA=or&&or.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};or.__esModule=!0;var cA=E_(),Sn=Wt(),Ia=vd();or.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=cA.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Sn.Tokens.COMMENT)return or.validateToken(s,t,n),s}}};or.getValue=function(r,e){var t=r(Ia.VALID_TOKENS.identifierOrNot),n=t.value===Sn.Operators.NOT;n&&(t=r(Ia.VALID_TOKENS.identifierOnly));var i=t.name===Sn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?lA(i,[{name:Sn.Tokens.OPERATOR,value:Sn.Operators.NOT}]):i};or.previousOperatorTakesPrecedent=function(r,e){return Ia.OPERATOR_PRECEDENCE[r]<=Ia.OPERATOR_PRECEDENCE[e]};or.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Sn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Dd=p(rs=>{"use strict";var xn=rs&&rs.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};rs.__esModule=!0;var R_=Wt(),M_=vd(),Fa=w_();rs.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Fa.newTokenGenerator(r);return Md(e)};var Md=function(r,e){e===void 0&&(e=!1);for(var t=xn(Fa.getValue(r,Md)),n=[];;){var i=e?M_.VALID_TOKENS.binaryOperatorOrClose:M_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===R_.Tokens.EOF||s.name===R_.Tokens.STRUCTURAL_CHARACTER)return xn(t,xn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Fa.previousOperatorTakesPrecedent(a.value,s.value))t=xn(t,[a]),n=n.slice(0,-1);else break}n=xn(n,[s]),t=xn(t,Fa.getValue(r,Md))}}});var Od=p(ur=>{"use strict";ur.__esModule=!0;var D_=Wt();ur.andUtil=function(r,e){return r&&e};ur.orUtil=function(r,e){return r||e};ur.xorUtil=function(r,e){return r!==e};ur.notUtil=function(r){return!r};ur.isIdentifier=function(r){var e=r.name,t=r.value;return e===D_.Tokens.IDENTIFIER&&typeof t=="string"};ur.isOperator=function(r){var e=r.name,t=r.value;return e===D_.Tokens.OPERATOR&&typeof t=="string"};ur.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var O_=p(kd=>{"use strict";var ns;kd.__esModule=!0;var Pd=Wt(),Ad=Od();kd.OPERATOR_MAP=(ns={},ns[Pd.Operators.AND]=Ad.andUtil,ns[Pd.Operators.OR]=Ad.orUtil,ns[Pd.Operators.XOR]=Ad.xorUtil,ns)});var A_=p(Xr=>{"use strict";var Nd=Xr&&Xr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Xr.__esModule=!0;var dA=Dd(),P_=Wt(),fA=O_(),Zr=Od();Xr.getEvaluator=function(r){var e=dA.parse(r);return function(t){return Xr.evaluate(e,t)}};Xr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Zr.isIdentifier(i)||Zr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===P_.Tokens.IDENTIFIER)return Nd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===P_.Operators.NOT)return o===void 0&&Zr.throwInvalidExpression("missing identifier"),Nd(n.slice(0,-1),[Zr.notUtil(o)]);(o===void 0||a===void 0)&&Zr.throwInvalidExpression("missing identifier");var u=fA.OPERATOR_MAP[i.value];return u||Zr.throwInvalidExpression("unknown operator"),Nd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Zr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var N_=p(is=>{"use strict";is.__esModule=!0;var k_=A_();is.getEvaluator=k_.getEvaluator;is.evaluate=k_.evaluate;var pA=Dd();is.parse=pA.parse});var bA={};j_(bA,{default:()=>Qa});module.exports=B_(bA);var I_=require("obsidian");var Ds=require("obsidian");var EA=new Error("timeout while waiting for mutex to become available"),wA=new Error("mutex already locked"),G_=new Error("request for lock canceled"),ff=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},no=class{constructor(e,t=G_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return ff(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return ff(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},H_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},gs=class{constructor(e){this._semaphore=new no(1,e)}acquire(){return H_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var bp=require("obsidian");var hf=require("obsidian");var pf=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Dt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return pf.forEach(t=>{e=[...e,new Dt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Dt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Dt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var K_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,features:Dt.settingsFlags},Ln=Le({},K_),ae=()=>{for(let r in Dt.settingsFlags)Ln.features[r]===void 0&&(Ln.features[r]=Dt.settingsFlags[r]);return Le({},Ln)},jt=r=>(Ln=Le(Le({},Ln),r),ae());var io,so,mf=({metadataCache:r,vault:e})=>{io=r,so=e},_s=t=>se(void 0,[t],function*({originalTask:r,newTasks:e}){if(so===void 0||io===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),yf({originalTask:r,newTasks:e,vault:so,metadataCache:io,previousTries:0})}),yf=s=>se(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let _=Math.min(Math.pow(10,i),100);setTimeout(()=>{yf({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},_)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof hf.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ae(),h,g=0;for(let _ of l){if(_.position.start.line<r.sectionStart||_.task===void 0)continue;if(d[_.position.start.line].includes(f)){if(g===r.sectionIndex){h=_;break}g++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let y=[...d.slice(0,h.position.start.line),...e.map(_=>_.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,y.join(`
`))});var tn=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1}};var Ts=["MO","TU","WE","TH","FR","SA","SU"],ye=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(Ts.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=Ts[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ue=function(r){return r!=null},Qe=function(r){return typeof r=="number"},ao=function(r){return typeof r=="string"&&Ts.includes(r)},Ce=Array.isArray,at=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var G=function(r,e){var t=0,n=[];if(Ce(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},gf=function(r){return Ce(r)?r:[r]};function Nr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=G(t,e/t.length)),t.slice(0,e)+String(n))}var _f=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Ue=function(r,e){var t=r%e;return t*e<0?t+e:t},bs=function(r,e){return{div:Math.floor(r/e),mod:Ue(r,e)}},Je=function(r){return!ue(r)||r.length===0},me=function(r){return!Je(r)},K=function(r,e){return me(r)&&r.indexOf(e)!==-1};var mr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Nr(n.getUTCFullYear().toString(),4,"0"),Nr(n.getUTCMonth()+1,2,"0"),Nr(n.getUTCDate(),2,"0"),"T",Nr(n.getUTCHours(),2,"0"),Nr(n.getUTCMinutes(),2,"0"),Nr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(mr||(mr={}));var C=mr;var V_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Bt=V_;var Yf=ys(Lf(),1),{__extends:nn,__assign:Ye,__rest:$A,__decorate:jA,__param:BA,__metadata:GA,__awaiter:HA,__generator:zA,__exportStar:KA,__createBinding:VA,__values:ZA,__read:XA,__spread:QA,__spreadArrays:JA,__spreadArray:w,__await:ek,__asyncGenerator:tk,__asyncDelegator:rk,__asyncValues:nk,__makeTemplateObject:ik,__importStar:sk,__importDefault:ak,__classPrivateFieldGet:ok,__classPrivateFieldSet:uk,__classPrivateFieldIn:lk}=Yf.default;var Z_=function(r){nn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Bt),uo=Z_;var X_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Cr=X_;var $f=function(r,e){return r.indexOf(e)!==-1},Q_=function(r){return r.toString()},J_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},eT=function(){function r(e,t,n,i){if(t===void 0&&(t=Q_),n===void 0&&(n=Cr),i===void 0&&(i=J_),this.text=[],this.language=n||Cr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ue(this.origOptions.byweekday)){var o=Ce(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if($f(["dtstart","wkst","freq"],n))return!0;if(!$f(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[D.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Qe(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Ce(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Ot=eT;var tT=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Yn(r,e){e===void 0&&(e=Cr);var t={},n=new tT(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=D.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=D.WEEKLY,t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=D.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=D.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=D.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=D.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=D.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=D.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[D[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var g=u();if(!g)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(D[g]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=D.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=o();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(y),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var g=l(),y=u(),_=o();if(g)y?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[y].nth(g))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(g),n.accept("day(s)"));else if(y)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[y]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var P=n.acceptNumber();if(!P)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(P[0],10)];n.accept("comma");){if(P=n.acceptNumber(),!P)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(P[0],10))}}else if(_)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(_);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var j;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(j||(j={}));function $n(r){return r<j.HOURLY}var jf=function(r,e){return e===void 0&&(e=Cr),new D(Yn(r,e)||void 0)},sn=["count","until","interval","byweekday","bymonthday","bymonth"];Ot.IMPLEMENTED=[];Ot.IMPLEMENTED[j.HOURLY]=sn;Ot.IMPLEMENTED[j.MINUTELY]=sn;Ot.IMPLEMENTED[j.DAILY]=["byhour"].concat(sn);Ot.IMPLEMENTED[j.WEEKLY]=sn;Ot.IMPLEMENTED[j.MONTHLY]=sn;Ot.IMPLEMENTED[j.YEARLY]=["byweekno","byyearday"].concat(sn);var Bf=function(r,e,t,n){return new Ot(r,e,t,n).toString()},Gf=Ot.isFullyConvertible;var an=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Hf=function(r){nn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return mr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Ue(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=bs(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Je(i)||K(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=bs(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Je(i)||K(i,this.hour))&&(Je(s)||K(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=bs(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Je(i)||K(i,this.hour))&&(Je(s)||K(s,this.minute))&&(Je(a)||K(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=mr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>mr.MAXYEAR))return;t=mr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case j.YEARLY:return this.addYears(s);case j.MONTHLY:return this.addMonths(s);case j.WEEKLY:return this.addWeekly(s,a);case j.DAILY:return this.addDaily(s);case j.HOURLY:return this.addHours(s,n,o);case j.MINUTELY:return this.addMinutes(s,n,o,u);case j.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(an);function lo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];K(Vf,s)||e.push(s),C.isDate(r[s])&&!C.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Ye({},r)}function zf(r){var e=Ye(Ye({},jn),lo(r));if(ue(e.byeaster)&&(e.freq=D.YEARLY),!(ue(e.freq)&&D.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ue(e.wkst)?Qe(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=D.MO.weekday,ue(e.bysetpos)){Qe(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||me(e.byweekno)||me(e.byyearday)||Boolean(e.bymonthday)||me(e.bymonthday)||ue(e.byweekday)||ue(e.byeaster)))switch(e.freq){case D.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case D.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case D.WEEKLY:e.byweekday=[C.getWeekday(e.dtstart)];break}if(ue(e.bymonth)&&!Ce(e.bymonth)&&(e.bymonth=[e.bymonth]),ue(e.byyearday)&&!Ce(e.byyearday)&&Qe(e.byyearday)&&(e.byyearday=[e.byyearday]),!ue(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Ce(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ue(e.byweekno)&&!Ce(e.byweekno)&&(e.byweekno=[e.byweekno]),!ue(e.byweekday))e.bynweekday=null;else if(Qe(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(ao(e.byweekday))e.byweekday=[ye.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ye)!e.byweekday.n||e.freq>D.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Qe(u)){a.push(u);continue}else if(ao(u)){a.push(ye.fromStr(u).weekday);continue}!u.n||e.freq>D.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=me(a)?a:null,e.bynweekday=me(o)?o:null}return ue(e.byhour)?Qe(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<D.HOURLY?[e.dtstart.getUTCHours()]:null,ue(e.byminute)?Qe(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<D.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ue(e.bysecond)?Qe(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<D.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Kf(r){var e=r.dtstart.getTime()%1e3;if(!$n(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new an(n,i,s,e))})})}),t}function Gn(r){var e=r.split(`
`).map(rT).filter(function(t){return t!==null});return Ye(Ye({},e[0]),e[1])}function Bn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=C.untilStringToDate(i),e}function rT(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return Zf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return Zf(r);case"DTSTART":return Bn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function Zf(r){var e=r.replace(/^RRULE:/i,""),t=Bn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=j[o.toUpperCase()];break;case"WKST":t.wkst=ot[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=nT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=iT(o);break;case"DTSTART":case"TZID":var c=Bn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=C.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function nT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Xf)}return Xf(r)}function Xf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function iT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return ot[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=ot[s].weekday;return new ye(a,i)})}var Sr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=C.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Hn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(jn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!K(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ue(o)||Ce(o)&&!o.length)){switch(a){case"FREQ":u=D.FREQUENCIES[r.freq];break;case"WKST":Qe(o)?u=new ye(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=gf(o).map(function(h){return h instanceof ye?h:Ce(h)?new ye(h[0],h[1]):new ye(h)}).toString();break;case"DTSTART":t=sT(o,r.tzid);break;case"UNTIL":u=C.timeToUntilString(o,!r.tzid);break;default:if(Ce(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var g=h[0],y=h[1];return"".concat(g,"=").concat(y.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function sT(r,e){return r?"DTSTART"+new Sr(new Date(r),e).toString():""}function aT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Qf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?C.clone(t):C.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!aT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Ce(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Bt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Ce(n)?C.cloneDates(n):n instanceof Date?C.clone(n):n},r}();var Jf=w(w(w(w(w(w(w(w(w(w(w(w(w([],G(1,31),!0),G(2,28),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),ep=w(w(w(w(w(w(w(w(w(w(w(w(w([],G(1,31),!0),G(2,29),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),oT=at(1,29),uT=at(1,30),yr=at(1,31),qe=at(1,32),tp=w(w(w(w(w(w(w(w(w(w(w(w(w([],qe,!0),uT,!0),qe,!0),yr,!0),qe,!0),yr,!0),qe,!0),qe,!0),yr,!0),qe,!0),yr,!0),qe,!0),qe.slice(0,7),!0),rp=w(w(w(w(w(w(w(w(w(w(w(w(w([],qe,!0),oT,!0),qe,!0),yr,!0),qe,!0),yr,!0),qe,!0),qe,!0),yr,!0),qe,!0),yr,!0),qe,!0),qe.slice(0,7),!0),lT=at(-28,0),cT=at(-29,0),gr=at(-30,0),We=at(-31,0),np=w(w(w(w(w(w(w(w(w(w(w(w(w([],We,!0),cT,!0),We,!0),gr,!0),We,!0),gr,!0),We,!0),We,!0),gr,!0),We,!0),gr,!0),We,!0),We.slice(0,7),!0),ip=w(w(w(w(w(w(w(w(w(w(w(w(w([],We,!0),lT,!0),We,!0),gr,!0),We,!0),gr,!0),We,!0),We,!0),gr,!0),We,!0),gr,!0),We,!0),We.slice(0,7),!0),sp=[0,31,60,91,121,152,182,213,244,274,305,335,366],ap=[0,31,59,90,120,151,181,212,243,273,304,334,365],co=function(){for(var r=[],e=0;e<55;e++)r=r.concat(at(7));return r}();function op(r,e){var t=new Date(Date.UTC(r,0,1)),n=C.isLeapYear(r)?366:365,i=C.isLeapYear(r+1)?366:365,s=C.toOrdinal(t),a=C.getWeekday(t),o=Ye(Ye({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},dT(r)),{wnomask:null});if(Je(e.byweekno))return o;o.wnomask=G(0,n+7);var u,l,c=u=Ue(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Ue(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Ue(l,7),h=Math.floor(d+f/4),g=0;g<e.byweekno.length;g++){var y=e.byweekno[g];if(y<0&&(y+=h+1),y>0&&y<=h){var _=void 0;y>1?(_=c+(y-1)*7,c!==u&&(_-=7-u)):_=c;for(var P=0;P<7&&(o.wnomask[_]=1,_++,o.wdaymask[_]!==e.wkst);P++);}}if(K(e.byweekno,1)){var _=c+h*7;if(c!==u&&(_-=7-u),_<n)for(var g=0;g<7&&(o.wnomask[_]=1,_+=1,o.wdaymask[_]!==e.wkst);g++);}if(c){var A=void 0;if(K(e.byweekno,-1))A=-1;else{var N=C.getWeekday(new Date(Date.UTC(r-1,0,1))),H=Ue(7-N.valueOf()+e.wkst,7),Y=C.isLeapYear(r-1)?366:365,oe=void 0;H>=4?(H=0,oe=Y+Ue(N-e.wkst,7)):oe=n-c,A=Math.floor(52+Ue(oe,7)/4)}if(K(e.byweekno,A))for(var _=0;_<c;_++)o.wnomask[_]=1}return o}function dT(r){var e=C.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=C.getWeekday(t);return e===365?{mmask:Jf,mdaymask:rp,nmdaymask:ip,wdaymask:co.slice(n),mrange:ap}:{mmask:ep,mdaymask:tp,nmdaymask:np,wdaymask:co.slice(n),mrange:sp}}function up(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===D.YEARLY)if(Je(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===D.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Je(o))return a;a.nwdaymask=G(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,g=s.bynweekday[f],y=g[0],_=g[1];_<0?(h=d+(_+1)*7,h-=Ue(i[h]-y,7)):(h=c+(_-1)*7,h+=Ue(7-i[h]+y,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function lp(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),g=Math.floor((l+f-7*h+114)/31),y=(l+f-7*h+114)%31+1,_=Date.UTC(r,g-1,y+e),P=Date.UTC(r,0,1);return[Math.ceil((_-P)/(1e3*60*60*24))]}var fT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=op(e,n)),me(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=up(e,t,s,a,o,n)}ue(n.byeaster)&&(this.eastermask=lp(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[at(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=G(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=G(null,this.yearlen+7),s=C.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=G(null,this.yearlen),s=C.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),C.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new an(e,t,a,i)});return C.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new an(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case j.YEARLY:return this.ydayset.bind(this);case j.MONTHLY:return this.mdayset.bind(this);case j.WEEKLY:return this.wdayset.bind(this);case j.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case j.HOURLY:return this.htimeset.bind(this);case j.MINUTELY:return this.mtimeset.bind(this);case j.SECONDLY:return this.stimeset.bind(this)}},r}(),cp=fT;function dp(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Ue(c,e.length)):(u=Math.floor((c-1)/e.length),l=Ue(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!ue(h)||d.push(h)}var g=void 0;u<0?g=d.slice(u)[0]:g=d[u];var y=e[l],_=C.fromOrdinal(i.yearordinal+g),P=C.combine(_,y);K(a,P)||a.push(P)}return C.sort(a),a}function Rs(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Gt(r);var u=Hf.fromDate(t),l=new cp(e);l.rebuild(u.year,u.month);for(var c=mT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],g=d[2],y=hT(f,h,g,l,e);if(me(a))for(var _=dp(a,c,h,g,l,f),P=0;P<_.length;P++){var A=_[P];if(s&&A>s)return Gt(r);if(A>=t){var N=fp(A,e);if(!r.accept(N)||o&&(--o,!o))return Gt(r)}}else for(var P=h;P<g;P++){var H=f[P];if(!!ue(H))for(var Y=C.fromOrdinal(l.yearordinal+H),oe=0;oe<c.length;oe++){var Q=c[oe],A=C.combine(Y,Q);if(s&&A>s)return Gt(r);if(A>=t){var N=fp(A,e);if(!r.accept(N)||o&&(--o,!o))return Gt(r)}}}if(e.interval===0||(u.add(e,y),u.year>C.MAXYEAR))return Gt(r);$n(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function pT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return me(n)&&!K(n,r.mmask[e])||me(i)&&!r.wnomask[e]||me(s)&&!K(s,r.wdaymask[e])||me(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!K(r.eastermask,e)||(me(o)||me(u))&&!K(o,r.mdaymask[e])&&!K(u,r.nmdaymask[e])||me(l)&&(e<r.yearlen&&!K(l,e+1)&&!K(l,-r.yearlen+e)||e>=r.yearlen&&!K(l,e+1-r.yearlen)&&!K(l,-r.nextyearlen+e-r.yearlen))}function fp(r,e){return new Sr(r,e.tzid).rezonedDate()}function Gt(r){return r.getValue()}function hT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=pT(n,o,i),s&&(r[o]=null)}return s}function mT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return $n(n)?Kf(t):n>=D.HOURLY&&me(i)&&!K(i,e.hour)||n>=D.MINUTELY&&me(s)&&!K(s,e.minute)||n>=D.SECONDLY&&me(a)&&!K(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ot={MO:new ye(0),TU:new ye(1),WE:new ye(2),TH:new ye(3),FR:new ye(4),SA:new ye(5),SU:new ye(6)},jn={freq:j.YEARLY,dtstart:null,interval:1,wkst:ot.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Vf=Object.keys(jn),D=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Qf,this.origOptions=lo(e);var n=zf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Yn(e,t)},r.fromText=function(e,t){return jf(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return Rs(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new uo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Bt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!C.isValidDate(e)||!C.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new uo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Bt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!C.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Bt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!C.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Bt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Hn(this.origOptions)},r.prototype.toText=function(e,t,n){return Bf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Gf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=j.YEARLY,r.MONTHLY=j.MONTHLY,r.WEEKLY=j.WEEKLY,r.DAILY=j.DAILY,r.HOURLY=j.HOURLY,r.MINUTELY=j.MINUTELY,r.SECONDLY=j.SECONDLY,r.MO=ot.MO,r.TU=ot.TU,r.WE=ot.WE,r.TH=ot.TH,r.FR=ot.FR,r.SA=ot.SA,r.SU=ot.SU,r.parseString=Gn,r.optionsToString=Hn,r}();function pp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(g){g.between(f,h,!0).forEach(function(y){a[Number(y)]=!0})})}i.forEach(function(f){var h=new Sr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Sr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){Rs(r,f.options)});var d=r._result;switch(C.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var hp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function yT(r,e){var t=[],n=[],i=[],s=[],a=Bn(r),o=a.dtstart,u=a.tzid,l=vT(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=bT(c),h=f.name,g=f.parms,y=f.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));t.push(Gn(c));break;case"RDATE":var _=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],P=_[1];P&&!u&&(u=P),n=n.concat(mp(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));i.push(Gn(y));break;case"EXDATE":s=s.concat(mp(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function gT(r,e){var t=yT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new po(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new D(fo(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new D(fo(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new D(fo(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Ms(r,e){return e===void 0&&(e={}),gT(r,_T(e))}function fo(r,e,t){return Ye(Ye({},r),{dtstart:e,tzid:t})}function _T(r){var e=[],t=Object.keys(r),n=Object.keys(hp);if(t.forEach(function(i){K(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Ye(Ye({},hp),r)}function TT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=_f(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function bT(r){var e=TT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function vT(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function ET(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function mp(r,e){return ET(e),r.split(",").map(function(t){return C.untilStringToDate(t)})}function yp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var po=function(r){nn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=yp.apply(n,["dtstart"]),n.tzid=yp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return pp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){gp(t,this._rrule)},e.prototype.exrule=function(t){gp(t,this._exrule)},e.prototype.rdate=function(t){_p(t,this._rdate)},e.prototype.exdate=function(t){_p(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Ms(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Ms(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Hn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(Tp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(Tp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(D);function gp(r,e){if(!(r instanceof D))throw new TypeError(String(r)+" is not RRule instance");K(e.map(String),String(r))||e.push(r)}function _p(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");K(e.map(Number),Number(r))||(e.push(r),C.sort(e))}function Tp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return C.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var V=class{static by(e,t){let n=[V.compareByUrgency,V.compareByStatus,V.compareByDueDate,V.compareByPriority,V.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=V.comparators[s];i.push(a?V.makeReversedComparator(u):u),s==="tag"&&(V.tagPropertyInstance=o)}return t.sort(V.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return V.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return V.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return V.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return V.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=V.tagPropertyInstance-1;return e.tags.length<V.tagPropertyInstance&&t.tags.length>=V.tagPropertyInstance?1:t.tags.length<V.tagPropertyInstance&&e.tags.length>=V.tagPropertyInstance?-1:e.tags.length<V.tagPropertyInstance&&t.tags.length<V.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isValid()&&!t.isValid()?-1:!e.isValid()&&t.isValid()||e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return V.cleanDescription(e.description).localeCompare(V.cleanDescription(t.description))}static cleanDescription(e){let t=ae().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},He=V;He.tagPropertyInstance=1,He.comparators={urgency:V.compareByUrgency,description:V.compareByDescription,priority:V.compareByPriority,start:V.compareByStartDate,scheduled:V.compareByScheduledDate,due:V.compareByDueDate,done:V.compareByDoneDate,path:V.compareByPath,status:V.compareByStatus,tag:V.compareByTag};var Re=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=D.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new D(u);return new Re({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new D($t(Le({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||He.compareByDate(this.startDate,e.startDate)!==0||He.compareByDate(this.scheduledDate,e.scheduledDate)!==0||He.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Re.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Re.nextAfterYears(e,n,t,a[1])),Re.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyMonths(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyYears(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new D(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var zt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/zt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*zt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*zt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*zt.startedCoefficient),e.priority){case"1":t+=1*zt.priorityCoefficient;break;case"2":t+=.65*zt.priorityCoefficient;break;case"3":t+=.325*zt.priorityCoefficient;break}return t}},Ht=zt;Ht.dueCoefficient=12,Ht.scheduledCoefficient=5,Ht.startedCoefficient=-3,Ht.priorityCoefficient=6,Ht.milliSecondsPerDay=1e3*60*60*24;var ve={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Pt="\u{1F501}",At="\u{1F6EB}",kt="\u23F3",Nt="\u{1F4C5}",ho="\u2705",et=class{},M=et;M.dateFormat="YYYY-MM-DD",M.indentationRegex=/^([\s\t>]*)/,M.listMarkerRegex=/[-*]/,M.checkboxRegex=/\[(.)\]/u,M.afterCheckboxRegex=/ *(.*)/u,M.taskRegex=new RegExp(et.indentationRegex.source+et.listMarkerRegex.source+" +"+et.checkboxRegex.source+et.afterCheckboxRegex.source,"u"),M.nonTaskRegex=new RegExp(et.indentationRegex.source+et.listMarkerRegex.source+"? *("+et.checkboxRegex.source+")?"+et.afterCheckboxRegex.source,"u"),M.listItemRegex=new RegExp(et.indentationRegex.source+"("+et.listMarkerRegex.source+")"),M.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,M.priorityRegex=/([⏫🔼🔽])$/u,M.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,M.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,M.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,M.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,M.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,M.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,M.hashTagsFromEnd=new RegExp(et.hashTags.source+"$");var le=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:h,recurrence:g,blockLink:y,tags:_,originalMarkdown:P}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=_,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=h,this.recurrence=g,this.blockLink=y,this.originalMarkdown=P}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(M.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ae();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2],f;switch(d){case" ":f="Todo";break;default:f="Done"}let h=l.match(M.blockLinkRegex),g=h!==null?h[0]:"";g!==""&&(l=l.replace(M.blockLinkRegex,"").trim());let y,_="3",P=null,A=null,N=null,H=null,Y="",oe=null,Q=[],$="",yt=20,st=0;do{y=!1;let b=l.match(M.priorityRegex);if(b!==null){switch(b[1]){case ve.Low:_="4";break;case ve.Medium:_="2";break;case ve.High:_="1";break}l=l.replace(M.priorityRegex,"").trim(),y=!0}let T=l.match(M.doneDateRegex);T!==null&&(H=window.moment(T[1],M.dateFormat),l=l.replace(M.doneDateRegex,"").trim(),y=!0);let v=l.match(M.dueDateRegex);v!==null&&(N=window.moment(v[1],M.dateFormat),l=l.replace(M.dueDateRegex,"").trim(),y=!0);let E=l.match(M.scheduledDateRegex);E!==null&&(A=window.moment(E[1],M.dateFormat),l=l.replace(M.scheduledDateRegex,"").trim(),y=!0);let x=l.match(M.startDateRegex);x!==null&&(P=window.moment(x[1],M.dateFormat),l=l.replace(M.startDateRegex,"").trim(),y=!0);let I=l.match(M.recurrenceRegex);I!==null&&(Y=I[1].trim(),l=l.replace(M.recurrenceRegex,"").trim(),y=!0);let F=l.match(M.hashTagsFromEnd);if(F!=null){l=l.replace(M.hashTagsFromEnd,"").trim(),y=!0;let re=F[0].trim();$=$.length>0?[re,$].join(" "):re}st++}while(y&&st<=yt);Y.length>0&&(oe=Re.fromText({recurrenceRuleText:Y,startDate:P,scheduledDate:A,dueDate:N})),$.length>0&&(l+=" "+$);let O=l.match(M.hashTags);return O!==null&&(Q=O.filter(b=>b!==u).map(b=>b.trim())),new le({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:_,startDate:P,scheduledDate:A,dueDate:N,doneDate:H,recurrence:oe,blockLink:g,tags:Q,originalMarkdown:e})}toLi(s){return se(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ae();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield bp.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,h=f.querySelector("p");if(h!==null){for(;h.firstChild;)f.insertBefore(h.firstChild,h);h.remove()}c.findAll("p").forEach(y=>{y.hasChildNodes()||y.remove()}),c.findAll(".footnotes").forEach(y=>{y.remove()});let g=a.createEl("input");return g.addClass("task-list-item-checkbox"),g.type="checkbox",this.status!=="Todo"&&(g.checked=!0,a.addClass("is-checked")),g.onClickEvent(y=>{y.preventDefault(),y.stopPropagation(),g.disabled=!0;let _=this.toggle();_s({originalTask:this,newTasks:_})}),a.prepend(g),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),g.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new tn;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+ve.High:this.priority==="2"?s=" "+ve.Medium:this.priority==="4"&&(s=" "+ve.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+Pt:` ${Pt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+At:` ${At} ${this.startDate.format(M.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+kt:` ${kt} ${this.scheduledDate.format(M.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+Nt:` ${Nt} ${this.dueDate.format(M.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+ho:` ${ho} ${this.doneDate.format(M.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ae();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new le($t(Le({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new le($t(Le(Le({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=Ht.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(He.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${Pt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(le.toTooltipDate({signifier:At,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(le.toTooltipDate({signifier:kt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(le.toTooltipDate({signifier:Nt,date:this.dueDate})),this.doneDate&&n.createDiv().setText(le.toTooltipDate({signifier:ho,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(M.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ae(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var _r=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new gs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>se(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof Ds.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof Ds.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof Ds.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new le($t(Le({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>se(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return se(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=_r.getTasksFromFileContent(a,i,t,e)}le.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=_r.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=le.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:_r.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var fd=require("obsidian");var p_=require("obsidian");function on(){}function _o(r){return r()}function Ep(){return Object.create(null)}function Ir(r){r.forEach(_o)}function Rp(r){return typeof r=="function"}function Mp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Dp(r){return Object.keys(r).length===0}var Op=!1;function wT(){Op=!0}function RT(){Op=!1}function m(r,e){r.appendChild(e)}function un(r,e,t){r.insertBefore(e,t||null)}function Fr(r){r.parentNode.removeChild(r)}function Pp(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function k(r){return document.createElement(r)}function MT(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function gt(r){return document.createTextNode(r)}function q(){return gt(" ")}function Ct(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Ap(r){return function(e){return e.preventDefault(),r.call(this,e)}}function S(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function DT(r){return Array.from(r.childNodes)}function kp(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function _t(r,e){r.value=e==null?"":e}var xr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=MT(t.nodeName):this.e=k(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)un(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Fr)}};var Vn;function Kn(r){Vn=r}function OT(){if(!Vn)throw new Error("Function called outside component initialization");return Vn}function To(r){OT().$$.on_mount.push(r)}var zn=[];var As=[],Ps=[],wp=[],PT=Promise.resolve(),yo=!1;function AT(){yo||(yo=!0,PT.then(Np))}function go(r){Ps.push(r)}var mo=new Set,Os=0;function Np(){let r=Vn;do{for(;Os<zn.length;){let e=zn[Os];Os++,Kn(e),kT(e.$$)}for(Kn(null),zn.length=0,Os=0;As.length;)As.pop()();for(let e=0;e<Ps.length;e+=1){let t=Ps[e];mo.has(t)||(mo.add(t),t())}Ps.length=0}while(zn.length);for(;wp.length;)wp.pop()();yo=!1,mo.clear(),Kn(r)}function kT(r){if(r.fragment!==null){r.update(),Ir(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(go)}}var NT=new Set;function CT(r,e){r&&r.i&&(NT.delete(r),r.i(e))}var YC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function ST(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||go(()=>{let u=s.map(_o).filter(Rp);a?a.push(...u):Ir(u),r.$$.on_mount=[]}),o.forEach(go)}function Cp(r,e){let t=r.$$;t.fragment!==null&&(Ir(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function xT(r,e){r.$$.dirty[0]===-1&&(zn.push(r),AT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Sp(r,e,t,n,i,s,a,o=[-1]){let u=Vn;Kn(r);let l=r.$$={fragment:null,ctx:null,props:s,update:on,not_equal:i,bound:Ep(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Ep(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let g=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=g)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](g),c&&xT(r,d)),f}):[],l.update(),c=!0,Ir(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){wT();let d=DT(e.target);l.fragment&&l.fragment.l(d),d.forEach(Fr)}else l.fragment&&l.fragment.c();e.intro&&CT(r.$$.fragment),ST(r,e.target,e.anchor,e.customElement),RT(),Np()}Kn(u)}var IT;typeof HTMLElement=="function"&&(IT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(_o).filter(Rp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Ir(this.$$.on_disconnect)}$destroy(){Cp(this,1),this.$destroy=on}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Dp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var ks=class{$destroy(){Cp(this,1),this.$destroy=on}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Dp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Zi=ys(Ee());var JP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function Mn(r){for(let[e,t]of Object.entries(JP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function l_(r,e,t){let n=r.slice();return n[25]=e[t].value,n[26]=e[t].label,n[27]=e[t].symbol,n}function c_(r){let e,t,n,i,s,a,o,u,l,c,d=r[27]+"",f,h,g,y=r[26]+"",_,P,A,N,H;return{c(){e=k("span"),t=q(),n=k("span"),i=k("input"),u=q(),l=k("label"),c=k("span"),f=gt(d),h=q(),g=k("span"),_=gt(y),A=q(),S(i,"type","radio"),S(i,"id",s="priority-"+r[25]),i.__value=a=r[25],i.value=i.__value,S(i,"accesskey",o=r[26].charAt(0).toLowerCase()),r[17][0].push(i),S(l,"for",P="priority-"+r[25]),S(n,"class","tasks-modal-priority")},m(Y,oe){un(Y,e,oe),un(Y,t,oe),un(Y,n,oe),m(n,i),i.checked=i.__value===r[0].priority,m(n,u),m(n,l),m(l,c),m(c,f),m(l,h),m(l,g),m(g,_),m(n,A),N||(H=Ct(i,"change",r[16]),N=!0)},p(Y,oe){oe&1&&(i.checked=i.__value===Y[0].priority)},d(Y){Y&&Fr(e),Y&&Fr(t),Y&&Fr(n),r[17][0].splice(r[17][0].indexOf(i),1),N=!1,H()}}}function eA(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,g,y,_,P,A,N,H,Y,oe,Q,$,yt,st,O,b,T,v,E,x,I,F,re,J,ce,Ze,je,cr,dr,Lt,fe,Xe,Qr,Be,xd,Fn,Id,Fd,ss,Ud,qd,Wd,fr,as,Ld,Yt,Yd,Un,$d,jd,os,Bd,Gd,Hd,us,qn,ls,zd,pr,Kd,Vd,Zd,Jr,kr,cs,Xd,hr,ds,Qd,Ja,fs=r[0].status+"",eo,Jd,ps,ef,hs,tf,rf,nf,to,sf,ms,ro,af,en=r[7],Ge=[];for(let z=0;z<en.length;z+=1)Ge[z]=c_(l_(r,en,z));return{c(){e=k("div"),t=k("form"),n=k("div"),i=k("label"),i.textContent="Description",s=q(),a=k("input"),o=q(),u=k("hr"),l=q(),c=k("div"),d=k("label"),f=gt("Priority"),g=q();for(let z=0;z<Ge.length;z+=1)Ge[z].c();y=q(),_=k("hr"),P=q(),A=k("div"),N=k("label"),N.textContent="Recurrence",H=q(),Y=k("input"),oe=q(),Q=k("code"),$=gt(Pt),yt=q(),st=new xr(!1),O=q(),b=k("hr"),T=q(),v=k("div"),E=k("div"),x=k("label"),x.textContent="Due",I=q(),F=k("input"),re=q(),J=k("code"),ce=gt(Nt),Ze=q(),je=new xr(!1),cr=q(),dr=k("hr"),Lt=q(),fe=k("div"),Xe=k("label"),Xe.textContent="Scheduled",Qr=q(),Be=k("input"),xd=q(),Fn=k("code"),Id=gt(kt),Fd=q(),ss=new xr(!1),Ud=q(),qd=k("hr"),Wd=q(),fr=k("div"),as=k("label"),as.textContent="Start",Ld=q(),Yt=k("input"),Yd=q(),Un=k("code"),$d=gt(At),jd=q(),os=new xr(!1),Bd=q(),Gd=k("hr"),Hd=q(),us=k("div"),qn=k("div"),ls=k("label"),ls.textContent="Only future dates:",zd=q(),pr=k("input"),Kd=q(),Vd=k("hr"),Zd=q(),Jr=k("div"),kr=k("div"),cs=k("label"),cs.textContent="Status:",Xd=q(),hr=k("input"),Qd=q(),Ja=k("code"),eo=gt(fs),Jd=q(),ps=k("div"),ef=gt(`Done on:
                `),hs=k("code"),tf=q(),rf=k("hr"),nf=q(),to=k("div"),sf=q(),ms=k("div"),ms.innerHTML='<button type="submit" class="mod-cta">Apply</button>',S(i,"for","description"),S(a,"id","description"),S(a,"type","text"),S(a,"class","tasks-modal-description"),S(a,"placeholder","Take out the trash"),S(n,"class","tasks-modal-section"),S(d,"for",h="priority-"+r[0].priority),S(c,"class","tasks-modal-section"),S(N,"for","recurrence"),S(Y,"id","description"),S(Y,"type","text"),S(Y,"placeholder","Try 'every 2 weeks on Thursday'."),st.a=null,S(A,"class","tasks-modal-section"),S(x,"for","due"),S(F,"id","due"),S(F,"type","text"),S(F,"placeholder",ld),je.a=null,S(E,"class","tasks-modal-date"),S(Xe,"for","scheduled"),S(Be,"id","scheduled"),S(Be,"type","text"),S(Be,"placeholder",ld),ss.a=null,S(fe,"class","tasks-modal-date"),S(as,"for","start"),S(Yt,"id","start"),S(Yt,"type","text"),S(Yt,"placeholder",ld),os.a=null,S(fr,"class","tasks-modal-date"),S(ls,"for","forwardOnly"),S(pr,"id","forwardOnly"),S(pr,"type","checkbox"),S(pr,"class","task-list-item-checkbox tasks-modal-checkbox"),S(us,"class","tasks-modal-date"),S(v,"class","tasks-modal-section"),S(cs,"for","status"),S(hr,"id","status"),S(hr,"type","checkbox"),S(hr,"class","task-list-item-checkbox tasks-modal-checkbox"),hr.checked=ds=r[0].status==="Done",hr.disabled=!0,S(Jr,"class","tasks-modal-section"),S(to,"class","tasks-modal-section"),S(ms,"class","tasks-modal-section"),S(e,"class","tasks-modal")},m(z,we){un(z,e,we),m(e,t),m(t,n),m(n,i),m(n,s),m(n,a),_t(a,r[0].description),r[15](a),m(t,o),m(t,u),m(t,l),m(t,c),m(c,d),m(d,f),m(c,g);for(let Fe=0;Fe<Ge.length;Fe+=1)Ge[Fe].m(c,null);m(t,y),m(t,_),m(t,P),m(t,A),m(A,N),m(A,H),m(A,Y),_t(Y,r[0].recurrenceRule),m(A,oe),m(A,Q),m(Q,$),m(Q,yt),st.m(r[5],Q),m(t,O),m(t,b),m(t,T),m(t,v),m(v,E),m(E,x),m(E,I),m(E,F),_t(F,r[0].dueDate),m(E,re),m(E,J),m(J,ce),m(J,Ze),je.m(r[4],J),m(v,cr),m(v,dr),m(v,Lt),m(v,fe),m(fe,Xe),m(fe,Qr),m(fe,Be),_t(Be,r[0].scheduledDate),m(fe,xd),m(fe,Fn),m(Fn,Id),m(Fn,Fd),ss.m(r[3],Fn),m(v,Ud),m(v,qd),m(v,Wd),m(v,fr),m(fr,as),m(fr,Ld),m(fr,Yt),_t(Yt,r[0].startDate),m(fr,Yd),m(fr,Un),m(Un,$d),m(Un,jd),os.m(r[2],Un),m(v,Bd),m(v,Gd),m(v,Hd),m(v,us),m(us,qn),m(qn,ls),m(qn,zd),m(qn,pr),pr.checked=r[0].forwardOnly,m(t,Kd),m(t,Vd),m(t,Zd),m(t,Jr),m(Jr,kr),m(kr,cs),m(kr,Xd),m(kr,hr),m(kr,Qd),m(kr,Ja),m(Ja,eo),m(Jr,Jd),m(Jr,ps),m(ps,ef),m(ps,hs),hs.innerHTML=r[6],m(t,tf),m(t,rf),m(t,nf),m(t,to),m(t,sf),m(t,ms),ro||(af=[Ct(a,"input",r[14]),Ct(c,"keyup",r[8]),Ct(Y,"input",r[18]),Ct(F,"input",r[19]),Ct(Be,"input",r[20]),Ct(Yt,"input",r[21]),Ct(pr,"change",r[22]),Ct(t,"submit",Ap(r[9]))],ro=!0)},p(z,[we]){if(we&1&&a.value!==z[0].description&&_t(a,z[0].description),we&1&&h!==(h="priority-"+z[0].priority)&&S(d,"for",h),we&129){en=z[7];let Fe;for(Fe=0;Fe<en.length;Fe+=1){let of=l_(z,en,Fe);Ge[Fe]?Ge[Fe].p(of,we):(Ge[Fe]=c_(of),Ge[Fe].c(),Ge[Fe].m(c,null))}for(;Fe<Ge.length;Fe+=1)Ge[Fe].d(1);Ge.length=en.length}we&1&&Y.value!==z[0].recurrenceRule&&_t(Y,z[0].recurrenceRule),we&32&&st.p(z[5]),we&1&&F.value!==z[0].dueDate&&_t(F,z[0].dueDate),we&16&&je.p(z[4]),we&1&&Be.value!==z[0].scheduledDate&&_t(Be,z[0].scheduledDate),we&8&&ss.p(z[3]),we&1&&Yt.value!==z[0].startDate&&_t(Yt,z[0].startDate),we&4&&os.p(z[2]),we&1&&(pr.checked=z[0].forwardOnly),we&1&&ds!==(ds=z[0].status==="Done")&&(hr.checked=ds),we&1&&fs!==(fs=z[0].status+"")&&kp(eo,fs),we&64&&(hs.innerHTML=z[6])},i:on,o:on,d(z){z&&Fr(e),r[15](null),Pp(Ge,z),ro=!1,Ir(af)}}}var ld="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function tA(r,e,t){var n,i;let{task:s}=e,{onSubmit:a}=e,o,u={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},l="",c="",d="",f="",h="",g=!1,y=[{value:"low",label:"Low",symbol:ve.Low},{value:"none",label:"Normal",symbol:ve.None},{value:"medium",label:"Medium",symbol:ve.Medium},{value:"high",label:"High",symbol:ve.High}];function _(b,T,v=void 0){if(!T)return`<i>no ${b} date</i>`;let E=Zi.parseDate(T,v,{forwardDate:v!=null});return E!==null?window.moment(E).format("YYYY-MM-DD"):`<i>invalid ${b} date</i>`}To(()=>{let{globalFilter:b}=ae(),T=s.getDescriptionWithoutGlobalFilter();(T!=s.description||T.indexOf(b)==-1)&&(g=!0);let v="none";s.priority==="4"?v="low":s.priority==="2"?v="medium":s.priority==="1"&&(v="high"),t(0,u={description:T,status:s.status,priority:v,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{o.focus()},10)});let P=b=>{if(b.key&&!b.altKey&&!b.ctrlKey){let T=y.find(v=>v.label.charAt(0).toLowerCase()==b.key);T&&t(0,u.priority=T.value,u)}},A=()=>{let{globalFilter:b}=ae(),T=u.description.trim();g&&(T=b+" "+T);let v=null,E=Zi.parseDate(u.startDate,new Date,{forwardDate:u.forwardOnly});E!==null&&(v=window.moment(E));let x=null,I=Zi.parseDate(u.scheduledDate,new Date,{forwardDate:u.forwardOnly});I!==null&&(x=window.moment(I));let F=null,re=Zi.parseDate(u.dueDate,new Date,{forwardDate:u.forwardOnly});re!==null&&(F=window.moment(re));let J=null;u.recurrenceRule&&(J=Re.fromText({recurrenceRuleText:u.recurrenceRule,startDate:v,scheduledDate:x,dueDate:F}));let ce;switch(u.priority){case"low":ce="4";break;case"medium":ce="2";break;case"high":ce="1";break;default:ce="3"}let Ze=new le(Object.assign(Object.assign({},s),{description:T,status:u.status,priority:ce,recurrence:J,startDate:v,scheduledDate:x,dueDate:F,doneDate:window.moment(u.doneDate,"YYYY-MM-DD").isValid()?window.moment(u.doneDate,"YYYY-MM-DD"):null}));a([Ze])},N=[[]];function H(){u.description=this.value,t(0,u)}function Y(b){As[b?"unshift":"push"](()=>{o=b,t(1,o)})}function oe(){u.priority=this.__value,t(0,u)}function Q(){u.recurrenceRule=this.value,t(0,u)}function $(){u.dueDate=this.value,t(0,u)}function yt(){u.scheduledDate=this.value,t(0,u)}function st(){u.startDate=this.value,t(0,u)}function O(){u.forwardOnly=this.checked,t(0,u)}return r.$$set=b=>{"task"in b&&t(10,s=b.task),"onSubmit"in b&&t(11,a=b.onSubmit)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(0,u.startDate=Mn(u.startDate),u),t(2,l=_("start",u.startDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&1){e:t(0,u.scheduledDate=Mn(u.scheduledDate),u),t(3,c=_("scheduled",u.scheduledDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&1){e:t(0,u.dueDate=Mn(u.dueDate),u),t(4,d=_("due",u.dueDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&12289){e:u.recurrenceRule?t(5,f=t(13,i=t(12,n=Re.fromText({recurrenceRuleText:u.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||n===void 0?void 0:n.toText())!==null&&i!==void 0?i:"<i>invalid recurrence rule</i>"):t(5,f="<i>not recurring</>")}if(r.$$.dirty&1){e:t(6,h=_("done",u.doneDate))}},[u,o,l,c,d,f,h,y,P,A,s,a,n,i,H,Y,oe,N,Q,$,yt,st,O]}var cd=class extends ks{constructor(e){super(),Sp(this,e,tA,eA,Mp,{task:10,onSubmit:11})}},f_=cd;var Dn=class extends p_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new f_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var h_=(r,e,t,n)=>{var d;if(r)return t instanceof fd.MarkdownView;if(!(t instanceof fd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=rA({line:o,path:i}),l=f=>{let h=f.map(g=>g.toFileLineString()).join(`
`);e.setLine(a,h)};new Dn({app:n,task:u,onSubmit:l}).open()},rA=({line:r,path:e})=>{var c;let t=le.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(M.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new le({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:""});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(M.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(M.blockLinkRegex,"")),new le({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:""})};var pd=require("obsidian");var m_=(r,e,t)=>{var u;if(r)return t instanceof pd.MarkdownView;if(!(t instanceof pd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=nA(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:sA(i.ch,a,o)})},nA=(r,e)=>{let t=r,n=le.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=iA(n);else{let i=r.match(M.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(M.taskRegex,`$1- [${a}] $3`)}else M.listItemRegex.test(r)?t=r.replace(M.listItemRegex,"$1$2 [ ]"):t=r.replace(M.indentationRegex,"$1- ")}return t},iA=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),sA=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(M.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var Ea=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>h_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:m_})}};var wa=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var Ra=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return se(this,null,function*(){var c;let{globalFilter:n}=ae(),i=e.findAll(".task-list-item").filter(d=>{var g;let f=(g=d.textContent)==null?void 0:g.split(`
`);if(f===void 0)return!1;let h=null;for(let y=0;y<f.length;y=y+1)if(f[y]!==""){h=f[y];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=le.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let g=(c=h.getAttr("data-line"))!=null?c:"0",y=Number.parseInt(g,10),_=yield f.toLi({parentUlElement:e,listIndex:y}),P=h.childNodes;for(let H=0;H<P.length;H=H+1){let Y=P[H];Y.nodeName.toLowerCase()==="div"?_.prepend(Y):Y.nodeName.toLowerCase()==="ul"&&_.append(Y)}let A=h.querySelectorAll("[data-footnote-id]"),N=_.querySelectorAll("[data-footnote-id]");if(A.length===N.length)for(let H=0;H<A.length;H++)N[H].replaceWith(A[H]);h.replaceWith(_)}})}};var y_=require("@codemirror/view"),g_=require("obsidian");var __=()=>y_.ViewPlugin.fromClass(hd),hd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new g_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=le.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Va=require("obsidian");var On=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Kr=class extends On{constructor(t){super();this.stringToFind=t}matches(t){return Kr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var Pn=class extends On{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new Pn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var be=class{canCreateFilterForLine(e){return be.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var md=class{constructor(e,t){this.instruction=e,this.filterFunction=t}},de=class{constructor(e){this.instruction=e}get filter(){return this._filter}get filterFunction(){if(this._filter)return this._filter.filterFunction}set filterFunction(e){e?this._filter=new md(this.instruction,e):this._filter=void 0}static fromFilter(e,t){let n=new de(e);return n.filterFunction=t,n}static fromError(e,t){let n=new de(e);return n.error=t,n}};var mt=class extends be{createFilterOrErrorMessage(e){let t=be.getMatch(this.filterRegExp(),e);if(t===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Kr(s);else if(i.includes("regex")&&(a=Pn.validateAndConstruct(s),a===null))return de.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null;return de.fromFilter(e,this.getFilter(a,o))}static stringIncludesCaseInsensitive(e,t){return Kr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var Ma=class extends mt{fieldName(){return"description"}value(e){let t=ae().globalFilter;return e.description.replace(t,"").trim()}};var T_=ys(Ee()),nr=class{static parseDate(e,t=!1){return window.moment(T_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var Da=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new de(e);return e===this._instruction?(t.filterFunction=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var An=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Da(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new de(e);return t.error=`do not understand filter: ${e}`,t}};var qt=class extends be{constructor(){super();this.filterInstructions=new An,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new de(t),s=be.getMatch(this.filterRegExp(),t);if(s!==null){let a=nr.parseDate(s[2]);a.isValid()?s[1]==="before"?i.filterFunction=o=>{let u=this.date(o);return u?u.isBefore(a):this.filterResultIfFieldMissing()}:s[1]==="after"?i.filterFunction=o=>{let u=this.date(o);return u?u.isAfter(a):this.filterResultIfFieldMissing()}:i.filterFunction=o=>{let u=this.date(o);return u?u.isSame(a):this.filterResultIfFieldMissing()}:i.error="do not understand "+this.fieldName()+" date"}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}};var yd=class extends qt{filterRegExp(){return yd.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},Xi=yd;Xi.doneRegexp=/^done (before|after|on)? ?(.*)/;var gd=class extends qt{filterRegExp(){return gd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Qi=gd;Qi.dueRegexp=/^due (before|after|on)? ?(.*)/;var Dr=class extends be{constructor(){super(...arguments);this._filters=new An}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var Oa=class extends Dr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Pa=class extends mt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Aa=class extends mt{fieldName(){return"path"}value(e){return e.path}};var _d=class extends be{createFilterOrErrorMessage(e){let t=new de(e),n=be.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filterFunction=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return _d.priorityRegexp}},Ji=_d;Ji.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var Td=class extends qt{filterRegExp(){return Td.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},es=Td;es.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var bd=class extends qt{filterRegExp(){return bd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},ts=bd;ts.startRegexp=/^starts (before|after|on)? ?(.*)/;var Or=class extends be{canCreateFilterForLine(e){return e===Or.instructionForFieldPresence||e===Or.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new de(e);if(e===Or.instructionForFieldPresence){let i=new de(e);return i.filterFunction=s=>this.dates(s).some(a=>a!==null),i}if(e===Or.instructionForFieldAbsence){let i=new de(e);return i.filterFunction=s=>!this.dates(s).some(a=>a!==null),i}let n=be.getMatch(this.filterRegExp(),e);if(n!==null){let i=nr.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filterFunction=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filterFunction=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new Or().dates(e).sort(He.compareByDate)[0]}filterRegExp(){return Or.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},ir=Or;ir.happensRegexp=/^happens (before|after|on)? ?(.*)/,ir.instructionForFieldPresence="has happens date",ir.instructionForFieldAbsence="no happens date";var ka=class extends Dr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var Na=class extends Dr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var Ca=class extends mt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Sa=class extends Ca{fieldNameSingular(){return"tag"}values(e){return e.tags}};var C_=ys(N_());var Ua=class extends be{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new de(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,C_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=qa(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filterFunction=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var Wa=class extends mt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var hA=[()=>new Na,()=>new ka,()=>new Ji,()=>new ir,()=>new ts,()=>new es,()=>new Qi,()=>new Xi,()=>new Aa,()=>new Ma,()=>new Sa,()=>new Pa,()=>new Oa,()=>new Ua,()=>new Wa];function qa(r){for(let e of hA){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var La=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Ya=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new La(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var $a=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var ja=class extends Map{},Ba=class extends $a{},Ga=class{constructor(e,t){this.groups=new ja;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Ba(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Ar.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Ba([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new ja([...this.groups.entries()].sort())}};var Ha=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var za=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ga(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Ya(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ha(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var ee=class{static by(e,t){return new za(e,t)}static getGroupNamesForTask(e,t){let n=ee.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[ee.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[ee.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[ee.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[ee.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new ir().earliestDate(e);return[ee.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(ee.groupDateFormat)}static groupByPath(e){return[ee.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[ee.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[ee.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[ee.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=ee.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=ee.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Ar=ee;Ar.groupDateFormat="YYYY-MM-DD dddd",Ar.groupers={backlink:ee.groupByBacklink,done:ee.groupByDoneDate,due:ee.groupByDueDate,filename:ee.groupByFileName,folder:ee.groupByFolder,happens:ee.groupByHappensDate,heading:ee.groupByHeading,path:ee.groupByPath,priority:ee.groupByPriority,recurrence:ee.groupByRecurrence,recurring:ee.groupByRecurring,root:ee.groupByRoot,scheduled:ee.groupByScheduledDate,start:ee.groupByStartDate,status:ee.groupByStatus,tags:ee.groupByTags};var In=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new tn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=He.by(this,e).slice(0,this.limit);return Ar.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=qa(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var Ka=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return se(this,null,function*(){n.addChild(new Cd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Cd=class extends Va.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new In({source:s}),this.queryType="tasks";break;default:this.query=new In({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new In({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return se(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return se(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{_s({originalTask:n,newTasks:u})};new Dn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return se(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield Va.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var lr=require("obsidian");var Za=class extends lr.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new lr.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ae();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>se(this,null,function*(){jt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new lr.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ae();n.setValue(i.removeGlobalFilter).onChange(s=>se(this,null,function*(){jt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new lr.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ae();n.setValue(i.setDoneDate).onChange(s=>se(this,null,function*(){jt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new lr.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ae();n.setValue(i.autoSuggestInEditor).onChange(s=>se(this,null,function*(){jt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new lr.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ae();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>se(this,null,function*(){jt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new lr.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ae();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>se(this,null,function*(){jt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))})}};var x_=require("obsidian");var mA=`${At}${kt}${Nt}`;function S_(r,e,t){let n=[];n=n.concat(_A(r,e,t)),n=n.concat(TA(r,e,t));let i=gA(r,t),s=Sd(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function yA(r){if(Object.values(ve).some(e=>e.length>0&&r.includes(e)))return!0}function gA(r,e){let t=[];return r.includes(Nt)||t.push({displayText:`${Nt} due date`,appendText:`${Nt} `}),r.includes(At)||t.push({displayText:`${At} start date`,appendText:`${At} `}),r.includes(kt)||t.push({displayText:`${kt} scheduled date`,appendText:`${kt} `}),yA(r)||(t.push({displayText:`${ve.High} high priority`,appendText:`${ve.High} `}),t.push({displayText:`${ve.Medium} medium priority`,appendText:`${ve.Medium} `}),t.push({displayText:`${ve.Low} low priority`,appendText:`${ve.Low} `})),r.includes(Pt)||t.push({displayText:`${Pt} recurring (repeat)`,appendText:`${Pt} `}),t}function _A(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${mA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Sd(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?nr.parseDate(Mn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(M.dateFormat)}`,appendText:`${o} ${l.format(M.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let y=`${nr.parseDate(h,!0).format(M.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${y})`,appendText:`${o} ${y} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function TA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Pt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Sd(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=Re.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let g=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:g,insertAt:a.index,insertSkip:a[0].length}),a[0]==g)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Sd(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Xa=class extends x_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(M.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=S_(n,i.ch,this.settings),a=[];for(let o of s)a.push($t(Le({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Qa=class extends I_.Plugin{onload(){return se(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Za({plugin:this})),mf({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new wa({obsidianEvents:this.app.workspace});this.cache=new _r({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Ra({plugin:this}),this.queryRenderer=new Ka({plugin:this,events:t}),this.registerEditorExtension(__()),this.registerEditorSuggest(new Xa(this.app,ae())),new Ea({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return se(this,null,function*(){let t=yield this.loadData();jt(t)})}saveSettings(){return se(this,null,function*(){yield this.saveData(ae())})}};
