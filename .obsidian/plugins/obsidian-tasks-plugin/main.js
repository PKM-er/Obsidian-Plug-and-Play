/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var x_=Object.create;var Sn=Object.defineProperty,S_=Object.defineProperties,I_=Object.getOwnPropertyDescriptor,U_=Object.getOwnPropertyDescriptors,F_=Object.getOwnPropertyNames,of=Object.getOwnPropertySymbols,q_=Object.getPrototypeOf,lf=Object.prototype.hasOwnProperty,W_=Object.prototype.propertyIsEnumerable;var uf=(r,e,t)=>e in r?Sn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,$e=(r,e)=>{for(var t in e||(e={}))lf.call(e,t)&&uf(r,t,e[t]);if(of)for(var t of of(e))W_.call(e,t)&&uf(r,t,e[t]);return r},Wt=(r,e)=>S_(r,U_(e));var h=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),L_=(r,e)=>{for(var t in e)Sn(r,t,{get:e[t],enumerable:!0})},cf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of F_(e))!lf.call(r,i)&&i!==t&&Sn(r,i,{get:()=>e[i],enumerable:!(n=I_(e,i))||n.enumerable});return r};var ps=(r,e,t)=>(t=r!=null?x_(q_(r)):{},cf(e||!r||!r.__esModule?Sn(t,"default",{value:r,enumerable:!0}):t,r)),Y_=r=>cf(Sn({},"__esModule",{value:!0}),r);var ne=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Wf=h((qA,bs)=>{var _f,Tf,bf,vf,Ef,Rf,wf,Mf,Df,_s,ao,Of,Pf,Af,Jr,kf,Nf,Cf,xf,Sf,If,Uf,Ff,qf,Ts;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof bs=="object"&&typeof bs.exports=="object"?r(t(e,t(bs.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};_f=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},Tf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},bf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},vf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},Ef=function(n,i){return function(s,a){i(s,a,n)}},Rf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},wf=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(p){try{f(a.next(p))}catch(y){l(y)}}function d(p){try{f(a.throw(p))}catch(y){l(y)}}function f(p){p.done?u(p.value):o(p.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},Mf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(p){return d([f,p])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(p){f=[6,p],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},Df=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Ts(i,n,s)},Ts=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},_s=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ao=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},Of=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(ao(arguments[i]));return n},Pf=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},Af=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},Jr=function(n){return this instanceof Jr?(this.v=n,this):new Jr(n)},kf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(_){return new Promise(function(A,I){u.push([m,_,A,I])>1||c(m,_)})})}function c(m,_){try{d(a[m](_))}catch(A){y(u[0][3],A)}}function d(m){m.value instanceof Jr?Promise.resolve(m.value.v).then(f,p):y(u[0][2],m)}function f(m){c("next",m)}function p(m){c("throw",m)}function y(m,_){m(_),u.shift(),u.length&&c(u[0][0],u[0][1])}},Nf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:Jr(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Cf=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof _s=="function"?_s(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},xf=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Sf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ts(i,n,s);return t(i,n),i},If=function(n){return n&&n.__esModule?n:{default:n}},Uf=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},Ff=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},qf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",_f),r("__assign",Tf),r("__rest",bf),r("__decorate",vf),r("__param",Ef),r("__metadata",Rf),r("__awaiter",wf),r("__generator",Mf),r("__exportStar",Df),r("__createBinding",Ts),r("__values",_s),r("__read",ao),r("__spread",Of),r("__spreadArrays",Pf),r("__spreadArray",Af),r("__await",Jr),r("__asyncGenerator",kf),r("__asyncDelegator",Nf),r("__asyncValues",Cf),r("__makeTemplateObject",xf),r("__importStar",Sf),r("__importDefault",If),r("__classPrivateFieldGet",Uf),r("__classPrivateFieldSet",Ff),r("__classPrivateFieldIn",qf)})});var J=h(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.matchAnyPattern=_r.extractTerms=_r.repeatedTimeunitPattern=void 0;function xT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}_r.repeatedTimeunitPattern=xT;function xp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}_r.extractTerms=xp;function ST(r){return`(?:${xp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}_r.matchAnyPattern=ST});var K=h((bo,vo)=>{(function(r,e){typeof bo=="object"&&typeof vo!="undefined"?vo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(bo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},A=function(w,v,T){var P=String(w);return!P||P.length>=v?w:""+Array(v+1-P.length).join(T)+w},I={s:A,z:function(w){var v=-w.utcOffset(),T=Math.abs(v),P=Math.floor(T/60),E=T%60;return(v<=0?"+":"-")+A(P,2,"0")+":"+A(E,2,"0")},m:function w(v,T){if(v.date()<T.date())return-w(T,v);var P=12*(T.year()-v.year())+(T.month()-v.month()),E=v.clone().add(P,l),U=T-E<0,O=v.clone().add(P+(U?-1:1),l);return+(-(P+(T-E)/(U?E-O:O-E))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},C="en",z={};z[C]=_;var re=function(w){return w instanceof le},fe=function(w,v,T){var P;if(!w)return C;if(typeof w=="string")z[w]&&(P=w),v&&(z[w]=v,P=w);else{var E=w.name;z[E]=w,P=E}return!T&&P&&(C=P),P||!T&&C},ee=function(w,v){if(re(w))return w.clone();var T=typeof v=="object"?v:{};return T.date=w,T.args=arguments,new le(T)},x=I;x.l=fe,x.i=re,x.w=function(w,v){return ee(w,{locale:v.$L,utc:v.$u,x:v.$x,$offset:v.$offset})};var le=function(){function w(T){this.$L=fe(T.locale,null,!0),this.parse(T)}var v=w.prototype;return v.parse=function(T){this.$d=function(P){var E=P.date,U=P.utc;if(E===null)return new Date(NaN);if(x.u(E))return new Date;if(E instanceof Date)return new Date(E);if(typeof E=="string"&&!/Z$/i.test(E)){var O=E.match(y);if(O){var F=O[2]-1||0,X=(O[7]||"0").substring(0,3);return U?new Date(Date.UTC(O[1],F,O[3]||1,O[4]||0,O[5]||0,O[6]||0,X)):new Date(O[1],F,O[3]||1,O[4]||0,O[5]||0,O[6]||0,X)}}return new Date(E)}(T),this.$x=T.x||{},this.init()},v.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},v.$utils=function(){return x},v.isValid=function(){return this.$d.toString()!==p},v.isSame=function(T,P){var E=ee(T);return this.startOf(P)<=E&&E<=this.endOf(P)},v.isAfter=function(T,P){return ee(T)<this.startOf(P)},v.isBefore=function(T,P){return this.endOf(P)<ee(T)},v.$g=function(T,P,E){return x.u(T)?this[P]:this.set(E,T)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(T,P){var E=this,U=!!x.u(P)||P,O=x.p(T),F=function(ht,Ce){var mt=x.w(E.$u?Date.UTC(E.$y,Ce,ht):new Date(E.$y,Ce,ht),E);return U?mt:mt.endOf(o)},X=function(ht,Ce){return x.w(E.toDate()[ht].apply(E.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(Ce)),E)},ue=this.$W,se=this.$M,pt=this.$D,Ye="set"+(this.$u?"UTC":"");switch(O){case d:return U?F(1,0):F(31,11);case l:return U?F(1,se):F(0,se+1);case u:var ur=this.$locale().weekStart||0,lr=(ue<ur?ue+7:ue)-ur;return F(U?pt-lr:pt+(6-lr),se);case o:case f:return X(Ye+"Hours",0);case a:return X(Ye+"Minutes",1);case s:return X(Ye+"Seconds",2);case i:return X(Ye+"Milliseconds",3);default:return this.clone()}},v.endOf=function(T){return this.startOf(T,!1)},v.$set=function(T,P){var E,U=x.p(T),O="set"+(this.$u?"UTC":""),F=(E={},E[o]=O+"Date",E[f]=O+"Date",E[l]=O+"Month",E[d]=O+"FullYear",E[a]=O+"Hours",E[s]=O+"Minutes",E[i]=O+"Seconds",E[n]=O+"Milliseconds",E)[U],X=U===o?this.$D+(P-this.$W):P;if(U===l||U===d){var ue=this.clone().set(f,1);ue.$d[F](X),ue.init(),this.$d=ue.set(f,Math.min(this.$D,ue.daysInMonth())).$d}else F&&this.$d[F](X);return this.init(),this},v.set=function(T,P){return this.clone().$set(T,P)},v.get=function(T){return this[x.p(T)]()},v.add=function(T,P){var E,U=this;T=Number(T);var O=x.p(P),F=function(se){var pt=ee(U);return x.w(pt.date(pt.date()+Math.round(se*T)),U)};if(O===l)return this.set(l,this.$M+T);if(O===d)return this.set(d,this.$y+T);if(O===o)return F(1);if(O===u)return F(7);var X=(E={},E[s]=e,E[a]=t,E[i]=r,E)[O]||1,ue=this.$d.getTime()+T*X;return x.w(ue,this)},v.subtract=function(T,P){return this.add(-1*T,P)},v.format=function(T){var P=this,E=this.$locale();if(!this.isValid())return E.invalidDate||p;var U=T||"YYYY-MM-DDTHH:mm:ssZ",O=x.z(this),F=this.$H,X=this.$m,ue=this.$M,se=E.weekdays,pt=E.months,Ye=function(Ce,mt,Zr,Ve){return Ce&&(Ce[mt]||Ce(P,U))||Zr[mt].substr(0,Ve)},ur=function(Ce){return x.s(F%12||12,Ce,"0")},lr=E.meridiem||function(Ce,mt,Zr){var Ve=Ce<12?"AM":"PM";return Zr?Ve.toLowerCase():Ve},ht={YY:String(this.$y).slice(-2),YYYY:this.$y,M:ue+1,MM:x.s(ue+1,2,"0"),MMM:Ye(E.monthsShort,ue,pt,3),MMMM:Ye(pt,ue),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:Ye(E.weekdaysMin,this.$W,se,2),ddd:Ye(E.weekdaysShort,this.$W,se,3),dddd:se[this.$W],H:String(F),HH:x.s(F,2,"0"),h:ur(1),hh:ur(2),a:lr(F,X,!0),A:lr(F,X,!1),m:String(X),mm:x.s(X,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:O};return U.replace(m,function(Ce,mt){return mt||ht[Ce]||O.replace(":","")})},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(T,P,E){var U,O=x.p(P),F=ee(T),X=(F.utcOffset()-this.utcOffset())*e,ue=this-F,se=x.m(this,F);return se=(U={},U[d]=se/12,U[l]=se,U[c]=se/3,U[u]=(ue-X)/6048e5,U[o]=(ue-X)/864e5,U[a]=ue/t,U[s]=ue/e,U[i]=ue/r,U)[O]||ue,E?se:x.a(se)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return z[this.$L]},v.locale=function(T,P){if(!T)return this.$L;var E=this.clone(),U=fe(T,P,!0);return U&&(E.$L=U),E},v.clone=function(){return x.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},w}(),pe=le.prototype;return ee.prototype=pe,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(w){pe[w[1]]=function(v){return this.$g(v,w[0],w[1])}}),ee.extend=function(w,v){return w.$i||(w(v,le,ee),w.$i=!0),ee},ee.locale=fe,ee.isDayjs=re,ee.unix=function(w){return ee(1e3*w)},ee.en=z[C],ee.Ls=z,ee.p={},ee})});var Se=h(Tr=>{"use strict";var IT=Tr&&Tr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tr,"__esModule",{value:!0});Tr.findYearClosestToRef=Tr.findMostLikelyADYear=void 0;var UT=IT(K());function FT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}Tr.findMostLikelyADYear=FT;function qT(r,e,t){let n=UT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}Tr.findYearClosestToRef=qT});var Ie=h(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.parseTimeUnits=W.TIME_UNITS_PATTERN=W.parseYear=W.YEAR_PATTERN=W.parseOrdinalNumberPattern=W.ORDINAL_NUMBER_PATTERN=W.parseNumberPattern=W.NUMBER_PATTERN=W.TIME_UNIT_DICTIONARY=W.ORDINAL_WORD_DICTIONARY=W.INTEGER_WORD_DICTIONARY=W.MONTH_DICTIONARY=W.FULL_MONTH_NAME_DICTIONARY=W.WEEKDAY_DICTIONARY=void 0;var As=J(),WT=Se();W.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};W.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};W.MONTH_DICTIONARY=Object.assign(Object.assign({},W.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});W.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};W.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};W.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};W.NUMBER_PATTERN=`(?:${As.matchAnyPattern(W.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function Ip(r){let e=r.toLowerCase();return W.INTEGER_WORD_DICTIONARY[e]!==void 0?W.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}W.parseNumberPattern=Ip;W.ORDINAL_NUMBER_PATTERN=`(?:${As.matchAnyPattern(W.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function LT(r){let e=r.toLowerCase();return W.ORDINAL_WORD_DICTIONARY[e]!==void 0?W.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}W.parseOrdinalNumberPattern=LT;W.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function YT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return WT.findMostLikelyADYear(e)}W.parseYear=YT;var Up=`(${W.NUMBER_PATTERN})\\s{0,3}(${As.matchAnyPattern(W.TIME_UNIT_DICTIONARY)})`,Sp=new RegExp(Up,"i");W.TIME_UNITS_PATTERN=As.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",Up);function $T(r){let e={},t=r,n=Sp.exec(t);for(;n;)jT(e,n),t=t.substring(n[0].length).trim(),n=Sp.exec(t);return e}W.parseTimeUnits=$T;function jT(r,e){let t=Ip(e[1]),n=W.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Fp=h((Eo,Ro)=>{(function(r,e){typeof Eo=="object"&&typeof Ro!="undefined"?Ro.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Eo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var st=h(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});kt.implySimilarTime=kt.assignSimilarTime=kt.assignSimilarDate=kt.assignTheNextDay=void 0;var qp=Ee();function BT(r,e){e=e.add(1,"day"),Wp(r,e),Lp(r,e)}kt.assignTheNextDay=BT;function Wp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}kt.assignSimilarDate=Wp;function GT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",qp.Meridiem.AM):r.assign("meridiem",qp.Meridiem.PM)}kt.assignSimilarTime=GT;function Lp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}kt.implySimilarTime=Lp});var Yp=h(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.toTimezoneOffset=Ir.TIMEZONE_ABBR_MAP=void 0;Ir.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function HT(r){var e;return r==null?null:typeof r=="number"?r:(e=Ir.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Ir.toTimezoneOffset=HT});var he=h(Nt=>{"use strict";var $p=Nt&&Nt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Nt,"__esModule",{value:!0});Nt.ParsingResult=Nt.ParsingComponents=Nt.ReferenceWithTimezone=void 0;var zT=$p(Fp()),ks=$p(K()),wo=st(),KT=Yp();ks.default.extend(zT.default);var Mo=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=KT.toTimezoneOffset(e.timezone))}};Nt.ReferenceWithTimezone=Mo;var Ur=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=ks.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Ur(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return ks.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=ks.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Ur(e);return t.hour||t.minute||t.second?(wo.assignSimilarTime(i,n),wo.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(wo.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Nt.ParsingComponents=Ur;var Hn=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Ur(e),this.end=s}clone(){let e=new Hn(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Nt.ParsingResult=Hn});var R=h(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.AbstractParserWithWordBoundaryChecking=void 0;var Do=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};Ns.AbstractParserWithWordBoundaryChecking=Do});var jp=h(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});var Po=Ie(),VT=he(),ZT=R(),XT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),QT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Oo=class extends ZT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?QT:XT}innerExtract(e,t){let n=Po.parseTimeUnits(t[1]);return VT.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ao.default=Oo});var Vp=h(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});var JT=Se(),zp=Ie(),Kp=Ie(),Cs=Ie(),eb=J(),tb=R(),rb=new RegExp(`(?:on\\s{0,3})?(${Cs.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Cs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${eb.matchAnyPattern(zp.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Kp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Bp=1,Gp=2,nb=3,Hp=4,ko=class extends tb.AbstractParserWithWordBoundaryChecking{innerPattern(){return rb}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=zp.MONTH_DICTIONARY[t[nb].toLowerCase()],s=Cs.parseOrdinalNumberPattern(t[Bp]);if(s>31)return t.index=t.index+t[Bp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Hp]){let a=Kp.parseYear(t[Hp]);n.start.assign("year",a)}else{let a=JT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Gp]){let a=Cs.parseOrdinalNumberPattern(t[Gp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};No.default=ko});var eh=h(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});var ib=Se(),Qp=Ie(),xs=Ie(),Jp=Ie(),sb=J(),ab=R(),ob=new RegExp(`(${sb.matchAnyPattern(Qp.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${xs.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${xs.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Jp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),ub=1,lb=2,Zp=3,Xp=4,Co=class extends ab.AbstractParserWithWordBoundaryChecking{innerPattern(){return ob}innerExtract(e,t){let n=Qp.MONTH_DICTIONARY[t[ub].toLowerCase()],i=xs.parseOrdinalNumberPattern(t[lb]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Xp]){let u=Jp.parseYear(t[Xp]);s.assign("year",u)}else{let u=ib.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Zp])return s;let a=xs.parseOrdinalNumberPattern(t[Zp]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};xo.default=Co});var nh=h(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});var So=Ie(),cb=Se(),db=J(),rh=Ie(),fb=R(),pb=new RegExp(`((?:in)\\s*)?(${db.matchAnyPattern(So.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${rh.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),hb=1,mb=2,th=3,Io=class extends fb.AbstractParserWithWordBoundaryChecking{innerPattern(){return pb}innerExtract(e,t){let n=t[mb].toLowerCase();if(t[0].length<=3&&!So.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[hb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=So.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[th]){let a=rh.parseYear(t[th]);i.start.assign("year",a)}else{let a=cb.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Uo.default=Io});var ah=h(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var sh=Ie(),yb=J(),gb=R(),_b=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${yb.matchAnyPattern(sh.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Tb=1,bb=2,ih=3,vb=4,Fo=class extends gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return _b}innerExtract(e,t){let n=t[ih]?parseInt(t[ih]):sh.MONTH_DICTIONARY[t[bb].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Tb]);return{day:parseInt(t[vb]),month:n,year:i}}};qo.default=Fo});var oh=h(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});var Eb=R(),Rb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),wb=1,Mb=2,Wo=class extends Eb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Rb}innerExtract(e,t){let n=parseInt(t[Mb]),i=parseInt(t[wb]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Lo.default=Wo});var Fr=h(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.AbstractTimeExpressionParser=void 0;var Be=Ee();function Db(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function Ob(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var uh=2,sn=3,Ss=4,Is=5,zn=6,Yo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[uh]);if(o>100){if(this.strictMode||t[sn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[sn]!=null){if(t[sn].length==1&&!t[zn])return null;s=parseInt(t[sn])}if(s>=60)return null;if(o>12&&(a=Be.Meridiem.PM),t[zn]!=null){if(o>12)return null;let u=t[zn][0].toLowerCase();u=="a"&&(a=Be.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Be.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Be.Meridiem.AM):i.imply("meridiem",Be.Meridiem.PM),t[Is]!=null){let u=parseInt(t[Is].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ss]!=null){let u=parseInt(t[Ss]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[Is]!=null){let u=parseInt(t[Is].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ss]!=null){let u=parseInt(t[Ss]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[uh]),a=0,o=-1;if(t[sn]!=null?a=parseInt(t[sn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Be.Meridiem.PM),t[zn]!=null){if(s>12)return null;let u=t[zn][0].toLowerCase();u=="a"&&(o=Be.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Be.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Be.Meridiem.AM?(n.start.imply("meridiem",Be.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Be.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Be.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Be.Meridiem.PM)):s>12?i.imply("meridiem",Be.Meridiem.PM):s<=12&&i.imply("meridiem",Be.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=Db(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=Ob(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};Us.AbstractTimeExpressionParser=Yo});var lh=h(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var Fs=Ee(),Pb=Fr(),$o=class extends Pb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Fs.Meridiem.PM)):i<6&&n.assign("meridiem",Fs.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Fs.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Fs.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};jo.default=$o});var at=h(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});an.addImpliedTimeUnits=an.reverseTimeUnits=void 0;function Ab(r){let e={};for(let t in r)e[t]=-r[t];return e}an.reverseTimeUnits=Ab;function kb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}an.addImpliedTimeUnits=kb});var ch=h(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var Go=Ie(),Nb=he(),Cb=R(),xb=at(),Sb=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Ib=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Bo=class extends Cb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Ib:Sb}innerExtract(e,t){let n=Go.parseTimeUnits(t[1]),i=xb.reverseTimeUnits(n);return Nb.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ho.default=Bo});var dh=h(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Ko=Ie(),Ub=he(),Fb=R(),qb=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Wb=new RegExp("("+Ko.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Lb=1,zo=class extends Fb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Wb:qb}innerExtract(e,t){let n=Ko.parseTimeUnits(t[Lb]);return Ub.ParsingComponents.createRelativeFromReference(e.reference,n)}};Vo.default=zo});var un=h(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.MergingRefiner=on.Filter=void 0;var Zo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};on.Filter=Zo;var Xo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};on.MergingRefiner=Xo});var Ct=h(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Yb=un(),Qo=class extends Yb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Jo.default=Qo});var fh=h(Kn=>{"use strict";var $b=Kn&&Kn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Kn,"__esModule",{value:!0});var jb=$b(Ct()),eu=class extends jb.default{patternBetween(){return/^\s*(to|-)\s*$/i}};Kn.default=eu});var ph=h(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.mergeDateTimeComponent=ln.mergeDateTimeResult=void 0;var Bb=Ee();function Gb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=tu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=tu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}ln.mergeDateTimeResult=Gb;function tu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Bb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}ln.mergeDateTimeComponent=tu});var Ht=h(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var Hb=un(),hh=ph(),ru=class extends Hb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?hh.mergeDateTimeResult(t,n):hh.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};nu.default=ru});var mh=h(Vn=>{"use strict";var zb=Vn&&Vn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Vn,"__esModule",{value:!0});var Kb=zb(Ht()),iu=class extends Kb.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};Vn.default=iu});var yh=h(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Vb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Zb={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},su=class{constructor(e){this.timezone=Object.assign(Object.assign({},Zb),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Vb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};au.default=su});var qs=h(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var Xb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Qb=1,Jb=2,ev=3,ou=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=Xb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Jb]),o=parseInt(s[ev]||"0"),u=a*60+o;u>14*60||(s[Qb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};uu.default=ou});var gh=h(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var lu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};cu.default=lu});var _h=h(Zn=>{"use strict";var tv=Zn&&Zn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Zn,"__esModule",{value:!0});var rv=tv(K()),du=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=rv.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};Zn.default=du});var Th=h(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var nv=un(),fu=class extends nv.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};pu.default=fu});var yu=h(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var iv=R(),sv=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),av=1,ov=2,uv=3,bh=4,lv=5,vh=6,Eh=7,Rh=8,wh=9,hu=class extends iv.AbstractParserWithWordBoundaryChecking{innerPattern(){return sv}innerExtract(e,t){let n={};if(n.year=parseInt(t[av]),n.month=parseInt(t[ov]),n.day=parseInt(t[uv]),t[bh]!=null)if(n.hour=parseInt(t[bh]),n.minute=parseInt(t[lv]),t[vh]!=null&&(n.second=parseInt(t[vh])),t[Eh]!=null&&(n.millisecond=parseInt(t[Eh])),t[Rh]==null)n.timezoneOffset=0;else{let i=parseInt(t[Rh]),s=0;t[wh]!=null&&(s=parseInt(t[wh]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};mu.default=hu});var Mh=h(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var cv=un(),gu=class extends cv.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};_u.default=gu});var zt=h(cn=>{"use strict";var qr=cn&&cn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(cn,"__esModule",{value:!0});cn.includeCommonConfiguration=void 0;var dv=qr(yh()),fv=qr(qs()),Dh=qr(gh()),pv=qr(_h()),hv=qr(Th()),mv=qr(yu()),yv=qr(Mh());function gv(r,e=!1){return r.parsers.unshift(new mv.default),r.refiners.unshift(new yv.default),r.refiners.unshift(new dv.default),r.refiners.unshift(new fv.default),r.refiners.unshift(new Dh.default),r.refiners.push(new Dh.default),r.refiners.push(new pv.default),r.refiners.push(new hv.default(e)),r}cn.includeCommonConfiguration=gv});var Vt=h(Q=>{"use strict";var _v=Q&&Q.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Q,"__esModule",{value:!0});Q.noon=Q.morning=Q.midnight=Q.yesterdayEvening=Q.evening=Q.lastNight=Q.tonight=Q.theDayAfter=Q.tomorrow=Q.theDayBefore=Q.yesterday=Q.today=Q.now=void 0;var xt=he(),dn=_v(K()),Kt=st(),Xn=Ee();function Tv(r){let e=dn.default(r.instant),t=new xt.ParsingComponents(r,{});return Kt.assignSimilarDate(t,e),Kt.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}Q.now=Tv;function bv(r){let e=dn.default(r.instant),t=new xt.ParsingComponents(r,{});return Kt.assignSimilarDate(t,e),Kt.implySimilarTime(t,e),t}Q.today=bv;function vv(r){return Oh(r,1)}Q.yesterday=vv;function Oh(r,e){return Tu(r,-e)}Q.theDayBefore=Oh;function Ev(r){return Tu(r,1)}Q.tomorrow=Ev;function Tu(r,e){let t=dn.default(r.instant),n=new xt.ParsingComponents(r,{});return t=t.add(e,"day"),Kt.assignSimilarDate(n,t),Kt.implySimilarTime(n,t),n}Q.theDayAfter=Tu;function Rv(r,e=22){let t=dn.default(r.instant),n=new xt.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",Xn.Meridiem.PM),Kt.assignSimilarDate(n,t),n}Q.tonight=Rv;function wv(r,e=0){let t=dn.default(r.instant),n=new xt.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Kt.assignSimilarDate(n,t),n.imply("hour",e),n}Q.lastNight=wv;function Mv(r,e=20){let t=new xt.ParsingComponents(r,{});return t.imply("meridiem",Xn.Meridiem.PM),t.imply("hour",e),t}Q.evening=Mv;function Dv(r,e=20){let t=dn.default(r.instant),n=new xt.ParsingComponents(r,{});return t=t.add(-1,"day"),Kt.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",Xn.Meridiem.PM),n}Q.yesterdayEvening=Dv;function Ov(r){let e=new xt.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}Q.midnight=Ov;function Pv(r,e=6){let t=new xt.ParsingComponents(r,{});return t.imply("meridiem",Xn.Meridiem.AM),t.imply("hour",e),t}Q.morning=Pv;function Av(r){let e=new xt.ParsingComponents(r,{});return e.imply("meridiem",Xn.Meridiem.AM),e.imply("hour",12),e}Q.noon=Av});var Ph=h(gt=>{"use strict";var kv=gt&&gt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Nv=gt&&gt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Cv=gt&&gt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&kv(e,r,t);return Nv(e,r),e},xv=gt&&gt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gt,"__esModule",{value:!0});var Sv=xv(K()),Iv=R(),Uv=st(),Qn=Cv(Vt()),Fv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,bu=class extends Iv.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Fv}innerExtract(e,t){let n=Sv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Qn.now(e.reference);case"today":return Qn.today(e.reference);case"yesterday":return Qn.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return Qn.tomorrow(e.reference);case"tonight":return Qn.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),Uv.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};gt.default=bu});var Ah=h(Jn=>{"use strict";var qv=Jn&&Jn.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Jn,"__esModule",{value:!0});var Ws=Ee(),Wv=R(),Lv=qv(K()),Yv=st(),$v=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,vu=class extends Wv.AbstractParserWithWordBoundaryChecking{innerPattern(){return $v}innerExtract(e,t){let n=Lv.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Ws.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Ws.Meridiem.PM),i.imply("hour",20);break;case"midnight":Yv.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Ws.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Ws.Meridiem.AM),i.imply("hour",12);break}return i}};Jn.default=vu});var Wr=h(br=>{"use strict";var jv=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.toDayJSClosestWeekday=br.toDayJSWeekday=void 0;var kh=jv(K());function Bv(r,e,t){if(!t)return Nh(r,e);let n=kh.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}br.toDayJSWeekday=Bv;function Nh(r,e){let t=kh.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}br.toDayJSClosestWeekday=Nh});var xh=h(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});var Ch=Ie(),Gv=J(),Hv=R(),zv=Wr(),Kv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Gv.matchAnyPattern(Ch.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Vv=1,Zv=2,Xv=3,Eu=class extends Hv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Kv}innerExtract(e,t){let n=t[Zv].toLowerCase(),i=Ch.WEEKDAY_DICTIONARY[n],s=t[Vv],a=t[Xv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=zv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ru.default=Eu});var Uh=h(ei=>{"use strict";var Qv=ei&&ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ei,"__esModule",{value:!0});var Ih=Ie(),Sh=he(),Jv=Qv(K()),e1=R(),t1=J(),r1=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${t1.matchAnyPattern(Ih.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),n1=1,i1=2,wu=class extends e1.AbstractParserWithWordBoundaryChecking{innerPattern(){return r1}innerExtract(e,t){let n=t[n1].toLowerCase(),i=t[i1].toLowerCase(),s=Ih.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,Sh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,Sh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Jv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ei.default=wu});var _t=h(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.ParsingContext=hn.Chrono=void 0;var fn=he(),s1=Mu(),pn=class{constructor(e){e=e||s1.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new pn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new Ls(e,t,n),s=[];return this.parsers.forEach(a=>{let o=pn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof fn.ParsingResult?c=l:l instanceof fn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};hn.Chrono=pn;var Ls=class{constructor(e,t,n){this.text=e,this.reference=new fn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof fn.ParsingComponents?e:new fn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new fn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};hn.ParsingContext=Ls});var Lr=h(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var Fh=Se(),a1=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ys=1,qh=5,Wh=2,Lh=3,Du=4,Ou=class{constructor(e){this.groupNumberMonth=e?Lh:Wh,this.groupNumberDay=e?Wh:Lh}pattern(){return a1}extract(e,t){if(t[Ys]=="/"||t[qh]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ys].length,i=t[0].substr(t[Ys].length,t[0].length-t[Ys].length-t[qh].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Du]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Du]){let u=parseInt(t[Du]),l=Fh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=Fh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Pu.default=Ou});var $h=h(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});var Yh=Ie(),o1=he(),u1=R(),l1=at(),c1=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Yh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Au=class extends u1.AbstractParserWithWordBoundaryChecking{innerPattern(){return c1}innerExtract(e,t){let n=t[1].toLowerCase(),i=Yh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=l1.reverseTimeUnits(i);break}return o1.ParsingComponents.createRelativeFromReference(e.reference,i)}};ku.default=Au});var Bh=h(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});var d1=un(),Nu=he(),f1=Ie(),p1=at();function jh(r){return r.text.match(/\s+(before|from)$/i)!=null}function h1(r){return r.text.match(/\s+(after|since)$/i)!=null}var Cu=class extends d1.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!jh(t)&&!h1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=f1.parseTimeUnits(t.text);jh(t)&&(i=p1.reverseTimeUnits(i));let s=Nu.ParsingComponents.createRelativeFromReference(new Nu.ReferenceWithTimezone(n.start.date()),i);return new Nu.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};xu.default=Cu});var Mu=h(_e=>{"use strict";var Me=_e&&_e.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_e,"__esModule",{value:!0});_e.createConfiguration=_e.createCasualConfiguration=_e.parseDate=_e.parse=_e.GB=_e.strict=_e.casual=void 0;var m1=Me(jp()),y1=Me(Vp()),g1=Me(eh()),_1=Me(nh()),T1=Me(ah()),b1=Me(oh()),v1=Me(lh()),E1=Me(ch()),R1=Me(dh()),w1=Me(fh()),M1=Me(mh()),D1=zt(),O1=Me(Ph()),P1=Me(Ah()),A1=Me(xh()),k1=Me(Uh()),Su=_t(),N1=Me(Lr()),C1=Me($h()),x1=Me(Bh());_e.casual=new Su.Chrono(Gh(!1));_e.strict=new Su.Chrono($s(!0,!1));_e.GB=new Su.Chrono($s(!1,!0));function S1(r,e,t){return _e.casual.parse(r,e,t)}_e.parse=S1;function I1(r,e,t){return _e.casual.parseDate(r,e,t)}_e.parseDate=I1;function Gh(r=!1){let e=$s(!1,r);return e.parsers.unshift(new O1.default),e.parsers.unshift(new P1.default),e.parsers.unshift(new _1.default),e.parsers.unshift(new k1.default),e.parsers.unshift(new C1.default),e}_e.createCasualConfiguration=Gh;function $s(r=!0,e=!1){return D1.includeCommonConfiguration({parsers:[new N1.default(e),new m1.default,new y1.default,new g1.default,new A1.default,new T1.default,new b1.default,new v1.default(r),new E1.default(r),new R1.default(r)],refiners:[new x1.default,new M1.default,new w1.default]},r)}_e.createConfiguration=$s});var Hh=h(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});var U1=Fr(),Iu=class extends U1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Uu.default=Iu});var ti=h(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.parseTimeUnits=te.TIME_UNITS_PATTERN=te.parseYear=te.YEAR_PATTERN=te.parseNumberPattern=te.NUMBER_PATTERN=te.TIME_UNIT_DICTIONARY=te.INTEGER_WORD_DICTIONARY=te.MONTH_DICTIONARY=te.WEEKDAY_DICTIONARY=void 0;var Fu=J(),F1=Se();te.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};te.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};te.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};te.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};te.NUMBER_PATTERN=`(?:${Fu.matchAnyPattern(te.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Kh(r){let e=r.toLowerCase();return te.INTEGER_WORD_DICTIONARY[e]!==void 0?te.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}te.parseNumberPattern=Kh;te.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function q1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return F1.findMostLikelyADYear(e)}te.parseYear=q1;var Vh=`(${te.NUMBER_PATTERN})\\s{0,5}(${Fu.matchAnyPattern(te.TIME_UNIT_DICTIONARY)})\\s{0,5}`,zh=new RegExp(Vh,"i");te.TIME_UNITS_PATTERN=Fu.repeatedTimeunitPattern("",Vh);function W1(r){let e={},t=r,n=zh.exec(t);for(;n;)L1(e,n),t=t.substring(n[0].length),n=zh.exec(t);return e}te.parseTimeUnits=W1;function L1(r,e){let t=Kh(e[1]),n=te.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Xh=h(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Zh=ti(),Y1=J(),$1=R(),j1=Wr(),B1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${Y1.matchAnyPattern(Zh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),G1=1,H1=3,z1=2,qu=class extends $1.AbstractParserWithWordBoundaryChecking{innerPattern(){return B1}innerExtract(e,t){let n=t[z1].toLowerCase(),i=Zh.WEEKDAY_DICTIONARY[n],s=t[G1],a=t[H1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=j1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Wu.default=qu});var tm=h(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var vr=Ee(),K1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),V1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),Z1=2,Qh=3,Jh=4,em=5,mn=class{pattern(e){return K1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=mn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=V1.exec(i);return s&&(n.end=mn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[Z1]),t[Qh]!=null&&(i=parseInt(t[Qh])),i>=60||n>24)return null;if(n>=12&&(s=vr.Meridiem.PM),t[em]!=null){if(n>12)return null;let a=t[em].toLowerCase();a.match(/morgen|vormittag/)&&(s=vr.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=vr.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=vr.Meridiem.AM,n=0):n<6?s=vr.Meridiem.AM:(s=vr.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",vr.Meridiem.AM):e.imply("meridiem",vr.Meridiem.PM),t[Jh]!=null){let a=parseInt(t[Jh]);if(a>=60)return null;e.assign("second",a)}return e}};Lu.default=mn});var rm=h(ri=>{"use strict";var X1=ri&&ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ri,"__esModule",{value:!0});var Q1=X1(Ct()),Yu=class extends Q1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};ri.default=Yu});var nm=h(ni=>{"use strict";var J1=ni&&ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ni,"__esModule",{value:!0});var eE=J1(Ht()),$u=class extends eE.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};ni.default=$u});var ju=h(si=>{"use strict";var tE=si&&si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(si,"__esModule",{value:!0});var rE=tE(K()),Yr=Ee(),nE=R(),iE=st(),sE=at(),ii=class extends nE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=rE.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return iE.implySimilarTime(s,n),ii.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=sE.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break}return e}};si.default=ii});var am=h(Tt=>{"use strict";var aE=Tt&&Tt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),oE=Tt&&Tt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),uE=Tt&&Tt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&aE(e,r,t);return oE(e,r),e},sm=Tt&&Tt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Tt,"__esModule",{value:!0});var lE=sm(K()),cE=R(),$r=st(),dE=sm(ju()),im=uE(Vt()),fE=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),pE=1,hE=2,Bu=class extends cE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return fE}innerExtract(e,t){let n=lE.default(e.refDate),i=(t[pE]||"").toLowerCase(),s=(t[hE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=im.now(e.reference);break;case"heute":a=im.today(e.reference);break;case"morgen":$r.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),$r.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),$r.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=dE.default.extractTimeComponents(a,s)),a}};Tt.default=Bu});var fm=h(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var mE=Se(),cm=ti(),dm=ti(),yE=J(),gE=R(),_E=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${yE.matchAnyPattern(cm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${dm.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),om=1,um=2,TE=3,lm=4,Gu=class extends gE.AbstractParserWithWordBoundaryChecking{innerPattern(){return _E}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=cm.MONTH_DICTIONARY[t[TE].toLowerCase()],s=parseInt(t[om]);if(s>31)return t.index=t.index+t[om].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[lm]){let a=dm.parseYear(t[lm]);n.start.assign("year",a)}else{let a=mE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[um]){let a=parseInt(t[um]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hu.default=Gu});var pm=h(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var js=ti(),bE=he(),vE=R(),EE=at(),RE=J(),zu=class extends vE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${js.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${RE.matchAnyPattern(js.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?js.parseNumberPattern(t[2]):1,i=js.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=EE.reverseTimeUnits(s)),bE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Ku.default=zu});var ym=h(De=>{"use strict";var bt=De&&De.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(De,"__esModule",{value:!0});De.createConfiguration=De.createCasualConfiguration=De.parseDate=De.parse=De.strict=De.casual=void 0;var wE=zt(),hm=_t(),ME=bt(Lr()),DE=bt(yu()),OE=bt(Hh()),PE=bt(Xh()),AE=bt(tm()),kE=bt(rm()),NE=bt(nm()),CE=bt(am()),xE=bt(ju()),SE=bt(fm()),IE=bt(pm());De.casual=new hm.Chrono(mm());De.strict=new hm.Chrono(Vu(!0));function UE(r,e,t){return De.casual.parse(r,e,t)}De.parse=UE;function FE(r,e,t){return De.casual.parseDate(r,e,t)}De.parseDate=FE;function mm(r=!0){let e=Vu(!1,r);return e.parsers.unshift(new xE.default),e.parsers.unshift(new CE.default),e.parsers.unshift(new IE.default),e}De.createCasualConfiguration=mm;function Vu(r=!0,e=!0){return wE.includeCommonConfiguration({parsers:[new DE.default,new ME.default(e),new OE.default,new AE.default,new SE.default,new PE.default],refiners:[new kE.default,new NE.default]},r)}De.createConfiguration=Vu});var _m=h(vt=>{"use strict";var qE=vt&&vt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),WE=vt&&vt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),LE=vt&&vt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&qE(e,r,t);return WE(e,r),e},YE=vt&&vt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vt,"__esModule",{value:!0});var $E=YE(K()),jE=Ee(),BE=R(),gm=st(),Bs=LE(Vt()),Zu=class extends BE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=$E.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Bs.now(e.reference);case"aujourd'hui":return Bs.today(e.reference);case"hier":return Bs.yesterday(e.reference);case"demain":return Bs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(gm.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",jE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),gm.assignSimilarDate(s,n),s.imply("hour",0))}return s}};vt.default=Zu});var Tm=h(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var ai=Ee(),GE=R(),Xu=class extends GE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",ai.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",ai.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",ai.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",ai.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",ai.Meridiem.AM);break}return i}};Qu.default=Xu});var bm=h(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var HE=Fr(),Ju=class extends HE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};el.default=Ju});var vm=h(oi=>{"use strict";var zE=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var KE=zE(Ht()),tl=class extends KE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};oi.default=tl});var Em=h(ui=>{"use strict";var VE=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var ZE=VE(Ct()),rl=class extends ZE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};ui.default=rl});var Er=h(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.parseTimeUnits=V.TIME_UNITS_PATTERN=V.parseYear=V.YEAR_PATTERN=V.parseOrdinalNumberPattern=V.ORDINAL_NUMBER_PATTERN=V.parseNumberPattern=V.NUMBER_PATTERN=V.TIME_UNIT_DICTIONARY=V.INTEGER_WORD_DICTIONARY=V.MONTH_DICTIONARY=V.WEEKDAY_DICTIONARY=void 0;var nl=J();V.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};V.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};V.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};V.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};V.NUMBER_PATTERN=`(?:${nl.matchAnyPattern(V.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function wm(r){let e=r.toLowerCase();return V.INTEGER_WORD_DICTIONARY[e]!==void 0?V.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}V.parseNumberPattern=wm;V.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function XE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}V.parseOrdinalNumberPattern=XE;V.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function QE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}V.parseYear=QE;var Mm=`(${V.NUMBER_PATTERN})\\s{0,5}(${nl.matchAnyPattern(V.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Rm=new RegExp(Mm,"i");V.TIME_UNITS_PATTERN=nl.repeatedTimeunitPattern("",Mm);function JE(r){let e={},t=r,n=Rm.exec(t);for(;n;)e0(e,n),t=t.substring(n[0].length),n=Rm.exec(t);return e}V.parseTimeUnits=JE;function e0(r,e){let t=wm(e[1]),n=V.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Om=h(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var Dm=Er(),t0=J(),r0=R(),n0=Wr(),i0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${t0.matchAnyPattern(Dm.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),s0=1,a0=2,il=class extends r0.AbstractParserWithWordBoundaryChecking{innerPattern(){return i0}innerExtract(e,t){let n=t[s0].toLowerCase(),i=Dm.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[a0];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=n0.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};sl.default=il});var Nm=h(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var li=Ee(),o0=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),u0=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),l0=2,Pm=3,Am=4,km=5,yn=class{pattern(e){return o0}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=yn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=u0.exec(i);return s&&(n.end=yn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[l0]),t[Pm]!=null&&(i=parseInt(t[Pm])),i>=60||n>24)return null;if(n>=12&&(s=li.Meridiem.PM),t[km]!=null){if(n>12)return null;let a=t[km][0].toLowerCase();a=="a"&&(s=li.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=li.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",li.Meridiem.AM):e.imply("meridiem",li.Meridiem.PM),t[Am]!=null){let a=parseInt(t[Am]);if(a>=60)return null;e.assign("second",a)}return e}};al.default=yn});var Fm=h(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var c0=Se(),Im=Er(),Um=Er(),Gs=Er(),d0=J(),f0=R(),p0=new RegExp(`(?:on\\s*?)?(${Gs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Gs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${d0.matchAnyPattern(Im.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Um.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Cm=1,xm=2,h0=3,Sm=4,ol=class extends f0.AbstractParserWithWordBoundaryChecking{innerPattern(){return p0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Im.MONTH_DICTIONARY[t[h0].toLowerCase()],s=Gs.parseOrdinalNumberPattern(t[Cm]);if(s>31)return t.index=t.index+t[Cm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Sm]){let a=Um.parseYear(t[Sm]);n.start.assign("year",a)}else{let a=c0.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[xm]){let a=Gs.parseOrdinalNumberPattern(t[xm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ul.default=ol});var Wm=h(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var qm=Er(),m0=he(),y0=R(),g0=at(),ll=class extends y0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${qm.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=qm.parseTimeUnits(t[1]),i=g0.reverseTimeUnits(n);return m0.ParsingComponents.createRelativeFromReference(e.reference,i)}};cl.default=ll});var Ym=h(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var Lm=Er(),_0=he(),T0=R(),dl=class extends T0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${Lm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=Lm.parseTimeUnits(t[1]);return _0.ParsingComponents.createRelativeFromReference(e.reference,n)}};fl.default=dl});var $m=h(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var Hs=Er(),b0=he(),v0=R(),E0=at(),R0=J(),pl=class extends v0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Hs.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${R0.matchAnyPattern(Hs.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Hs.parseNumberPattern(t[1]):1,i=Hs.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=E0.reverseTimeUnits(s)),b0.ParsingComponents.createRelativeFromReference(e.reference,s)}};hl.default=pl});var Gm=h(Oe=>{"use strict";var ot=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var w0=zt(),jm=_t(),M0=ot(_m()),D0=ot(Tm()),O0=ot(Lr()),P0=ot(bm()),A0=ot(vm()),k0=ot(Em()),N0=ot(Om()),C0=ot(Nm()),x0=ot(Fm()),S0=ot(Wm()),I0=ot(Ym()),U0=ot($m());Oe.casual=new jm.Chrono(Bm());Oe.strict=new jm.Chrono(ml(!0));function F0(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=F0;function q0(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=q0;function Bm(r=!0){let e=ml(!1,r);return e.parsers.unshift(new M0.default),e.parsers.unshift(new D0.default),e.parsers.unshift(new U0.default),e}Oe.createCasualConfiguration=Bm;function ml(r=!0,e=!0){return w0.includeCommonConfiguration({parsers:[new O0.default(e),new x0.default,new P0.default,new C0.default,new S0.default,new I0.default,new N0.default],refiners:[new A0.default,new k0.default]},r)}Oe.createConfiguration=ml});var Hm=h(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.toHankaku=void 0;function W0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,L0)}zs.toHankaku=W0;function L0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Km=h(ci=>{"use strict";var Y0=ci&&ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ci,"__esModule",{value:!0});var yl=Hm(),$0=Se(),j0=Y0(K()),B0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,zm=1,G0=2,gl=3,H0=4,z0=5,K0=6,_l=class{pattern(){return B0}extract(e,t){let n=parseInt(yl.toHankaku(t[z0])),i=parseInt(yl.toHankaku(t[K0])),s=e.createParsingComponents({day:i,month:n});if(t[zm]&&t[zm].match("\u540C|\u4ECA|\u672C")){let a=j0.default(e.refDate);s.assign("year",a.year())}if(t[G0]){let a=t[H0],o=a=="\u5143"?1:parseInt(yl.toHankaku(a));t[gl]=="\u4EE4\u548C"?o+=2018:t[gl]=="\u5E73\u6210"?o+=1988:t[gl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=$0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};ci.default=_l});var Vm=h(di=>{"use strict";var V0=di&&di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(di,"__esModule",{value:!0});var Z0=V0(Ct()),Tl=class extends Z0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};di.default=Tl});var Xm=h(Et=>{"use strict";var X0=Et&&Et.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Q0=Et&&Et.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),J0=Et&&Et.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&X0(e,r,t);return Q0(e,r),e},eR=Et&&Et.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Et,"__esModule",{value:!0});var tR=eR(K()),Zm=Ee(),bl=J0(Vt()),rR=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,vl=class{pattern(){return rR}extract(e,t){let n=t[0],i=tR.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return bl.yesterday(e.reference);case"\u660E\u65E5":return bl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return bl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Zm.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Zm.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};Et.default=vl});var ey=h(Pe=>{"use strict";var El=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var nR=El(Km()),iR=El(Vm()),sR=El(Xm()),Qm=_t();Pe.casual=new Qm.Chrono(Jm());Pe.strict=new Qm.Chrono(Rl());function aR(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=aR;function oR(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=oR;function Jm(){let r=Rl();return r.parsers.unshift(new sR.default),r}Pe.createCasualConfiguration=Jm;function Rl(){return{parsers:[new nR.default],refiners:[new iR.default]}}Pe.createConfiguration=Rl});var Ks=h(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.parseYear=St.YEAR_PATTERN=St.MONTH_DICTIONARY=St.WEEKDAY_DICTIONARY=void 0;St.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};St.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};St.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function uR(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}St.parseYear=uR});var ry=h(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var ty=Ks(),lR=J(),cR=R(),dR=Wr(),fR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${lR.matchAnyPattern(ty.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),pR=1,hR=2,mR=3,wl=class extends cR.AbstractParserWithWordBoundaryChecking{innerPattern(){return fR}innerExtract(e,t){let n=t[hR].toLowerCase(),i=ty.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[pR],a=t[mR],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=dR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ml.default=wl});var ny=h(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var yR=Fr(),Dl=class extends yR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Ol.default=Dl});var iy=h(fi=>{"use strict";var gR=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var _R=gR(Ht()),Pl=class extends _R.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};fi.default=Pl});var sy=h(pi=>{"use strict";var TR=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var bR=TR(Ct()),Al=class extends bR.default{patternBetween(){return/^\s*(?:-)\s*$/i}};pi.default=Al});var dy=h(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});var vR=Se(),ly=Ks(),cy=Ks(),ER=J(),RR=R(),wR=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${ER.matchAnyPattern(ly.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${cy.YEAR_PATTERN}))?(?=\\W|$)`,"i"),ay=1,oy=2,MR=3,uy=4,kl=class extends RR.AbstractParserWithWordBoundaryChecking{innerPattern(){return wR}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=ly.MONTH_DICTIONARY[t[MR].toLowerCase()],s=parseInt(t[ay]);if(s>31)return t.index=t.index+t[ay].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[uy]){let a=cy.parseYear(t[uy]);n.start.assign("year",a)}else{let a=vR.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[oy]){let a=parseInt(t[oy]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Nl.default=kl});var fy=h(Zt=>{"use strict";var DR=Zt&&Zt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),OR=Zt&&Zt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),PR=Zt&&Zt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&DR(e,r,t);return OR(e,r),e};Object.defineProperty(Zt,"__esModule",{value:!0});var AR=R(),Vs=PR(Vt()),Cl=class extends AR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return Vs.now(e.reference);case"hoje":return Vs.today(e.reference);case"amanha":case"amanh\xE3":return Vs.tomorrow(e.reference);case"ontem":return Vs.yesterday(e.reference)}return i}};Zt.default=Cl});var py=h(hi=>{"use strict";var kR=hi&&hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(hi,"__esModule",{value:!0});var Zs=Ee(),NR=R(),CR=st(),xR=kR(K()),xl=class extends NR.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=xR.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",Zs.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",Zs.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",Zs.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":CR.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",Zs.Meridiem.AM),i.imply("hour",12);break}return i}};hi.default=xl});var yy=h(Ae=>{"use strict";var Rr=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var SR=zt(),hy=_t(),IR=Rr(Lr()),UR=Rr(ry()),FR=Rr(ny()),qR=Rr(iy()),WR=Rr(sy()),LR=Rr(dy()),YR=Rr(fy()),$R=Rr(py());Ae.casual=new hy.Chrono(my());Ae.strict=new hy.Chrono(Sl(!0));function jR(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=jR;function BR(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=BR;function my(r=!0){let e=Sl(!1,r);return e.parsers.push(new YR.default),e.parsers.push(new $R.default),e}Ae.createCasualConfiguration=my;function Sl(r=!0,e=!0){return SR.includeCommonConfiguration({parsers:[new IR.default(e),new UR.default,new FR.default,new LR.default],refiners:[new qR.default,new WR.default]},r)}Ae.createConfiguration=Sl});var gy=h(mi=>{"use strict";var GR=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var HR=GR(Ct()),Il=class extends HR.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};mi.default=Il});var _y=h(yi=>{"use strict";var zR=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var KR=zR(Ht()),Ul=class extends KR.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};yi.default=Ul});var Ty=h(Xt=>{"use strict";var VR=Xt&&Xt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ZR=Xt&&Xt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XR=Xt&&Xt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&VR(e,r,t);return ZR(e,r),e};Object.defineProperty(Xt,"__esModule",{value:!0});var QR=R(),Xs=XR(Vt()),Fl=class extends QR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return Xs.now(e.reference);case"vandaag":return Xs.today(e.reference);case"morgen":case"morgend":return Xs.tomorrow(e.reference);case"gisteren":return Xs.yesterday(e.reference)}return i}};Xt.default=Fl});var by=h(gi=>{"use strict";var JR=gi&&gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gi,"__esModule",{value:!0});var Qs=Ee(),ew=R(),tw=JR(K()),rw=st(),nw=1,iw=2,ql=class extends ew.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=tw.default(e.refDate),i=e.createParsingComponents();switch(t[nw]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[iw].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",Qs.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",Qs.Meridiem.PM),i.imply("hour",20);break;case"middernacht":rw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",Qs.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",Qs.Meridiem.AM),i.imply("hour",12);break}return i}};gi.default=ql});var Je=h($=>{"use strict";Object.defineProperty($,"__esModule",{value:!0});$.parseTimeUnits=$.TIME_UNITS_PATTERN=$.parseYear=$.YEAR_PATTERN=$.parseOrdinalNumberPattern=$.ORDINAL_NUMBER_PATTERN=$.parseNumberPattern=$.NUMBER_PATTERN=$.TIME_UNIT_DICTIONARY=$.ORDINAL_WORD_DICTIONARY=$.INTEGER_WORD_DICTIONARY=$.MONTH_DICTIONARY=$.WEEKDAY_DICTIONARY=void 0;var Js=J(),sw=Se();$.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};$.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};$.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};$.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};$.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};$.NUMBER_PATTERN=`(?:${Js.matchAnyPattern($.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function Ey(r){let e=r.toLowerCase();return $.INTEGER_WORD_DICTIONARY[e]!==void 0?$.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}$.parseNumberPattern=Ey;$.ORDINAL_NUMBER_PATTERN=`(?:${Js.matchAnyPattern($.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function aw(r){let e=r.toLowerCase();return $.ORDINAL_WORD_DICTIONARY[e]!==void 0?$.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}$.parseOrdinalNumberPattern=aw;$.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function ow(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return sw.findMostLikelyADYear(e)}$.parseYear=ow;var Ry=`(${$.NUMBER_PATTERN})\\s{0,5}(${Js.matchAnyPattern($.TIME_UNIT_DICTIONARY)})\\s{0,5}`,vy=new RegExp(Ry,"i");$.TIME_UNITS_PATTERN=Js.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",Ry);function uw(r){let e={},t=r,n=vy.exec(t);for(;n;)lw(e,n),t=t.substring(n[0].length),n=vy.exec(t);return e}$.parseTimeUnits=uw;function lw(r,e){let t=Ey(e[1]),n=$.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var My=h(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});var wy=Je(),cw=he(),dw=R(),Wl=class extends dw.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+wy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=wy.parseTimeUnits(t[1]);return cw.ParsingComponents.createRelativeFromReference(e.reference,n)}};Ll.default=Wl});var Oy=h($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var Dy=Je(),fw=J(),pw=R(),hw=Wr(),mw=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${fw.matchAnyPattern(Dy.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),yw=1,gw=2,_w=3,Yl=class extends pw.AbstractParserWithWordBoundaryChecking{innerPattern(){return mw}innerExtract(e,t){let n=t[gw].toLowerCase(),i=Dy.WEEKDAY_DICTIONARY[n],s=t[yw],a=t[_w],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=hw.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$l.default=Yl});var xy=h(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var Tw=Se(),Ny=Je(),ea=Je(),Cy=Je(),bw=J(),vw=R(),Ew=new RegExp(`(?:on\\s*?)?(${ea.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${ea.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+bw.matchAnyPattern(Ny.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${Cy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Rw=3,Py=1,Ay=2,ky=4,jl=class extends vw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ew}innerExtract(e,t){let n=Ny.MONTH_DICTIONARY[t[Rw].toLowerCase()],i=ea.parseOrdinalNumberPattern(t[Py]);if(i>31)return t.index=t.index+t[Py].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[ky]){let u=Cy.parseYear(t[ky]);s.assign("year",u)}else{let u=Tw.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Ay])return s;let a=ea.parseOrdinalNumberPattern(t[Ay]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Bl.default=jl});var Fy=h(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var Iy=Je(),ww=Se(),Mw=J(),Uy=Je(),Dw=R(),Ow=new RegExp(`(${Mw.matchAnyPattern(Iy.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Uy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),Pw=1,Sy=2,Gl=class extends Dw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Ow}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[Pw],s=Iy.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[Sy]){let a=Uy.parseYear(t[Sy]);n.assign("year",a)}else{let a=ww.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Hl.default=Gl});var qy=h(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var Aw=R(),kw=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),Nw=1,Cw=2,zl=class extends Aw.AbstractParserWithWordBoundaryChecking{innerPattern(){return kw}innerExtract(e,t){let n=parseInt(t[Cw]),i=parseInt(t[Nw]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Kl.default=zl});var Wy=h(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});var xw=Fr(),Vl=class extends xw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Zl.default=Vl});var $y=h(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var Yy=Je(),Sw=J(),Iw=R(),Uw=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${Sw.matchAnyPattern(Yy.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),Fw=1,qw=2,Ly=3,Ww=4,Xl=class extends Iw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Uw}innerExtract(e,t){let n=t[Ly]?parseInt(t[Ly]):Yy.MONTH_DICTIONARY[t[qw].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[Fw]);return{day:parseInt(t[Ww]),month:n,year:i}}};Ql.default=Xl});var jy=h(_i=>{"use strict";var Lw=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var Yw=R(),ta=Ee(),Jl=st(),$w=Lw(K()),jw=1,Bw=2,ec=class extends Yw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[jw].toLowerCase(),i=t[Bw].toLowerCase(),s=e.createParsingComponents(),a=$w.default(e.refDate);switch(n){case"gisteren":Jl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Jl.assignSimilarDate(s,a);break;case"morgen":Jl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",ta.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",ta.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",ta.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",ta.Meridiem.PM),s.imply("hour",20);break}return s}};_i.default=ec});var Gy=h(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var By=Je(),Gw=he(),Hw=R(),zw=at(),Kw=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${By.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),tc=class extends Hw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Kw}innerExtract(e,t){let n=t[1].toLowerCase(),i=By.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=zw.reverseTimeUnits(i);break}return Gw.ParsingComponents.createRelativeFromReference(e.reference,i)}};rc.default=tc});var Ky=h(Ti=>{"use strict";var Vw=Ti&&Ti.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ti,"__esModule",{value:!0});var zy=Je(),Hy=he(),Zw=Vw(K()),Xw=R(),Qw=J(),Jw=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${Qw.matchAnyPattern(zy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),eM=1,tM=2,nc=class extends Xw.AbstractParserWithWordBoundaryChecking{innerPattern(){return Jw}innerExtract(e,t){let n=t[eM].toLowerCase(),i=t[tM].toLowerCase(),s=zy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Hy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Hy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Zw.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ti.default=nc});var Vy=h(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var sc=Je(),rM=he(),nM=R(),iM=at(),sM=new RegExp("("+sc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),aM=new RegExp("("+sc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),ic=class extends nM.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?aM:sM}innerExtract(e,t){let n=sc.parseTimeUnits(t[1]),i=iM.reverseTimeUnits(n);return rM.ParsingComponents.createRelativeFromReference(e.reference,i)}};ac.default=ic});var Zy=h(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var uc=Je(),oM=he(),uM=R(),lM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),cM=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),dM=1,oc=class extends uM.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?cM:lM}innerExtract(e,t){let n=uc.parseTimeUnits(t[dM]);return oM.ParsingComponents.createRelativeFromReference(e.reference,n)}};lc.default=oc});var eg=h(ke=>{"use strict";var Ue=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var fM=zt(),Xy=_t(),pM=Ue(gy()),hM=Ue(_y()),mM=Ue(Ty()),yM=Ue(by()),gM=Ue(Lr()),_M=Ue(My()),TM=Ue(Oy()),bM=Ue(xy()),Qy=Ue(Fy()),vM=Ue(qy()),EM=Ue(Wy()),RM=Ue($y()),wM=Ue(jy()),MM=Ue(Gy()),DM=Ue(Ky()),OM=Ue(Vy()),PM=Ue(Zy());ke.casual=new Xy.Chrono(Jy());ke.strict=new Xy.Chrono(cc(!0));function AM(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=AM;function kM(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=kM;function Jy(r=!0){let e=cc(!1,r);return e.parsers.unshift(new mM.default),e.parsers.unshift(new yM.default),e.parsers.unshift(new wM.default),e.parsers.unshift(new Qy.default),e.parsers.unshift(new DM.default),e.parsers.unshift(new MM.default),e}ke.createCasualConfiguration=Jy;function cc(r=!0,e=!0){return fM.includeCommonConfiguration({parsers:[new gM.default(e),new _M.default,new bM.default,new Qy.default,new TM.default,new RM.default,new vM.default,new EM.default(r),new OM.default(r),new PM.default(r)],refiners:[new hM.default,new pM.default]},r)}ke.createConfiguration=cc});var ig=h(bi=>{"use strict";var NM=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var CM=NM(K()),xM=R(),SM=1,tg=2,IM=3,rg=4,ng=5,UM=6,dc=class extends xM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=CM.default(e.refDate),a=s;if(t[SM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[tg]){let o=t[tg],u=t[IM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[rg]){let u=t[rg][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[ng]){let o=t[ng];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[UM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};bi.default=dc});var gn=h(He=>{"use strict";Object.defineProperty(He,"__esModule",{value:!0});He.zhStringToYear=He.zhStringToNumber=He.WEEKDAY_OFFSET=He.NUMBER=void 0;He.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};He.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function FM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?He.NUMBER[n]:e*He.NUMBER[n]:e+=He.NUMBER[n]}return e}He.zhStringToNumber=FM;function qM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+He.NUMBER[n]}return parseInt(e)}He.zhStringToYear=qM});var ag=h(vi=>{"use strict";var WM=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var LM=WM(K()),YM=R(),jr=gn(),fc=1,sg=2,pc=3,hc=class extends YM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(jr.NUMBER).join("")+"]{4}|["+Object.keys(jr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=LM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[sg]);if(isNaN(s)&&(s=jr.zhStringToNumber(t[sg])),i.start.assign("month",s),t[pc]){let a=parseInt(t[pc]);isNaN(a)&&(a=jr.zhStringToNumber(t[pc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[fc]){let a=parseInt(t[fc]);isNaN(a)&&(a=jr.zhStringToYear(t[fc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};vi.default=hc});var ug=h(Ei=>{"use strict";var $M=Ei&&Ei.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ei,"__esModule",{value:!0});var jM=$M(K()),BM=R(),og=gn(),GM=new RegExp("(\\d+|["+Object.keys(og.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),mc=1,HM=2,yc=class extends BM.AbstractParserWithWordBoundaryChecking{innerPattern(){return GM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[mc]);if(isNaN(i)&&(i=og.zhStringToNumber(t[mc])),isNaN(i)){let u=t[mc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=jM.default(e.refDate),o=t[HM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Ei.default=yc});var cg=h(Ri=>{"use strict";var zM=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var KM=zM(K()),VM=R(),lg=gn(),ZM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(lg.WEEKDAY_OFFSET).join("|")+")"),gc=class extends VM.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=lg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=KM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ri.default=gc});var dg=h(wi=>{"use strict";var XM=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var QM=XM(K()),JM=R(),lt=gn(),eD=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),tD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(lt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ra=1,na=2,ia=3,sa=4,aa=5,oa=6,ut=7,_n=8,ua=9,_c=class extends JM.AbstractParserWithWordBoundaryChecking{innerPattern(){return eD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=QM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ra]){var a=t[ra];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[sa]){var o=t[sa];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[_n]){var d=parseInt(t[_n]);if(isNaN(d)&&(d=lt.zhStringToNumber(t[_n])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[oa]),isNaN(u)&&(u=lt.zhStringToNumber(t[oa])),t[ut]?t[ut]=="\u534A"?l=30:t[ut]=="\u6B63"||t[ut]=="\u6574"?l=0:(l=parseInt(t[ut]),isNaN(l)&&(l=lt.zhStringToNumber(t[ut]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ua]){if(u>12)return null;var f=t[ua][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[na]){var p=t[na],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[ia]){var m=t[ia],_=m[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[aa]){var A=t[aa],I=A[0];I=="\u4E0A"||I=="\u671D"||I=="\u65E9"||I=="\u51CC"?(c=0,u==12&&(u=0)):(I=="\u4E0B"||I=="\u664F"||I=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=tD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let C=s.clone();if(i.end=e.createParsingComponents(),t[ra]){var a=t[ra];a=="\u660E"||a=="\u807D"?n.hour()>1&&C.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?C.add(-1,"day"):a=="\u524D"?C.add(-2,"day"):a=="\u5927\u524D"?C.add(-3,"day"):a=="\u5F8C"?C.add(2,"day"):a=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else if(t[sa]){var o=t[sa];o=="\u660E"||o=="\u807D"?C.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?C.add(-1,"day"):o=="\u524D"?C.add(-2,"day"):o=="\u5927\u524D"?C.add(-3,"day"):o=="\u5F8C"?C.add(2,"day"):o=="\u5927\u5F8C"&&C.add(3,"day"),i.end.assign("day",C.date()),i.end.assign("month",C.month()+1),i.end.assign("year",C.year())}else i.end.imply("day",C.date()),i.end.imply("month",C.month()+1),i.end.imply("year",C.year());if(u=0,l=0,c=-1,t[_n]){var d=parseInt(t[_n]);if(isNaN(d)&&(d=lt.zhStringToNumber(t[_n])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[oa]),isNaN(u)&&(u=lt.zhStringToNumber(t[oa])),t[ut]?t[ut]=="\u534A"?l=30:t[ut]=="\u6B63"||t[ut]=="\u6574"?l=0:(l=parseInt(t[ut]),isNaN(l)&&(l=lt.zhStringToNumber(t[ut]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ua]){if(u>12)return null;var f=t[ua][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[na]){var p=t[na],y=p[0];y=="\u671D"||y=="\u65E9"?(c=0,u==12&&(u=0)):y=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[ia]){var m=t[ia],_=m[0];_=="\u4E0A"||_=="\u671D"||_=="\u65E9"||_=="\u51CC"?(c=0,u==12&&(u=0)):(_=="\u4E0B"||_=="\u664F"||_=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[aa]){var A=t[aa],I=A[0];I=="\u4E0A"||I=="\u671D"||I=="\u65E9"||I=="\u51CC"?(c=0,u==12&&(u=0)):(I=="\u4E0B"||I=="\u664F"||I=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};wi.default=_c});var pg=h(Mi=>{"use strict";var rD=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var nD=rD(K()),iD=R(),fg=gn(),sD=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(fg.WEEKDAY_OFFSET).join("|")+")"),Tc=class extends iD.AbstractParserWithWordBoundaryChecking{innerPattern(){return sD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=fg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=nD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Mi.default=Tc});var hg=h(Di=>{"use strict";var aD=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var oD=aD(Ct()),bc=class extends oD.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Di.default=bc});var mg=h(Oi=>{"use strict";var uD=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var lD=uD(Ht()),vc=class extends lD.default{patternBetween(){return/^\s*$/i}};Oi.default=vc});var yg=h(Te=>{"use strict";var Qt=Te&&Te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Te,"__esModule",{value:!0});Te.createConfiguration=Te.createCasualConfiguration=Te.parseDate=Te.parse=Te.strict=Te.casual=Te.hant=void 0;var Ec=_t(),cD=Qt(qs()),dD=zt(),fD=Qt(ig()),pD=Qt(ag()),hD=Qt(ug()),mD=Qt(cg()),yD=Qt(dg()),gD=Qt(pg()),_D=Qt(hg()),TD=Qt(mg());Te.hant=new Ec.Chrono(Rc());Te.casual=new Ec.Chrono(Rc());Te.strict=new Ec.Chrono(wc());function bD(r,e,t){return Te.casual.parse(r,e,t)}Te.parse=bD;function vD(r,e,t){return Te.casual.parseDate(r,e,t)}Te.parseDate=vD;function Rc(){let r=wc();return r.parsers.unshift(new fD.default),r}Te.createCasualConfiguration=Rc;function wc(){let r=dD.includeCommonConfiguration({parsers:[new pD.default,new mD.default,new gD.default,new yD.default,new hD.default],refiners:[new _D.default,new TD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof cD.default)),r}Te.createConfiguration=wc});var bg=h(Pi=>{"use strict";var ED=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var RD=ED(K()),wD=R(),MD=1,gg=2,DD=3,_g=4,Tg=5,OD=6,Mc=class extends wD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=RD.default(e.refDate),a=s;if(t[MD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[gg]){let o=t[gg],u=t[DD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[_g]){let u=t[_g][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Tg]){let o=t[Tg];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[OD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Pi.default=Mc});var Tn=h(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.zhStringToYear=ze.zhStringToNumber=ze.WEEKDAY_OFFSET=ze.NUMBER=void 0;ze.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};ze.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function PD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?ze.NUMBER[n]:e*ze.NUMBER[n]:e+=ze.NUMBER[n]}return e}ze.zhStringToNumber=PD;function AD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+ze.NUMBER[n]}return parseInt(e)}ze.zhStringToYear=AD});var Eg=h(Ai=>{"use strict";var kD=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var ND=kD(K()),CD=R(),Br=Tn(),Dc=1,vg=2,Oc=3,Pc=class extends CD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Br.NUMBER).join("")+"]{4}|["+Object.keys(Br.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=ND.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[vg]);if(isNaN(s)&&(s=Br.zhStringToNumber(t[vg])),i.start.assign("month",s),t[Oc]){let a=parseInt(t[Oc]);isNaN(a)&&(a=Br.zhStringToNumber(t[Oc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Dc]){let a=parseInt(t[Dc]);isNaN(a)&&(a=Br.zhStringToYear(t[Dc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};Ai.default=Pc});var wg=h(ki=>{"use strict";var xD=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var SD=xD(K()),ID=R(),Rg=Tn(),UD=new RegExp("(\\d+|["+Object.keys(Rg.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),Ac=1,FD=2,kc=class extends ID.AbstractParserWithWordBoundaryChecking{innerPattern(){return UD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[Ac]);if(isNaN(i)&&(i=Rg.zhStringToNumber(t[Ac])),isNaN(i)){let u=t[Ac];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=SD.default(e.refDate),o=t[FD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ki.default=kc});var Dg=h(Ni=>{"use strict";var qD=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var WD=qD(K()),LD=R(),Mg=Tn(),YD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Mg.WEEKDAY_OFFSET).join("|")+")"),Nc=class extends LD.AbstractParserWithWordBoundaryChecking{innerPattern(){return YD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Mg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=WD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Ni.default=Nc});var Og=h(Ci=>{"use strict";var $D=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var jD=$D(K()),BD=R(),dt=Tn(),GD=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(dt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(dt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(dt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),HD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(dt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(dt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(dt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),la=1,ca=2,da=3,fa=4,pa=5,ha=6,ct=7,bn=8,ma=9,Cc=class extends BD.AbstractParserWithWordBoundaryChecking{innerPattern(){return GD}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=jD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[la]){let c=t[la];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[fa]){let c=t[fa];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[bn]){let c=parseInt(t[bn]);if(isNaN(c)&&(c=dt.zhStringToNumber(t[bn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[ha]),isNaN(a)&&(a=dt.zhStringToNumber(t[ha])),t[ct]?t[ct]=="\u534A"?o=30:t[ct]=="\u6B63"||t[ct]=="\u6574"?o=0:(o=parseInt(t[ct]),isNaN(o)&&(o=dt.zhStringToNumber(t[ct]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ma]){if(a>12)return null;let c=t[ma][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ca]){let d=t[ca][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[da]){let d=t[da][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[pa]){let d=t[pa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=HD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[la]){let c=t[la];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[fa]){let c=t[fa];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[bn]){let c=parseInt(t[bn]);if(isNaN(c)&&(c=dt.zhStringToNumber(t[bn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[ha]),isNaN(a)&&(a=dt.zhStringToNumber(t[ha])),t[ct]?t[ct]=="\u534A"?o=30:t[ct]=="\u6B63"||t[ct]=="\u6574"?o=0:(o=parseInt(t[ct]),isNaN(o)&&(o=dt.zhStringToNumber(t[ct]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[ma]){if(a>12)return null;let c=t[ma][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ca]){let d=t[ca][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[da]){let d=t[da][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[pa]){let d=t[pa][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ci.default=Cc});var Ag=h(xi=>{"use strict";var zD=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var KD=zD(K()),VD=R(),Pg=Tn(),ZD=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(Pg.WEEKDAY_OFFSET).join("|")+")"),xc=class extends VD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ZD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Pg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=KD.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};xi.default=xc});var kg=h(Si=>{"use strict";var XD=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var QD=XD(Ct()),Sc=class extends QD.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};Si.default=Sc});var Ng=h(Ii=>{"use strict";var JD=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var eO=JD(Ht()),Ic=class extends eO.default{patternBetween(){return/^\s*$/i}};Ii.default=Ic});var Cg=h(be=>{"use strict";var Jt=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.strict=be.casual=be.hans=void 0;var Uc=_t(),tO=Jt(qs()),rO=zt(),nO=Jt(bg()),iO=Jt(Eg()),sO=Jt(wg()),aO=Jt(Dg()),oO=Jt(Og()),uO=Jt(Ag()),lO=Jt(kg()),cO=Jt(Ng());be.hans=new Uc.Chrono(Fc());be.casual=new Uc.Chrono(Fc());be.strict=new Uc.Chrono(qc());function dO(r,e,t){return be.casual.parse(r,e,t)}be.parse=dO;function fO(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=fO;function Fc(){let r=qc();return r.parsers.unshift(new nO.default),r}be.createCasualConfiguration=Fc;function qc(){let r=rO.includeCommonConfiguration({parsers:[new iO.default,new aO.default,new uO.default,new oO.default,new sO.default],refiners:[new lO.default,new cO.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof tO.default)),r}be.createConfiguration=qc});var Sg=h(et=>{"use strict";var xg=et&&et.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),pO=et&&et.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),hO=et&&et.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&xg(e,r,t)},mO=et&&et.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&xg(e,r,t);return pO(e,r),e};Object.defineProperty(et,"__esModule",{value:!0});et.hans=void 0;hO(yg(),et);et.hans=mO(Cg())});var Ke=h(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.parseTimeUnits=q.TIME_UNITS_PATTERN=q.parseYear=q.YEAR_PATTERN=q.parseOrdinalNumberPattern=q.ORDINAL_NUMBER_PATTERN=q.parseNumberPattern=q.NUMBER_PATTERN=q.TIME_UNIT_DICTIONARY=q.ORDINAL_WORD_DICTIONARY=q.INTEGER_WORD_DICTIONARY=q.MONTH_DICTIONARY=q.FULL_MONTH_NAME_DICTIONARY=q.WEEKDAY_DICTIONARY=q.REGEX_PARTS=void 0;var ya=J(),yO=Se();q.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};q.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};q.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};q.MONTH_DICTIONARY=Object.assign(Object.assign({},q.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});q.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};q.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};q.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};q.NUMBER_PATTERN=`(?:${ya.matchAnyPattern(q.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function Ug(r){let e=r.toLowerCase();return q.INTEGER_WORD_DICTIONARY[e]!==void 0?q.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}q.parseNumberPattern=Ug;q.ORDINAL_NUMBER_PATTERN=`(?:${ya.matchAnyPattern(q.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function gO(r){let e=r.toLowerCase();return q.ORDINAL_WORD_DICTIONARY[e]!==void 0?q.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}q.parseOrdinalNumberPattern=gO;var Wc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";q.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Wc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Wc}|[5-9][0-9]${Wc})`;function _O(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return yO.findMostLikelyADYear(e)}q.parseYear=_O;var Fg=`(${q.NUMBER_PATTERN})\\s{0,3}(${ya.matchAnyPattern(q.TIME_UNIT_DICTIONARY)})`,Ig=new RegExp(Fg,"i");q.TIME_UNITS_PATTERN=ya.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",Fg);function TO(r){let e={},t=r,n=Ig.exec(t);for(;n;)bO(e,n),t=t.substring(n[0].length).trim(),n=Ig.exec(t);return e}q.parseTimeUnits=TO;function bO(r,e){let t=Ug(e[1]),n=q.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Wg=h(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var Ui=Ke(),vO=he(),EO=R(),qg=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Ui.TIME_UNITS_PATTERN})${Ui.REGEX_PARTS.rightBoundary}`,RO=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${qg}`,Ui.REGEX_PARTS.flags),wO=new RegExp(qg,"i"),Lc=class extends EO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ui.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?wO:RO}innerExtract(e,t){let n=Ui.parseTimeUnits(t[1]);return vO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Yc.default=Lc});var Bg=h(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var MO=Se(),Fi=Ke(),jg=Ke(),ga=Ke(),DO=J(),OO=R(),PO=new RegExp(`(?:\u0441)?\\s*(${ga.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${ga.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${DO.matchAnyPattern(Fi.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${jg.YEAR_PATTERN}(?![^\\s]\\d)))?${Fi.REGEX_PARTS.rightBoundary}`,Fi.REGEX_PARTS.flags),Lg=1,Yg=2,AO=3,$g=4,$c=class extends OO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Fi.REGEX_PARTS.leftBoundary}innerPattern(){return PO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Fi.MONTH_DICTIONARY[t[AO].toLowerCase()],s=ga.parseOrdinalNumberPattern(t[Lg]);if(s>31)return t.index=t.index+t[Lg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[$g]){let a=jg.parseYear(t[$g]);n.start.assign("year",a)}else{let a=MO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Yg]){let a=ga.parseOrdinalNumberPattern(t[Yg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};jc.default=$c});var zg=h(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var qi=Ke(),kO=Se(),NO=J(),Hg=Ke(),CO=R(),xO=new RegExp(`((?:\u0432)\\s*)?(${NO.matchAnyPattern(qi.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Hg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,qi.REGEX_PARTS.flags),SO=2,Gg=3,Bc=class extends CO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return qi.REGEX_PARTS.leftBoundary}innerPattern(){return xO}innerExtract(e,t){let n=t[SO].toLowerCase();if(t[0].length<=3&&!qi.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=qi.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Gg]){let a=Hg.parseYear(t[Gg]);i.start.assign("year",a)}else{let a=kO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Gc.default=Bc});var Vg=h(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var _a=Ee(),IO=Fr(),Kg=Ke(),Hc=class extends IO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Kg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Kg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",_a.Meridiem.PM)):i<6&&n.assign("meridiem",_a.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",_a.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",_a.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};zc.default=Hc});var Zg=h(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var Ta=Ke(),UO=he(),FO=R(),qO=at(),WO=new RegExp(`(${Ta.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Ta.REGEX_PARTS.flags),Kc=class extends FO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Ta.REGEX_PARTS.leftBoundary}innerPattern(){return WO}innerExtract(e,t){let n=Ta.parseTimeUnits(t[1]),i=qO.reverseTimeUnits(n);return UO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vc.default=Kc});var Xg=h(Wi=>{"use strict";var LO=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var YO=LO(Ct()),Zc=class extends YO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Wi.default=Zc});var Qg=h(Li=>{"use strict";var $O=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var jO=$O(Ht()),Xc=class extends jO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Li.default=Xc});var Jg=h(er=>{"use strict";var BO=er&&er.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),GO=er&&er.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),HO=er&&er.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&BO(e,r,t);return GO(e,r),e};Object.defineProperty(er,"__esModule",{value:!0});var zO=R(),Yi=HO(Vt()),Qc=Ke(),KO=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Qc.REGEX_PARTS.rightBoundary}`,Qc.REGEX_PARTS.flags),Jc=class extends zO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qc.REGEX_PARTS.leftBoundary}innerPattern(e){return KO}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return Yi.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return Yi.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return Yi.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return Yi.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return Yi.theDayBefore(e.reference,2)}return i}};er.default=Jc});var e_=h(Rt=>{"use strict";var VO=Rt&&Rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),ZO=Rt&&Rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),XO=Rt&&Rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&VO(e,r,t);return ZO(e,r),e},QO=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0});var JO=R(),Gr=XO(Vt()),eP=st(),tP=QO(K()),ed=Ke(),rP=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${ed.REGEX_PARTS.rightBoundary}`,ed.REGEX_PARTS.flags),td=class extends JO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ed.REGEX_PARTS.leftBoundary}innerPattern(){return rP}innerExtract(e,t){let n=tP.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Gr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Gr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Gr.morning(e.reference);if(i.match(/в\s*полдень/))return Gr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Gr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Gr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),eP.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Gr.midnight(e.reference):s}};Rt.default=td});var t_=h(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var $i=Ke(),nP=J(),iP=R(),sP=Wr(),aP=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${nP.matchAnyPattern($i.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${$i.REGEX_PARTS.rightBoundary}`,$i.REGEX_PARTS.flags),oP=1,uP=2,lP=3,rd=class extends iP.AbstractParserWithWordBoundaryChecking{innerPattern(){return aP}patternLeftBoundary(){return $i.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[uP].toLowerCase(),i=$i.WEEKDAY_DICTIONARY[n],s=t[oP],a=t[lP],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=sP.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};nd.default=rd});var n_=h(Bi=>{"use strict";var cP=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var ji=Ke(),r_=he(),dP=cP(K()),fP=R(),pP=J(),hP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${pP.matchAnyPattern(ji.TIME_UNIT_DICTIONARY)})(?=\\s*)${ji.REGEX_PARTS.rightBoundary}`,ji.REGEX_PARTS.flags),mP=1,yP=2,id=class extends fP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ji.REGEX_PARTS.leftBoundary}innerPattern(){return hP}innerExtract(e,t){let n=t[mP].toLowerCase(),i=t[yP].toLowerCase(),s=ji.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,r_.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,r_.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=dP.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Bi.default=id});var i_=h(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var Gi=Ke(),gP=he(),_P=R(),TP=at(),bP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${Gi.TIME_UNITS_PATTERN})${Gi.REGEX_PARTS.rightBoundary}`,Gi.REGEX_PARTS.flags),sd=class extends _P.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Gi.REGEX_PARTS.leftBoundary}innerPattern(){return bP}innerExtract(e,t){let n=t[1].toLowerCase(),i=Gi.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=TP.reverseTimeUnits(i);break}return gP.ParsingComponents.createRelativeFromReference(e.reference,i)}};ad.default=sd});var o_=h(Ne=>{"use strict";var tt=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var vP=tt(Wg()),EP=tt(Bg()),RP=tt(zg()),wP=tt(Vg()),MP=tt(Zg()),DP=tt(Xg()),OP=tt(Qg()),PP=zt(),AP=tt(Jg()),kP=tt(e_()),NP=tt(t_()),CP=tt(n_()),s_=_t(),xP=tt(Lr()),SP=tt(i_());Ne.casual=new s_.Chrono(a_());Ne.strict=new s_.Chrono(od(!0));function IP(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=IP;function UP(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=UP;function a_(){let r=od(!1);return r.parsers.unshift(new AP.default),r.parsers.unshift(new kP.default),r.parsers.unshift(new RP.default),r.parsers.unshift(new CP.default),r.parsers.unshift(new SP.default),r}Ne.createCasualConfiguration=a_;function od(r=!0){return PP.includeCommonConfiguration({parsers:[new xP.default(!0),new vP.default,new EP.default,new NP.default,new wP.default(r),new MP.default],refiners:[new OP.default,new DP.default]},r)}Ne.createConfiguration=od});var Ee=h(L=>{"use strict";var FP=L&&L.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),qP=L&&L.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),wr=L&&L.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&FP(e,r,t);return qP(e,r),e};Object.defineProperty(L,"__esModule",{value:!0});L.parseDate=L.parse=L.casual=L.strict=L.ru=L.zh=L.nl=L.pt=L.ja=L.fr=L.de=L.Meridiem=L.Chrono=L.en=void 0;var ud=wr(Mu());L.en=ud;var WP=_t();Object.defineProperty(L,"Chrono",{enumerable:!0,get:function(){return WP.Chrono}});var LP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(LP=L.Meridiem||(L.Meridiem={}));var YP=wr(ym());L.de=YP;var $P=wr(Gm());L.fr=$P;var jP=wr(ey());L.ja=jP;var BP=wr(yy());L.pt=BP;var GP=wr(eg());L.nl=GP;var HP=wr(Sg());L.zh=HP;var zP=wr(o_());L.ru=zP;L.strict=ud.strict;L.casual=ud.casual;function KP(r,e,t){return L.casual.parse(r,e,t)}L.parse=KP;function VP(r,e,t){return L.casual.parseDate(r,e,t)}L.parseDate=VP});var Ut=h(Or=>{"use strict";Or.__esModule=!0;var nA;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(nA=Or.Operators||(Or.Operators={}));var iA;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(iA=Or.StructuralCharacters||(Or.StructuralCharacters={}));var sA;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(sA=Or.Tokens||(Or.Tokens={}))});var bd=h(xa=>{"use strict";xa.__esModule=!0;var me=Ut();xa.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};xa.VALID_TOKENS={identifierOnly:[{name:me.Tokens.IDENTIFIER},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:me.Tokens.IDENTIFIER},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.OPEN_PARENTHESIS},{name:me.Tokens.OPERATOR,value:me.Operators.NOT}],binaryOperator:[{name:me.Tokens.OPERATOR,value:me.Operators.AND},{name:me.Tokens.OPERATOR,value:me.Operators.OR},{name:me.Tokens.OPERATOR,value:me.Operators.XOR}],binaryOperatorOrClose:[{name:me.Tokens.OPERATOR,value:me.Operators.AND},{name:me.Tokens.OPERATOR,value:me.Operators.OR},{name:me.Tokens.OPERATOR,value:me.Operators.XOR},{name:me.Tokens.STRUCTURAL_CHARACTER,value:me.StructuralCharacters.CLOSE_PARENTHESIS}]}});var vd=h(nr=>{"use strict";nr.__esModule=!0;var Mn=Ut();nr.STRUCTURAL_CHARACTERS={"(":Mn.StructuralCharacters.OPEN_PARENTHESIS,")":Mn.StructuralCharacters.CLOSE_PARENTHESIS};nr.OPERATORS={AND:Mn.Operators.AND,OR:Mn.Operators.OR,XOR:Mn.Operators.XOR,NOT:Mn.Operators.NOT};nr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));nr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);nr.COMMENT_DELIMITER=String.fromCodePoint(35);nr.EOL=String.fromCodePoint(10);nr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var __=h(ir=>{"use strict";var Ed=ir&&ir.__assign||function(){return Ed=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Ed.apply(this,arguments)};ir.__esModule=!0;var g_=Ut(),zr=vd();ir.createResult=function(r,e,t){return{token:Ed({name:r},e!==null?{value:e}:{}),remainingString:t}};ir.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===zr.EOL){e=t;break}}return ir.createResult(g_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};ir.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===zr.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+zr.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===zr.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!zr.SEPARATORS.has(s)&&!zr.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+zr.QUOTED_IDENTIFIER_DELIMITER+" character");return ir.createResult(g_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var T_=h(Rd=>{"use strict";Rd.__esModule=!0;var Dn=Ut(),rt=vd(),On=__();Rd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!rt.SEPARATORS.has(s)){var a=rt.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Dn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!rt.SEPARATORS.has(o)&&o!==Dn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return On.createResult(Dn.Tokens.STRUCTURAL_CHARACTER,rt.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===rt.QUOTED_IDENTIFIER_DELIMITER)return On.getQuotedIdentifier(r.slice(i+1));if(s===rt.COMMENT_DELIMITER)return On.getComment(r.slice(i+1));e=i}}else if(rt.SEPARATORS.has(s)||rt.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===rt.QUOTED_IDENTIFIER_DELIMITER||s===rt.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(rt.OPERATORS[u]){if(n&&!rt.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return On.createResult(Dn.Tokens.OPERATOR,rt.OPERATORS[u],l)}else return On.createResult(Dn.Tokens.IDENTIFIER,u,l)}return On.createResult(Dn.Tokens.EOF,null,"")}});var b_=h(sr=>{"use strict";var aA=sr&&sr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};sr.__esModule=!0;var oA=T_(),Pn=Ut(),Sa=bd();sr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=oA.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==Pn.Tokens.COMMENT)return sr.validateToken(s,t,n),s}}};sr.getValue=function(r,e){var t=r(Sa.VALID_TOKENS.identifierOrNot),n=t.value===Pn.Operators.NOT;n&&(t=r(Sa.VALID_TOKENS.identifierOnly));var i=t.name===Pn.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?aA(i,[{name:Pn.Tokens.OPERATOR,value:Pn.Operators.NOT}]):i};sr.previousOperatorTakesPrecedent=function(r,e){return Sa.OPERATOR_PRECEDENCE[r]<=Sa.OPERATOR_PRECEDENCE[e]};sr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===Pn.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Md=h(Qi=>{"use strict";var An=Qi&&Qi.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Qi.__esModule=!0;var v_=Ut(),E_=bd(),Ia=b_();Qi.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Ia.newTokenGenerator(r);return wd(e)};var wd=function(r,e){e===void 0&&(e=!1);for(var t=An(Ia.getValue(r,wd)),n=[];;){var i=e?E_.VALID_TOKENS.binaryOperatorOrClose:E_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===v_.Tokens.EOF||s.name===v_.Tokens.STRUCTURAL_CHARACTER)return An(t,An(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Ia.previousOperatorTakesPrecedent(a.value,s.value))t=An(t,[a]),n=n.slice(0,-1);else break}n=An(n,[s]),t=An(t,Ia.getValue(r,wd))}}});var Dd=h(ar=>{"use strict";ar.__esModule=!0;var R_=Ut();ar.andUtil=function(r,e){return r&&e};ar.orUtil=function(r,e){return r||e};ar.xorUtil=function(r,e){return r!==e};ar.notUtil=function(r){return!r};ar.isIdentifier=function(r){var e=r.name,t=r.value;return e===R_.Tokens.IDENTIFIER&&typeof t=="string"};ar.isOperator=function(r){var e=r.name,t=r.value;return e===R_.Tokens.OPERATOR&&typeof t=="string"};ar.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var w_=h(Ad=>{"use strict";var Ji;Ad.__esModule=!0;var Od=Ut(),Pd=Dd();Ad.OPERATOR_MAP=(Ji={},Ji[Od.Operators.AND]=Pd.andUtil,Ji[Od.Operators.OR]=Pd.orUtil,Ji[Od.Operators.XOR]=Pd.xorUtil,Ji)});var D_=h(Vr=>{"use strict";var kd=Vr&&Vr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};Vr.__esModule=!0;var uA=Md(),M_=Ut(),lA=w_(),Kr=Dd();Vr.getEvaluator=function(r){var e=uA.parse(r);return function(t){return Vr.evaluate(e,t)}};Vr.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(Kr.isIdentifier(i)||Kr.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===M_.Tokens.IDENTIFIER)return kd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===M_.Operators.NOT)return o===void 0&&Kr.throwInvalidExpression("missing identifier"),kd(n.slice(0,-1),[Kr.notUtil(o)]);(o===void 0||a===void 0)&&Kr.throwInvalidExpression("missing identifier");var u=lA.OPERATOR_MAP[i.value];return u||Kr.throwInvalidExpression("unknown operator"),kd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&Kr.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var P_=h(es=>{"use strict";es.__esModule=!0;var O_=D_();es.getEvaluator=O_.getEvaluator;es.evaluate=O_.evaluate;var cA=Md();es.parse=cA.parse});var gA={};L_(gA,{default:()=>Xa});module.exports=Y_(gA);var C_=require("obsidian");var Rs=require("obsidian");var TA=new Error("timeout while waiting for mutex to become available"),bA=new Error("mutex already locked"),$_=new Error("request for lock canceled"),df=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},ro=class{constructor(e,t=$_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return df(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return df(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},j_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},hs=class{constructor(e){this._semaphore=new ro(1,e)}acquire(){return j_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Tp=require("obsidian");var pf=require("obsidian");var ff=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var wt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return ff.forEach(t=>{e=[...e,new wt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return wt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of wt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var G_={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,features:wt.settingsFlags},In=$e({},G_),ie=()=>{for(let r in wt.settingsFlags)In.features[r]===void 0&&(In.features[r]=wt.settingsFlags[r]);return $e({},In)},Lt=r=>(In=$e($e({},In),r),ie());var no,io,hf=({metadataCache:r,vault:e})=>{no=r,io=e},ms=t=>ne(void 0,[t],function*({originalTask:r,newTasks:e}){if(io===void 0||no===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),mf({originalTask:r,newTasks:e,vault:io,metadataCache:no,previousTries:0})}),mf=s=>ne(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let _=Math.min(Math.pow(10,i),100);setTimeout(()=>{mf({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},_)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof pf.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=ie(),p,y=0;for(let _ of l){if(_.position.start.line<r.sectionStart||_.task===void 0)continue;if(d[_.position.start.line].includes(f)){if(y===r.sectionIndex){p=_;break}y++}}if(p===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,p.position.start.line),...e.map(_=>_.toFileLineString()),...d.slice(p.position.start.line+1)];yield t.modify(o,m.join(`
`))});var Qr=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1}};var ys=["MO","TU","WE","TH","FR","SA","SU"],ge=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(ys.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=ys[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var ae=function(r){return r!=null},Ze=function(r){return typeof r=="number"},so=function(r){return typeof r=="string"&&ys.includes(r)},xe=Array.isArray,nt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var j=function(r,e){var t=0,n=[];if(xe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},yf=function(r){return xe(r)?r:[r]};function kr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=j(t,e/t.length)),t.slice(0,e)+String(n))}var gf=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},qe=function(r,e){var t=r%e;return t*e<0?t+e:t},gs=function(r,e){return{div:Math.floor(r/e),mod:qe(r,e)}},Xe=function(r){return!ae(r)||r.length===0},ye=function(r){return!Xe(r)},G=function(r,e){return ye(r)&&r.indexOf(e)!==-1};var pr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[kr(n.getUTCFullYear().toString(),4,"0"),kr(n.getUTCMonth()+1,2,"0"),kr(n.getUTCDate(),2,"0"),"T",kr(n.getUTCHours(),2,"0"),kr(n.getUTCMinutes(),2,"0"),kr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(pr||(pr={}));var N=pr;var H_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Yt=H_;var Lf=ps(Wf(),1),{__extends:en,__assign:je,__rest:WA,__decorate:LA,__param:YA,__metadata:$A,__awaiter:jA,__generator:BA,__exportStar:GA,__createBinding:HA,__values:zA,__read:KA,__spread:VA,__spreadArrays:ZA,__spreadArray:b,__await:XA,__asyncGenerator:QA,__asyncDelegator:JA,__asyncValues:ek,__makeTemplateObject:tk,__importStar:rk,__importDefault:nk,__classPrivateFieldGet:ik,__classPrivateFieldSet:sk,__classPrivateFieldIn:ak}=Lf.default;var z_=function(r){en(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Yt),oo=z_;var K_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Nr=K_;var Yf=function(r,e){return r.indexOf(e)!==-1},V_=function(r){return r.toString()},Z_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},X_=function(){function r(e,t,n,i){if(t===void 0&&(t=V_),n===void 0&&(n=Nr),i===void 0&&(i=Z_),this.text=[],this.language=n||Nr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(ae(this.origOptions.byweekday)){var o=xe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(Yf(["dtstart","wkst","freq"],n))return!0;if(!Yf(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[D.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=Ze(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),xe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),Mt=X_;var Q_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Un(r,e){e===void 0&&(e=Nr);var t={},n=new Q_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=D.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=D.WEEKLY,t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=D.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=D.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=D.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=D.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=D.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=D.WEEKLY;var p=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[D[p]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var y=u();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(D[y]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=D.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),p=n.accept("the");if(!!(f||p))do{var y=l(),m=u(),_=o();if(y)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m].nth(y))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(y),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(D[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[D.MO,D.TU,D.WE,D.TH,D.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var A=n.acceptNumber();if(!A)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(A[0],10)];n.accept("comma");){if(A=n.acceptNumber(),!A)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(A[0],10))}}else if(_)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(_);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var p=n.acceptNumber();if(!p)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(p[0],10)];n.accept("comma");){if(p=n.acceptNumber(),!p)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(p[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var Y;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})(Y||(Y={}));function Fn(r){return r<Y.HOURLY}var $f=function(r,e){return e===void 0&&(e=Nr),new D(Un(r,e)||void 0)},tn=["count","until","interval","byweekday","bymonthday","bymonth"];Mt.IMPLEMENTED=[];Mt.IMPLEMENTED[Y.HOURLY]=tn;Mt.IMPLEMENTED[Y.MINUTELY]=tn;Mt.IMPLEMENTED[Y.DAILY]=["byhour"].concat(tn);Mt.IMPLEMENTED[Y.WEEKLY]=tn;Mt.IMPLEMENTED[Y.MONTHLY]=tn;Mt.IMPLEMENTED[Y.YEARLY]=["byweekno","byyearday"].concat(tn);var jf=function(r,e,t,n){return new Mt(r,e,t,n).toString()},Bf=Mt.isFullyConvertible;var rn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Gf=function(r){en(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return pr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=qe(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=gs(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),Xe(i)||G(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=gs(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(Xe(i)||G(i,this.hour))&&(Xe(s)||G(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=gs(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(Xe(i)||G(i,this.hour))&&(Xe(s)||G(s,this.minute))&&(Xe(a)||G(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=pr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>pr.MAXYEAR))return;t=pr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case Y.YEARLY:return this.addYears(s);case Y.MONTHLY:return this.addMonths(s);case Y.WEEKLY:return this.addWeekly(s,a);case Y.DAILY:return this.addDaily(s);case Y.HOURLY:return this.addHours(s,n,o);case Y.MINUTELY:return this.addMinutes(s,n,o,u);case Y.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(rn);function uo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];G(Kf,s)||e.push(s),N.isDate(r[s])&&!N.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return je({},r)}function Hf(r){var e=je(je({},qn),uo(r));if(ae(e.byeaster)&&(e.freq=D.YEARLY),!(ae(e.freq)&&D.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),ae(e.wkst)?Ze(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=D.MO.weekday,ae(e.bysetpos)){Ze(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||ye(e.byweekno)||ye(e.byyearday)||Boolean(e.bymonthday)||ye(e.bymonthday)||ae(e.byweekday)||ae(e.byeaster)))switch(e.freq){case D.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case D.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case D.WEEKLY:e.byweekday=[N.getWeekday(e.dtstart)];break}if(ae(e.bymonth)&&!xe(e.bymonth)&&(e.bymonth=[e.bymonth]),ae(e.byyearday)&&!xe(e.byyearday)&&Ze(e.byyearday)&&(e.byyearday=[e.byyearday]),!ae(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(xe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(ae(e.byweekno)&&!xe(e.byweekno)&&(e.byweekno=[e.byweekno]),!ae(e.byweekday))e.bynweekday=null;else if(Ze(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(so(e.byweekday))e.byweekday=[ge.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof ge)!e.byweekday.n||e.freq>D.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(Ze(u)){a.push(u);continue}else if(so(u)){a.push(ge.fromStr(u).weekday);continue}!u.n||e.freq>D.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=ye(a)?a:null,e.bynweekday=ye(o)?o:null}return ae(e.byhour)?Ze(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<D.HOURLY?[e.dtstart.getUTCHours()]:null,ae(e.byminute)?Ze(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<D.MINUTELY?[e.dtstart.getUTCMinutes()]:null,ae(e.bysecond)?Ze(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<D.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function zf(r){var e=r.dtstart.getTime()%1e3;if(!Fn(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new rn(n,i,s,e))})})}),t}function Ln(r){var e=r.split(`
`).map(J_).filter(function(t){return t!==null});return je(je({},e[0]),e[1])}function Wn(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=N.untilStringToDate(i),e}function J_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return Vf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return Vf(r);case"DTSTART":return Wn(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function Vf(r){var e=r.replace(/^RRULE:/i,""),t=Wn(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=Y[o.toUpperCase()];break;case"WKST":t.wkst=it[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=eT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=tT(o);break;case"DTSTART":case"TZID":var c=Wn(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=N.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function eT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Zf)}return Zf(r)}function Zf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function tT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return it[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=it[s].weekday;return new ge(a,i)})}var Cr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=N.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function Yn(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(qn),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!G(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!ae(o)||xe(o)&&!o.length)){switch(a){case"FREQ":u=D.FREQUENCIES[r.freq];break;case"WKST":Ze(o)?u=new ge(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=yf(o).map(function(p){return p instanceof ge?p:xe(p)?new ge(p[0],p[1]):new ge(p)}).toString();break;case"DTSTART":t=rT(o,r.tzid);break;case"UNTIL":u=N.timeToUntilString(o,!r.tzid);break;default:if(xe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(p){var y=p[0],m=p[1];return"".concat(y,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(p){return!!p}).join(`
`)}function rT(r,e){return r?"DTSTART"+new Cr(new Date(r),e).toString():""}function nT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Xf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?N.clone(t):N.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!nT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(xe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Yt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return xe(n)?N.cloneDates(n):n instanceof Date?N.clone(n):n},r}();var Qf=b(b(b(b(b(b(b(b(b(b(b(b(b([],j(1,31),!0),j(2,28),!0),j(3,31),!0),j(4,30),!0),j(5,31),!0),j(6,30),!0),j(7,31),!0),j(8,31),!0),j(9,30),!0),j(10,31),!0),j(11,30),!0),j(12,31),!0),j(1,7),!0),Jf=b(b(b(b(b(b(b(b(b(b(b(b(b([],j(1,31),!0),j(2,29),!0),j(3,31),!0),j(4,30),!0),j(5,31),!0),j(6,30),!0),j(7,31),!0),j(8,31),!0),j(9,30),!0),j(10,31),!0),j(11,30),!0),j(12,31),!0),j(1,7),!0),iT=nt(1,29),sT=nt(1,30),hr=nt(1,31),We=nt(1,32),ep=b(b(b(b(b(b(b(b(b(b(b(b(b([],We,!0),sT,!0),We,!0),hr,!0),We,!0),hr,!0),We,!0),We,!0),hr,!0),We,!0),hr,!0),We,!0),We.slice(0,7),!0),tp=b(b(b(b(b(b(b(b(b(b(b(b(b([],We,!0),iT,!0),We,!0),hr,!0),We,!0),hr,!0),We,!0),We,!0),hr,!0),We,!0),hr,!0),We,!0),We.slice(0,7),!0),aT=nt(-28,0),oT=nt(-29,0),mr=nt(-30,0),Le=nt(-31,0),rp=b(b(b(b(b(b(b(b(b(b(b(b(b([],Le,!0),oT,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le.slice(0,7),!0),np=b(b(b(b(b(b(b(b(b(b(b(b(b([],Le,!0),aT,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le,!0),mr,!0),Le,!0),mr,!0),Le,!0),Le.slice(0,7),!0),ip=[0,31,60,91,121,152,182,213,244,274,305,335,366],sp=[0,31,59,90,120,151,181,212,243,273,304,334,365],lo=function(){for(var r=[],e=0;e<55;e++)r=r.concat(nt(7));return r}();function ap(r,e){var t=new Date(Date.UTC(r,0,1)),n=N.isLeapYear(r)?366:365,i=N.isLeapYear(r+1)?366:365,s=N.toOrdinal(t),a=N.getWeekday(t),o=je(je({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},uT(r)),{wnomask:null});if(Xe(e.byweekno))return o;o.wnomask=j(0,n+7);var u,l,c=u=qe(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+qe(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=qe(l,7),p=Math.floor(d+f/4),y=0;y<e.byweekno.length;y++){var m=e.byweekno[y];if(m<0&&(m+=p+1),m>0&&m<=p){var _=void 0;m>1?(_=c+(m-1)*7,c!==u&&(_-=7-u)):_=c;for(var A=0;A<7&&(o.wnomask[_]=1,_++,o.wdaymask[_]!==e.wkst);A++);}}if(G(e.byweekno,1)){var _=c+p*7;if(c!==u&&(_-=7-u),_<n)for(var y=0;y<7&&(o.wnomask[_]=1,_+=1,o.wdaymask[_]!==e.wkst);y++);}if(c){var I=void 0;if(G(e.byweekno,-1))I=-1;else{var C=N.getWeekday(new Date(Date.UTC(r-1,0,1))),z=qe(7-C.valueOf()+e.wkst,7),re=N.isLeapYear(r-1)?366:365,fe=void 0;z>=4?(z=0,fe=re+qe(C-e.wkst,7)):fe=n-c,I=Math.floor(52+qe(fe,7)/4)}if(G(e.byweekno,I))for(var _=0;_<c;_++)o.wnomask[_]=1}return o}function uT(r){var e=N.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=N.getWeekday(t);return e===365?{mmask:Qf,mdaymask:tp,nmdaymask:np,wdaymask:lo.slice(n),mrange:sp}:{mmask:Jf,mdaymask:ep,nmdaymask:rp,wdaymask:lo.slice(n),mrange:ip}}function op(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===D.YEARLY)if(Xe(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===D.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(Xe(o))return a;a.nwdaymask=j(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var p=void 0,y=s.bynweekday[f],m=y[0],_=y[1];_<0?(p=d+(_+1)*7,p-=qe(i[p]-m,7)):(p=c+(_-1)*7,p+=qe(7-i[p]+m,7)),c<=p&&p<=d&&(a.nwdaymask[p]=1)}return a}function up(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,p=Math.floor((t+11*l+22*f)/451),y=Math.floor((l+f-7*p+114)/31),m=(l+f-7*p+114)%31+1,_=Date.UTC(r,y-1,m+e),A=Date.UTC(r,0,1);return[Math.ceil((_-A)/(1e3*60*60*24))]}var lT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=ap(e,n)),ye(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=op(e,t,s,a,o,n)}ae(n.byeaster)&&(this.eastermask=up(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[nt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=j(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=j(null,this.yearlen+7),s=N.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=j(null,this.yearlen),s=N.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),N.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new rn(e,t,a,i)});return N.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new rn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case Y.YEARLY:return this.ydayset.bind(this);case Y.MONTHLY:return this.mdayset.bind(this);case Y.WEEKLY:return this.wdayset.bind(this);case Y.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case Y.HOURLY:return this.htimeset.bind(this);case Y.MINUTELY:return this.mtimeset.bind(this);case Y.SECONDLY:return this.stimeset.bind(this)}},r}(),lp=lT;function cp(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=qe(c,e.length)):(u=Math.floor((c-1)/e.length),l=qe(c-1,e.length));for(var d=[],f=t;f<n;f++){var p=s[f];!ae(p)||d.push(p)}var y=void 0;u<0?y=d.slice(u)[0]:y=d[u];var m=e[l],_=N.fromOrdinal(i.yearordinal+y),A=N.combine(_,m);G(a,A)||a.push(A)}return N.sort(a),a}function vs(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return $t(r);var u=Gf.fromDate(t),l=new lp(e);l.rebuild(u.year,u.month);for(var c=fT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],p=d[1],y=d[2],m=dT(f,p,y,l,e);if(ye(a))for(var _=cp(a,c,p,y,l,f),A=0;A<_.length;A++){var I=_[A];if(s&&I>s)return $t(r);if(I>=t){var C=dp(I,e);if(!r.accept(C)||o&&(--o,!o))return $t(r)}}else for(var A=p;A<y;A++){var z=f[A];if(!!ae(z))for(var re=N.fromOrdinal(l.yearordinal+z),fe=0;fe<c.length;fe++){var ee=c[fe],I=N.combine(re,ee);if(s&&I>s)return $t(r);if(I>=t){var C=dp(I,e);if(!r.accept(C)||o&&(--o,!o))return $t(r)}}}if(e.interval===0||(u.add(e,m),u.year>N.MAXYEAR))return $t(r);Fn(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function cT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return ye(n)&&!G(n,r.mmask[e])||ye(i)&&!r.wnomask[e]||ye(s)&&!G(s,r.wdaymask[e])||ye(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!G(r.eastermask,e)||(ye(o)||ye(u))&&!G(o,r.mdaymask[e])&&!G(u,r.nmdaymask[e])||ye(l)&&(e<r.yearlen&&!G(l,e+1)&&!G(l,-r.yearlen+e)||e>=r.yearlen&&!G(l,e+1-r.yearlen)&&!G(l,-r.nextyearlen+e-r.yearlen))}function dp(r,e){return new Cr(r,e.tzid).rezonedDate()}function $t(r){return r.getValue()}function dT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=cT(n,o,i),s&&(r[o]=null)}return s}function fT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return Fn(n)?zf(t):n>=D.HOURLY&&ye(i)&&!G(i,e.hour)||n>=D.MINUTELY&&ye(s)&&!G(s,e.minute)||n>=D.SECONDLY&&ye(a)&&!G(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var it={MO:new ge(0),TU:new ge(1),WE:new ge(2),TH:new ge(3),FR:new ge(4),SA:new ge(5),SU:new ge(6)},qn={freq:Y.YEARLY,dtstart:null,interval:1,wkst:it.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Kf=Object.keys(qn),D=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Xf,this.origOptions=uo(e);var n=Hf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Un(e,t)},r.fromText=function(e,t){return $f(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return vs(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new oo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Yt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!N.isValidDate(e)||!N.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new oo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Yt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!N.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Yt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!N.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Yt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return Yn(this.origOptions)},r.prototype.toText=function(e,t,n){return jf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return Bf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=Y.YEARLY,r.MONTHLY=Y.MONTHLY,r.WEEKLY=Y.WEEKLY,r.DAILY=Y.DAILY,r.HOURLY=Y.HOURLY,r.MINUTELY=Y.MINUTELY,r.SECONDLY=Y.SECONDLY,r.MO=it.MO,r.TU=it.TU,r.WE=it.WE,r.TH=it.TH,r.FR=it.FR,r.SA=it.SA,r.SU=it.SU,r.parseString=Ln,r.optionsToString=Yn,r}();function fp(r,e,t,n,i,s){var a={},o=r.accept;function u(f,p){t.forEach(function(y){y.between(f,p,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var p=new Cr(f,s).rezonedDate();a[Number(p)]=!0}),r.accept=function(f){var p=Number(f);return isNaN(p)?o.call(this,f):!a[p]&&(u(new Date(p-1),new Date(p+1)),!a[p])?(a[p]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var p=Number(f);return a[p]?!0:(a[p]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new Cr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){vs(r,f.options)});var d=r._result;switch(N.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var pp={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function pT(r,e){var t=[],n=[],i=[],s=[],a=Wn(r),o=a.dtstart,u=a.tzid,l=_T(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=gT(c),p=f.name,y=f.parms,m=f.value;switch(p.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: ".concat(y.join(",")));t.push(Ln(c));break;case"RDATE":var _=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],A=_[1];A&&!u&&(u=A),n=n.concat(hp(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: ".concat(y.join(",")));i.push(Ln(m));break;case"EXDATE":s=s.concat(hp(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+p)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function hT(r,e){var t=pT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new fo(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new D(co(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new D(co(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new D(co(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Es(r,e){return e===void 0&&(e={}),hT(r,mT(e))}function co(r,e,t){return je(je({},r),{dtstart:e,tzid:t})}function mT(r){var e=[],t=Object.keys(r),n=Object.keys(pp);if(t.forEach(function(i){G(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return je(je({},pp),r)}function yT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=gf(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function gT(r){var e=yT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function _T(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function TT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function hp(r,e){return TT(e),r.split(",").map(function(t){return N.untilStringToDate(t)})}function mp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var fo=function(r){en(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=mp.apply(n,["dtstart"]),n.tzid=mp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return fp(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){yp(t,this._rrule)},e.prototype.exrule=function(t){yp(t,this._exrule)},e.prototype.rdate=function(t){gp(t,this._rdate)},e.prototype.exdate=function(t){gp(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Es(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Es(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(Yn({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(_p("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(_p("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(D);function yp(r,e){if(!(r instanceof D))throw new TypeError(String(r)+" is not RRule instance");G(e.map(String),String(r))||e.push(r)}function gp(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");G(e.map(Number),Number(r))||(e.push(r),N.sort(e))}function _p(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return N.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var H=class{static by(e,t){let n=[H.compareByUrgency,H.compareByStatus,H.compareByDueDate,H.compareByPriority,H.compareByPath],i=[];for(let{property:s,reverse:a,propertyInstance:o}of e.sorting){let u=H.comparators[s];i.push(a?H.makeReversedComparator(u):u),s==="tag"&&(H.tagPropertyInstance=o)}return t.sort(H.makeCompositeComparator([...i,...n]))}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}static compareByUrgency(e,t){return t.urgency-e.urgency}static compareByStatus(e,t){return e.status<t.status?1:e.status>t.status?-1:0}static compareByPriority(e,t){return e.priority.localeCompare(t.priority)}static compareByStartDate(e,t){return H.compareByDate(e.startDate,t.startDate)}static compareByScheduledDate(e,t){return H.compareByDate(e.scheduledDate,t.scheduledDate)}static compareByDueDate(e,t){return H.compareByDate(e.dueDate,t.dueDate)}static compareByDoneDate(e,t){return H.compareByDate(e.doneDate,t.doneDate)}static compareByTag(e,t){if(e.tags.length===0&&t.tags.length===0)return 0;if(e.tags.length===0)return 1;if(t.tags.length===0)return-1;let n=H.tagPropertyInstance-1;return e.tags.length<H.tagPropertyInstance&&t.tags.length>=H.tagPropertyInstance?1:t.tags.length<H.tagPropertyInstance&&e.tags.length>=H.tagPropertyInstance?-1:e.tags.length<H.tagPropertyInstance&&t.tags.length<H.tagPropertyInstance?0:e.tags[n]<t.tags[n]?-1:e.tags[n]>t.tags[n]?1:0}static compareByDate(e,t){return e!==null&&t===null?-1:e===null&&t!==null?1:e!==null&&t!==null?e.isAfter(t)?1:e.isBefore(t)?-1:0:0}static compareByPath(e,t){return e.path<t.path?-1:e.path>t.path?1:0}static compareByDescription(e,t){return H.cleanDescription(e.description).localeCompare(H.cleanDescription(t.description))}static cleanDescription(e){let t=ie().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)\]/,i=e.match(n);if(i!==null){let l=i[1];e=l.substring(l.indexOf("|")+1)+e.replace(n,"")}let s=/^\*\*?([^*]*)\*/,a=e.match(s);a!==null&&(e=a[1]+e.replace(n,""));let o=/^==?([^=]*)==/,u=e.match(o);return u!==null&&(e=u[1]+e.replace(o,"")),e}},Ge=H;Ge.tagPropertyInstance=1,Ge.comparators={urgency:H.compareByUrgency,description:H.compareByDescription,priority:H.compareByPriority,start:H.compareByStartDate,scheduled:H.compareByScheduledDate,due:H.compareByDueDate,done:H.compareByDoneDate,path:H.compareByPath,status:H.compareByStatus,tag:H.compareByTag};var Re=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=D.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new D(u);return new Re({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new D(Wt($e({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||Ge.compareByDate(this.startDate,e.startDate)!==0||Ge.compareByDate(this.scheduledDate,e.scheduledDate)!==0||Ge.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Re.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Re.nextAfterYears(e,n,t,a[1])),Re.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyMonths(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Re.isSkippingTooManyYears(e,t,s);)t=Re.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new D(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var Bt=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/Bt.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*Bt.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*Bt.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*Bt.startedCoefficient),e.priority){case"1":t+=1*Bt.priorityCoefficient;break;case"2":t+=.65*Bt.priorityCoefficient;break;case"3":t+=.325*Bt.priorityCoefficient;break}return t}},jt=Bt;jt.dueCoefficient=12,jt.scheduledCoefficient=5,jt.startedCoefficient=-3,jt.priorityCoefficient=6,jt.milliSecondsPerDay=1e3*60*60*24;var we={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},Dt="\u{1F501}",Ot="\u{1F6EB}",Pt="\u23F3",At="\u{1F4C5}",po="\u2705",Qe=class{},M=Qe;M.dateFormat="YYYY-MM-DD",M.indentationRegex=/^([\s\t>]*)/,M.listMarkerRegex=/[-*]/,M.checkboxRegex=/\[(.)\]/u,M.afterCheckboxRegex=/ *(.*)/u,M.taskRegex=new RegExp(Qe.indentationRegex.source+Qe.listMarkerRegex.source+" +"+Qe.checkboxRegex.source+Qe.afterCheckboxRegex.source,"u"),M.nonTaskRegex=new RegExp(Qe.indentationRegex.source+Qe.listMarkerRegex.source+"? *("+Qe.checkboxRegex.source+")?"+Qe.afterCheckboxRegex.source,"u"),M.listItemRegex=new RegExp(Qe.indentationRegex.source+"("+Qe.listMarkerRegex.source+")"),M.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,M.priorityRegex=/([⏫🔼🔽])$/u,M.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,M.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,M.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,M.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,M.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,M.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,M.hashTagsFromEnd=new RegExp(Qe.hashTags.source+"$");var oe=class{constructor({status:e,description:t,path:n,indentation:i,sectionStart:s,sectionIndex:a,originalStatusCharacter:o,precedingHeader:u,priority:l,startDate:c,scheduledDate:d,dueDate:f,doneDate:p,recurrence:y,blockLink:m,tags:_}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.sectionStart=s,this.sectionIndex=a,this.originalStatusCharacter=o,this.precedingHeader=u,this.tags=_,this.priority=l,this.startDate=c,this.scheduledDate=d,this.dueDate=f,this.doneDate=p,this.recurrence=y,this.blockLink=m}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s}){let a=e.match(M.taskRegex);if(a===null)return null;let o=a[3].trim(),{globalFilter:u}=ie();if(!o.includes(u))return null;let l=o,c=a[1],d=a[2],f;switch(d){case" ":f="Todo";break;default:f="Done"}let p=l.match(M.blockLinkRegex),y=p!==null?p[0]:"";y!==""&&(l=l.replace(M.blockLinkRegex,"").trim());let m,_="3",A=null,I=null,C=null,z=null,re="",fe=null,ee=[],x="",le=20,pe=0;do{m=!1;let v=l.match(M.priorityRegex);if(v!==null){switch(v[1]){case we.Low:_="4";break;case we.Medium:_="2";break;case we.High:_="1";break}l=l.replace(M.priorityRegex,"").trim(),m=!0}let T=l.match(M.doneDateRegex);T!==null&&(z=window.moment(T[1],M.dateFormat),l=l.replace(M.doneDateRegex,"").trim(),m=!0);let P=l.match(M.dueDateRegex);P!==null&&(C=window.moment(P[1],M.dateFormat),l=l.replace(M.dueDateRegex,"").trim(),m=!0);let E=l.match(M.scheduledDateRegex);E!==null&&(I=window.moment(E[1],M.dateFormat),l=l.replace(M.scheduledDateRegex,"").trim(),m=!0);let U=l.match(M.startDateRegex);U!==null&&(A=window.moment(U[1],M.dateFormat),l=l.replace(M.startDateRegex,"").trim(),m=!0);let O=l.match(M.recurrenceRegex);O!==null&&(re=O[1].trim(),l=l.replace(M.recurrenceRegex,"").trim(),m=!0);let F=l.match(M.hashTagsFromEnd);if(F!=null){l=l.replace(M.hashTagsFromEnd,"").trim(),m=!0;let X=F[0].trim();x=x.length>0?[X,x].join(" "):X}pe++}while(m&&pe<=le);re.length>0&&(fe=Re.fromText({recurrenceRuleText:re,startDate:A,scheduledDate:I,dueDate:C})),x.length>0&&(l+=" "+x);let w=l.match(M.hashTags);return w!==null&&(ee=w.filter(v=>v!==u).map(v=>v.trim())),new oe({status:f,description:l,path:t,indentation:c,sectionStart:n,sectionIndex:i,originalStatusCharacter:d,precedingHeader:s,priority:_,startDate:A,scheduledDate:I,dueDate:C,doneDate:z,recurrence:fe,blockLink:y,tags:ee})}toLi(s){return ne(this,arguments,function*({parentUlElement:e,listIndex:t,layoutOptions:n,isFilenameUnique:i}){let a=e.createEl("li");a.addClasses(["task-list-item","plugin-tasks-list-item"]);let o=this.toString(n),{globalFilter:u,removeGlobalFilter:l}=ie();l&&(o=o.replace(u,"").trim());let c=a.createSpan();c.addClass("tasks-list-text"),yield Tp.MarkdownRenderer.renderMarkdown(o,c,this.path,null);let d=c.querySelector("blockquote"),f=d!=null?d:c,p=f.querySelector("p");if(p!==null){for(;p.firstChild;)f.insertBefore(p.firstChild,p);p.remove()}c.findAll("p").forEach(m=>{m.hasChildNodes()||m.remove()}),c.findAll(".footnotes").forEach(m=>{m.remove()});let y=a.createEl("input");return y.addClass("task-list-item-checkbox"),y.type="checkbox",this.status!=="Todo"&&(y.checked=!0,a.addClass("is-checked")),y.onClickEvent(m=>{m.preventDefault(),m.stopPropagation(),y.disabled=!0;let _=this.toggle();ms({originalTask:this,newTasks:_})}),a.prepend(y),a.setAttr("data-task",this.originalStatusCharacter.trim()),a.setAttr("data-line",t),y.setAttr("data-line",t),n!=null&&n.shortMode&&this.addTooltip({element:c,isFilenameUnique:i}),a})}toString(e){var i;e=e!=null?e:new Qr;let t=this.description;if(!e.hidePriority){let s="";this.priority==="1"?s=" "+we.High:this.priority==="2"?s=" "+we.Medium:this.priority==="4"&&(s=" "+we.Low),t+=s}return!e.hideRecurrenceRule&&this.recurrence&&(t+=e.shortMode?" "+Dt:` ${Dt} ${this.recurrence.toText()}`),!e.hideStartDate&&this.startDate&&(t+=e.shortMode?" "+Ot:` ${Ot} ${this.startDate.format(M.dateFormat)}`),!e.hideScheduledDate&&this.scheduledDate&&(t+=e.shortMode?" "+Pt:` ${Pt} ${this.scheduledDate.format(M.dateFormat)}`),!e.hideDueDate&&this.dueDate&&(t+=e.shortMode?" "+At:` ${At} ${this.dueDate.format(M.dateFormat)}`),!e.hideDoneDate&&this.doneDate&&(t+=e.shortMode?" "+po:` ${po} ${this.doneDate.format(M.dateFormat)}`),t+=(i=this.blockLink)!=null?i:"",t}toFileLineString(){return`${this.indentation}- [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=ie();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new oe(Wt($e({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new oe(Wt($e($e({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=jt.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(Ge.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}addTooltip({element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),this.recurrence&&n.createDiv().setText(`${Dt} ${this.recurrence.toText()}`),this.startDate&&n.createDiv().setText(oe.toTooltipDate({signifier:Ot,date:this.startDate})),this.scheduledDate&&n.createDiv().setText(oe.toTooltipDate({signifier:Pt,date:this.scheduledDate})),this.dueDate&&n.createDiv().setText(oe.toTooltipDate({signifier:At,date:this.dueDate})),this.doneDate&&n.createDiv().setText(oe.toTooltipDate({signifier:po,date:this.doneDate}));let i=this.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}static toTooltipDate({signifier:e,date:t}){return`${e} ${t.format(M.dateFormat)} (${t.from(window.moment().startOf("day"))})`}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=ie(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var yr=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new hs,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>ne(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let e=this.vault.on("create",i=>{i instanceof Rs.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(i)})});this.vaultEventReferences.push(e);let t=this.vault.on("delete",i=>{i instanceof Rs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(s=>s.path!==i.path),this.notifySubscribers()})});this.vaultEventReferences.push(t);let n=this.vault.on("rename",(i,s)=>{i instanceof Rs.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.map(a=>a.path===s?new oe(Wt($e({},a),{path:i.path})):a),this.notifySubscribers()})});this.vaultEventReferences.push(n)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>ne(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return ne(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=yr.getTasksFromFileContent(a,i,t,e)}oe.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=null,u=0;for(let l of t)if(l.task!==void 0){if((o===null||o.position.end.line<l.position.start.line)&&(o=yr.getSection(l.position.start.line,n.sections),u=0),o===null)continue;let c=a[l.position.start.line],d=oe.fromLine({line:c,path:i.path,sectionStart:o.position.start.line,sectionIndex:u,precedingHeader:yr.getPrecedingHeader(l.position.start.line,n.headings)});d!==null&&(u++,s.push(d))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var fd=require("obsidian");var c_=require("obsidian");function nn(){}function yo(r){return r()}function vp(){return Object.create(null)}function Sr(r){r.forEach(yo)}function Rp(r){return typeof r=="function"}function wp(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Mp(r){return Object.keys(r).length===0}var Dp=!1;function bT(){Dp=!0}function vT(){Dp=!1}function g(r,e){r.appendChild(e)}function go(r,e,t){r.insertBefore(e,t||null)}function Ps(r){r.parentNode.removeChild(r)}function k(r){return document.createElement(r)}function ET(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function gr(r){return document.createTextNode(r)}function B(){return gr(" ")}function Gt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Op(r){return function(e){return e.preventDefault(),r.call(this,e)}}function S(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function RT(r){return Array.from(r.childNodes)}function Pp(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function yt(r,e){r.value=e==null?"":e}function _o(r,e){for(let t=0;t<r.options.length;t+=1){let n=r.options[t];if(n.__value===e){n.selected=!0;return}}r.selectedIndex=-1}function Ap(r){let e=r.querySelector(":checked")||r.options[0];return e&&e.__value}var xr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=ET(t.nodeName):this.e=k(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)go(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(Ps)}};var Bn;function jn(r){Bn=r}function wT(){if(!Bn)throw new Error("Function called outside component initialization");return Bn}function To(r){wT().$$.on_mount.push(r)}var $n=[];var Ds=[],Ms=[],Ep=[],MT=Promise.resolve(),mo=!1;function DT(){mo||(mo=!0,MT.then(kp))}function Gn(r){Ms.push(r)}var ho=new Set,ws=0;function kp(){let r=Bn;do{for(;ws<$n.length;){let e=$n[ws];ws++,jn(e),OT(e.$$)}for(jn(null),$n.length=0,ws=0;Ds.length;)Ds.pop()();for(let e=0;e<Ms.length;e+=1){let t=Ms[e];ho.has(t)||(ho.add(t),t())}Ms.length=0}while($n.length);for(;Ep.length;)Ep.pop()();mo=!1,ho.clear(),jn(r)}function OT(r){if(r.fragment!==null){r.update(),Sr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(Gn)}}var PT=new Set;function AT(r,e){r&&r.i&&(PT.delete(r),r.i(e))}var qC=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function kT(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||Gn(()=>{let u=s.map(yo).filter(Rp);a?a.push(...u):Sr(u),r.$$.on_mount=[]}),o.forEach(Gn)}function Np(r,e){let t=r.$$;t.fragment!==null&&(Sr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function NT(r,e){r.$$.dirty[0]===-1&&($n.push(r),DT(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Cp(r,e,t,n,i,s,a,o=[-1]){let u=Bn;jn(r);let l=r.$$={fragment:null,ctx:null,props:s,update:nn,not_equal:i,bound:vp(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:vp(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...p)=>{let y=p.length?p[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),c&&NT(r,d)),f}):[],l.update(),c=!0,Sr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){bT();let d=RT(e.target);l.fragment&&l.fragment.l(d),d.forEach(Ps)}else l.fragment&&l.fragment.c();e.intro&&AT(r.$$.fragment),kT(r,e.target,e.anchor,e.customElement),vT(),kp()}jn(u)}var CT;typeof HTMLElement=="function"&&(CT=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(yo).filter(Rp);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Sr(this.$$.on_disconnect)}$destroy(){Np(this,1),this.$destroy=nn}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Mp(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Os=class{$destroy(){Np(this,1),this.$destroy=nn}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Mp(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Hi=ps(Ee());var ZP={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function vn(r){for(let[e,t]of Object.entries(ZP))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function XP(r){let e,t,n,i,s,a,o,u,l,c,d,f,p,y,m,_,A,I,C,z,re,fe,ee,x,le,pe,w,v,T,P,E,U,O,F,X,ue,se,pt,Ye,ur,lr,ht,Ce,mt,Zr,Ve,ts,xd,Ft,Sd,Nn,Id,Ud,rs,Fd,qd,Wd,cr,ns,Ld,qt,Yd,Cn,$d,jd,is,Bd,Gd,Hd,ss,xn,as,zd,dr,Kd,Vd,Zd,Xr,Ar,os,Xd,fr,us,Qd,Qa,ls=r[0].status+"",Ja,Jd,cs,ef,ds,tf,rf,nf,eo,sf,fs,to,af;return{c(){e=k("div"),t=k("form"),n=k("div"),i=k("label"),i.textContent="Description",s=B(),a=k("input"),o=B(),u=k("hr"),l=B(),c=k("div"),d=k("label"),d.textContent="Priority",f=B(),p=k("select"),y=k("option"),y.textContent="None",m=k("option"),m.textContent=`${we.High} High`,_=k("option"),_.textContent=`${we.Medium} Medium`,A=k("option"),A.textContent=`${we.Low} Low`,I=B(),C=k("hr"),z=B(),re=k("div"),fe=k("label"),fe.textContent="Recurrence",ee=B(),x=k("input"),le=B(),pe=k("code"),w=gr(Dt),v=B(),T=new xr(!1),P=B(),E=k("hr"),U=B(),O=k("div"),F=k("div"),X=k("label"),X.textContent="Due",ue=B(),se=k("input"),pt=B(),Ye=k("code"),ur=gr(At),lr=B(),ht=new xr(!1),Ce=B(),mt=k("hr"),Zr=B(),Ve=k("div"),ts=k("label"),ts.textContent="Scheduled",xd=B(),Ft=k("input"),Sd=B(),Nn=k("code"),Id=gr(Pt),Ud=B(),rs=new xr(!1),Fd=B(),qd=k("hr"),Wd=B(),cr=k("div"),ns=k("label"),ns.textContent="Start",Ld=B(),qt=k("input"),Yd=B(),Cn=k("code"),$d=gr(Ot),jd=B(),is=new xr(!1),Bd=B(),Gd=k("hr"),Hd=B(),ss=k("div"),xn=k("div"),as=k("label"),as.textContent="Only future dates:",zd=B(),dr=k("input"),Kd=B(),Vd=k("hr"),Zd=B(),Xr=k("div"),Ar=k("div"),os=k("label"),os.textContent="Status:",Xd=B(),fr=k("input"),Qd=B(),Qa=k("code"),Ja=gr(ls),Jd=B(),cs=k("div"),ef=gr(`Done on:
                `),ds=k("code"),tf=B(),rf=k("hr"),nf=B(),eo=k("div"),sf=B(),fs=k("div"),fs.innerHTML='<button type="submit" class="mod-cta">Apply</button>',S(i,"for","description"),S(a,"id","description"),S(a,"type","text"),S(a,"class","tasks-modal-description"),S(a,"placeholder","Take out the trash"),S(n,"class","tasks-modal-section"),S(d,"for","priority"),y.__value="none",y.value=y.__value,m.__value="high",m.value=m.__value,_.__value="medium",_.value=_.__value,A.__value="low",A.value=A.__value,S(p,"id","priority"),S(p,"class","dropdown"),r[0].priority===void 0&&Gn(()=>r[14].call(p)),S(c,"class","tasks-modal-section"),S(fe,"for","recurrence"),S(x,"id","description"),S(x,"type","text"),S(x,"placeholder","Try 'every 2 weeks on Thursday'."),T.a=null,S(re,"class","tasks-modal-section"),S(X,"for","due"),S(se,"id","due"),S(se,"type","text"),S(se,"placeholder",ld),ht.a=null,S(F,"class","tasks-modal-date"),S(ts,"for","scheduled"),S(Ft,"id","scheduled"),S(Ft,"type","text"),S(Ft,"placeholder",ld),rs.a=null,S(Ve,"class","tasks-modal-date"),S(ns,"for","start"),S(qt,"id","start"),S(qt,"type","text"),S(qt,"placeholder",ld),is.a=null,S(cr,"class","tasks-modal-date"),S(as,"for","forwardOnly"),S(dr,"id","forwardOnly"),S(dr,"type","checkbox"),S(dr,"class","task-list-item-checkbox tasks-modal-checkbox"),S(ss,"class","tasks-modal-date"),S(O,"class","tasks-modal-section"),S(os,"for","status"),S(fr,"id","status"),S(fr,"type","checkbox"),S(fr,"class","task-list-item-checkbox tasks-modal-checkbox"),fr.checked=us=r[0].status==="Done",fr.disabled=!0,S(Xr,"class","tasks-modal-section"),S(eo,"class","tasks-modal-section"),S(fs,"class","tasks-modal-section"),S(e,"class","tasks-modal")},m(de,Fe){go(de,e,Fe),g(e,t),g(t,n),g(n,i),g(n,s),g(n,a),yt(a,r[0].description),r[13](a),g(t,o),g(t,u),g(t,l),g(t,c),g(c,d),g(c,f),g(c,p),g(p,y),g(p,m),g(p,_),g(p,A),_o(p,r[0].priority),g(t,I),g(t,C),g(t,z),g(t,re),g(re,fe),g(re,ee),g(re,x),yt(x,r[0].recurrenceRule),g(re,le),g(re,pe),g(pe,w),g(pe,v),T.m(r[5],pe),g(t,P),g(t,E),g(t,U),g(t,O),g(O,F),g(F,X),g(F,ue),g(F,se),yt(se,r[0].dueDate),g(F,pt),g(F,Ye),g(Ye,ur),g(Ye,lr),ht.m(r[4],Ye),g(O,Ce),g(O,mt),g(O,Zr),g(O,Ve),g(Ve,ts),g(Ve,xd),g(Ve,Ft),yt(Ft,r[0].scheduledDate),g(Ve,Sd),g(Ve,Nn),g(Nn,Id),g(Nn,Ud),rs.m(r[3],Nn),g(O,Fd),g(O,qd),g(O,Wd),g(O,cr),g(cr,ns),g(cr,Ld),g(cr,qt),yt(qt,r[0].startDate),g(cr,Yd),g(cr,Cn),g(Cn,$d),g(Cn,jd),is.m(r[2],Cn),g(O,Bd),g(O,Gd),g(O,Hd),g(O,ss),g(ss,xn),g(xn,as),g(xn,zd),g(xn,dr),dr.checked=r[0].forwardOnly,g(t,Kd),g(t,Vd),g(t,Zd),g(t,Xr),g(Xr,Ar),g(Ar,os),g(Ar,Xd),g(Ar,fr),g(Ar,Qd),g(Ar,Qa),g(Qa,Ja),g(Xr,Jd),g(Xr,cs),g(cs,ef),g(cs,ds),ds.innerHTML=r[6],g(t,tf),g(t,rf),g(t,nf),g(t,eo),g(t,sf),g(t,fs),to||(af=[Gt(a,"input",r[12]),Gt(p,"change",r[14]),Gt(x,"input",r[15]),Gt(se,"input",r[16]),Gt(Ft,"input",r[17]),Gt(qt,"input",r[18]),Gt(dr,"change",r[19]),Gt(t,"submit",Op(r[7]))],to=!0)},p(de,[Fe]){Fe&1&&a.value!==de[0].description&&yt(a,de[0].description),Fe&1&&_o(p,de[0].priority),Fe&1&&x.value!==de[0].recurrenceRule&&yt(x,de[0].recurrenceRule),Fe&32&&T.p(de[5]),Fe&1&&se.value!==de[0].dueDate&&yt(se,de[0].dueDate),Fe&16&&ht.p(de[4]),Fe&1&&Ft.value!==de[0].scheduledDate&&yt(Ft,de[0].scheduledDate),Fe&8&&rs.p(de[3]),Fe&1&&qt.value!==de[0].startDate&&yt(qt,de[0].startDate),Fe&4&&is.p(de[2]),Fe&1&&(dr.checked=de[0].forwardOnly),Fe&1&&us!==(us=de[0].status==="Done")&&(fr.checked=us),Fe&1&&ls!==(ls=de[0].status+"")&&Pp(Ja,ls),Fe&64&&(ds.innerHTML=de[6])},i:nn,o:nn,d(de){de&&Ps(e),r[13](null),to=!1,Sr(af)}}}var ld="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function QP(r,e,t){var n,i;let{task:s}=e,{onSubmit:a}=e,o,u={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},l="",c="",d="",f="",p="",y=!1;function m(le,pe,w=void 0){if(!pe)return`<i>no ${le} date</i>`;let v=Hi.parseDate(pe,w,{forwardDate:w!=null});return v!==null?window.moment(v).format("YYYY-MM-DD"):`<i>invalid ${le} date</i>`}To(()=>{let{globalFilter:le}=ie(),pe=s.getDescriptionWithoutGlobalFilter();(pe!=s.description||pe.indexOf(le)==-1)&&(y=!0);let w="none";s.priority==="4"?w="low":s.priority==="2"?w="medium":s.priority==="1"&&(w="high"),t(0,u={description:pe,status:s.status,priority:w,recurrenceRule:s.recurrence?s.recurrence.toText():"",startDate:s.startDate?s.startDate.format("YYYY-MM-DD"):"",scheduledDate:s.scheduledDate?s.scheduledDate.format("YYYY-MM-DD"):"",dueDate:s.dueDate?s.dueDate.format("YYYY-MM-DD"):"",doneDate:s.doneDate?s.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{o.focus()},10)});let _=()=>{let{globalFilter:le}=ie(),pe=u.description.trim();y&&(pe=le+" "+pe);let w=null,v=Hi.parseDate(u.startDate,new Date,{forwardDate:u.forwardOnly});v!==null&&(w=window.moment(v));let T=null,P=Hi.parseDate(u.scheduledDate,new Date,{forwardDate:u.forwardOnly});P!==null&&(T=window.moment(P));let E=null,U=Hi.parseDate(u.dueDate,new Date,{forwardDate:u.forwardOnly});U!==null&&(E=window.moment(U));let O=null;u.recurrenceRule&&(O=Re.fromText({recurrenceRuleText:u.recurrenceRule,startDate:w,scheduledDate:T,dueDate:E}));let F;switch(u.priority){case"low":F="4";break;case"medium":F="2";break;case"high":F="1";break;default:F="3"}let X=new oe(Object.assign(Object.assign({},s),{description:pe,status:u.status,priority:F,recurrence:O,startDate:w,scheduledDate:T,dueDate:E,doneDate:window.moment(u.doneDate,"YYYY-MM-DD").isValid()?window.moment(u.doneDate,"YYYY-MM-DD"):null}));a([X])};function A(){u.description=this.value,t(0,u)}function I(le){Ds[le?"unshift":"push"](()=>{o=le,t(1,o)})}function C(){u.priority=Ap(this),t(0,u)}function z(){u.recurrenceRule=this.value,t(0,u)}function re(){u.dueDate=this.value,t(0,u)}function fe(){u.scheduledDate=this.value,t(0,u)}function ee(){u.startDate=this.value,t(0,u)}function x(){u.forwardOnly=this.checked,t(0,u)}return r.$$set=le=>{"task"in le&&t(8,s=le.task),"onSubmit"in le&&t(9,a=le.onSubmit)},r.$$.update=()=>{if(r.$$.dirty&1){e:t(0,u.startDate=vn(u.startDate),u),t(2,l=m("start",u.startDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&1){e:t(0,u.scheduledDate=vn(u.scheduledDate),u),t(3,c=m("scheduled",u.scheduledDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&1){e:t(0,u.dueDate=vn(u.dueDate),u),t(4,d=m("due",u.dueDate,u.forwardOnly?new Date:void 0))}if(r.$$.dirty&3073){e:u.recurrenceRule?t(5,f=t(11,i=t(10,n=Re.fromText({recurrenceRuleText:u.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||n===void 0?void 0:n.toText())!==null&&i!==void 0?i:"<i>invalid recurrence rule</i>"):t(5,f="<i>not recurring</>")}if(r.$$.dirty&1){e:t(6,p=m("done",u.doneDate))}},[u,o,l,c,d,f,p,_,s,a,n,i,A,I,C,z,re,fe,ee,x]}var cd=class extends Os{constructor(e){super(),Cp(this,e,QP,XP,wp,{task:8,onSubmit:9})}},l_=cd;var En=class extends c_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new l_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var d_=(r,e,t,n)=>{var d;if(r)return t instanceof fd.MarkdownView;if(!(t instanceof fd.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=JP({line:o,path:i}),l=f=>{let p=f.map(y=>y.toFileLineString()).join(`
`);e.setLine(a,p)};new En({app:n,task:u,onSubmit:l}).open()},JP=({line:r,path:e})=>{var c;let t=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(t!==null)return t;let n=r.match(M.nonTaskRegex);if(n===null)return console.error("Tasks: Cannot create task on line:",r),new oe({status:"Todo",description:"",path:e,indentation:"",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[]});let i=n[1],s=(c=n[3])!=null?c:" ",a=s===" "?"Todo":"Done",o=n[4],u=r.match(M.blockLinkRegex),l=u!==null?u[0]:"";return l!==""&&(o=o.replace(M.blockLinkRegex,"")),new oe({status:a,description:o,path:e,indentation:i,originalStatusCharacter:s,blockLink:l,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[]})};var pd=require("obsidian");var f_=(r,e,t)=>{var u;if(r)return t instanceof pd.MarkdownView;if(!(t instanceof pd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=eA(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:rA(i.ch,a,o)})},eA=(r,e)=>{let t=r,n=oe.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null});if(n!==null)t=tA(n);else{let i=r.match(M.taskRegex);if(i!==null){let a=i[2].toLowerCase()===" "?"x":" ";t=r.replace(M.taskRegex,`$1- [${a}] $3`)}else M.listItemRegex.test(r)?t=r.replace(M.listItemRegex,"$1$2 [ ]"):t=r.replace(M.indentationRegex,"$1- ")}return t},tA=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),rA=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(M.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var ba=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>d_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:f_})}};var va=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var Ea=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return ne(this,null,function*(){var c;let{globalFilter:n}=ie(),i=e.findAll(".task-list-item").filter(d=>{var y;let f=(y=d.textContent)==null?void 0:y.split(`
`);if(f===void 0)return!1;let p=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){p=f[m];break}return p===null?!1:p.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let p=oe.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null});p!==null&&(l.push(p),u++)}for(let d=0;d<i.length;d++){let f=l[d],p=i[d];if(f===void 0||p===void 0)continue;let y=(c=p.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(y,10),_=yield f.toLi({parentUlElement:e,listIndex:m}),A=p.childNodes;for(let z=0;z<A.length;z=z+1){let re=A[z];re.nodeName.toLowerCase()==="div"?_.prepend(re):re.nodeName.toLowerCase()==="ul"&&_.append(re)}let I=p.querySelectorAll("[data-footnote-id]"),C=_.querySelectorAll("[data-footnote-id]");if(I.length===C.length)for(let z=0;z<I.length;z++)C[z].replaceWith(I[z]);p.replaceWith(_)}})}};var p_=require("@codemirror/view"),h_=require("obsidian");var m_=()=>p_.ViewPlugin.fromClass(hd),hd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new h_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=oe.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var Ka=require("obsidian");var Rn=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Hr=class extends Rn{constructor(t){super();this.stringToFind=t}matches(t){return Hr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var wn=class extends Rn{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new wn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var ve=class{canCreateFilterForLine(e){return ve.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}};var ce=class{static fromFilter(e){let t=new ce;return t.filter=e,t}static fromError(e){let t=new ce;return t.error=e,t}};var ft=class extends ve{createFilterOrErrorMessage(e){let t=ve.getMatch(this.filterRegExp(),e);if(t===null)return ce.fromError(`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Hr(s);else if(i.includes("regex")&&(a=wn.validateAndConstruct(s),a===null))return ce.fromError(`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return ce.fromError(`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null;return ce.fromFilter(this.getFilter(a,o))}static stringIncludesCaseInsensitive(e,t){return Hr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}};var Ra=class extends ft{fieldName(){return"description"}value(e){let t=ie().globalFilter;return e.description.replace(t,"").trim()}};var y_=ps(Ee()),tr=class{static parseDate(e,t=!1){return window.moment(y_.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var It=class extends ve{constructor(){super(...arguments);this.instructionForFieldPresence=`has ${this.fieldName()} date`;this.instructionForFieldAbsence=`no ${this.fieldName()} date`}canCreateFilterForLine(t){return t===this.instructionForFieldPresence||t===this.instructionForFieldAbsence?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=new ce;if(t===this.instructionForFieldPresence)return n.filter=s=>this.date(s)!==null,n;if(t===this.instructionForFieldAbsence)return n.filter=s=>this.date(s)===null,n;let i=ve.getMatch(this.filterRegExp(),t);if(i!==null){let s=tr.parseDate(i[2]);s.isValid()?i[1]==="before"?n.filter=a=>{let o=this.date(a);return o?o.isBefore(s):this.filterResultIfFieldMissing()}:i[1]==="after"?n.filter=a=>{let o=this.date(a);return o?o.isAfter(s):this.filterResultIfFieldMissing()}:n.filter=a=>{let o=this.date(a);return o?o.isSame(s):this.filterResultIfFieldMissing()}:n.error="do not understand "+this.fieldName()+" date"}else n.error="do not understand query filter ("+this.fieldName()+" date)";return n}};var md=class extends It{filterRegExp(){return md.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},zi=md;zi.doneRegexp=/^done (before|after|on)? ?(.*)/;var yd=class extends It{filterRegExp(){return yd.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Ki=yd;Ki.dueRegexp=/^due (before|after|on)? ?(.*)/;var wa=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new ce;return e===this._instruction?(t.filter=this._filter,t):(t.error=`do not understand filter: ${e}`,t)}};var Ma=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new wa(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new ce;return t.error=`do not understand filter: ${e}`,t}};var Mr=class extends ve{constructor(){super(...arguments);this._filters=new Ma}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var Da=class extends Mr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Oa=class extends ft{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}};var Pa=class extends ft{fieldName(){return"path"}value(e){return e.path}};var gd=class extends ve{createFilterOrErrorMessage(e){let t=new ce,n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[3],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a;n[2]==="above"?a=o=>o.priority?o.priority.localeCompare(s)<0:!1:n[2]==="below"?a=o=>o.priority?o.priority.localeCompare(s)>0:!1:a=o=>o.priority?o.priority===s:!1,t.filter=a}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return gd.priorityRegexp}},Vi=gd;Vi.priorityRegexp=/^priority (is )?(above|below)? ?(low|none|medium|high)/;var _d=class extends It{filterRegExp(){return _d.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},Zi=_d;Zi.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var Td=class extends It{filterRegExp(){return Td.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},Xi=Td;Xi.startRegexp=/^starts (before|after|on)? ?(.*)/;var Dr=class extends ve{canCreateFilterForLine(e){return e===Dr.instructionForFieldPresence||e===Dr.instructionForFieldAbsence?!0:super.canCreateFilterForLine(e)}createFilterOrErrorMessage(e){let t=new ce;if(e===Dr.instructionForFieldPresence){let i=new ce;return i.filter=s=>this.dates(s).some(a=>a!==null),i}if(e===Dr.instructionForFieldAbsence){let i=new ce;return i.filter=s=>!this.dates(s).some(a=>a!==null),i}let n=ve.getMatch(this.filterRegExp(),e);if(n!==null){let i=tr.parseDate(n[2]);i.isValid()?n[1]==="before"?t.filter=s=>this.dates(s).some(a=>a&&a.isBefore(i)):n[1]==="after"?t.filter=s=>this.dates(s).some(a=>a&&a.isAfter(i)):t.filter=s=>this.dates(s).some(a=>a&&a.isSame(i)):t.error="do not understand happens date"}else t.error="do not understand query filter (happens date)";return t}earliestDate(e){return new Dr().dates(e).sort(Ge.compareByDate)[0]}filterRegExp(){return Dr.happensRegexp}dates(e){return Array.of(e.startDate,e.scheduledDate,e.dueDate)}fieldName(){return"happens"}},rr=Dr;rr.happensRegexp=/^happens (before|after|on)? ?(.*)/,rr.instructionForFieldPresence="has happens date",rr.instructionForFieldAbsence="no happens date";var Aa=class extends Mr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var ka=class extends Mr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}};var Na=class extends ft{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Ca=class extends Na{fieldNameSingular(){return"tag"}values(e){return e.tags}};var A_=ps(P_());var Ua=class extends ve{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new ce;if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,A_.parse)(i);for(let a of s)if(a.name==="IDENTIFIER"&&a.value){let o=a.value.trim();if(!(o in this.subFields)){let u=Fa(o);if(u===null)return n.error=`couldn't parse sub-expression '${o}'`,n;if(u.error)return n.error=`couldn't parse sub-expression '${o}': ${u.error}`,n;u.filter&&(this.subFields[o]=u.filter)}}else if(a.name==="OPERATOR"){if(a.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(a.value))return n.error=`unknown boolean operator '${a.value}'`,n}return n.filter=a=>this.filterTaskWithParsedQuery(a,s),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let u=this.subFields[o.value.trim()],l=u(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}};var qa=class extends ft{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}};var dA=[()=>new ka,()=>new Aa,()=>new Vi,()=>new rr,()=>new Xi,()=>new Zi,()=>new Ki,()=>new zi,()=>new Pa,()=>new Ra,()=>new Ca,()=>new Oa,()=>new Da,()=>new Ua,()=>new qa];function Fa(r){for(let e of dA){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}var Wa=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var La=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Wa(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Ya=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var $a=class extends Map{},ja=class extends Ya{},Ba=class{constructor(e,t){this.groups=new $a;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new ja(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Pr.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new ja([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new $a([...this.groups.entries()].sort())}};var Ga=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var Ha=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new Ba(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new La(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new Ga(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var Z=class{static by(e,t){return new Ha(e,t)}static getGroupNamesForTask(e,t){let n=Z.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[Z.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[Z.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[Z.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[Z.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new rr().earliestDate(e);return[Z.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(Z.groupDateFormat)}static groupByPath(e){return[Z.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[Z.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:[Z.escapeMarkdownCharacters(t)]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[Z.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n=Z.groupByFileName(e)[0];if(e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=Z.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Pr=Z;Pr.groupDateFormat="YYYY-MM-DD dddd",Pr.groupers={backlink:Z.groupByBacklink,done:Z.groupByDoneDate,due:Z.groupByDueDate,filename:Z.groupByFileName,folder:Z.groupByFolder,happens:Z.groupByHappensDate,heading:Z.groupByHeading,path:Z.groupByPath,priority:Z.groupByPriority,recurrence:Z.groupByRecurrence,recurring:Z.groupByRecurring,root:Z.groupByRoot,scheduled:Z.groupByScheduledDate,start:Z.groupByStartDate,status:Z.groupByStatus,tags:Z.groupByTags};var kn=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Qr;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.sortByRegexp=/^sort by (urgency|status|priority|start|scheduled|due|done|path|description|tag)( reverse)?[\s]*(\d+)?/;this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.sortByRegexp.test(t):this.parseSortBy({line:t});break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n)});let t=Ge.by(this,e).slice(0,this.limit);return Pr.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=Fa(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=e.match(this.sortByRegexp);t!==null?this._sorting.push({property:t[1],reverse:!!t[2],propertyInstance:isNaN(+t[3])?1:+t[3]}):this._error="do not understand query sorting"}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var za=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return ne(this,null,function*(){n.addChild(new Nd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Nd=class extends Ka.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new kn({source:s}),this.queryType="tasks";break;default:this.query=new kn({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new kn({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return ne(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createTasksList(i){return ne(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(p=>p.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{ms({originalTask:n,newTasks:u})};new En({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return ne(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield Ka.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var or=require("obsidian");var Va=class extends or.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),new or.Setting(t).setName("Global task filter").setDesc("The global filter will be applied to all checklist items.").addText(n=>{let i=ie();n.setPlaceholder("#task").setValue(i.globalFilter).onChange(s=>ne(this,null,function*(){Lt({globalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("div",{cls:"setting-item-description",text:'The global filter will be applied to all checklist items to filter out "non-task" checklist items.\nA checklist item must include the specified string in its description in order to be considered a task.\nFor example, if you set the global filter to `#task`, the Tasks plugin will only handle checklist items tagged with `#task`.\nOther checklist items will remain normal checklist items and not appear in queries or get a done date set.\nLeave empty if you want all checklist items from your vault to be tasks managed by this plugin.'}),new or.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=ie();n.setValue(i.removeGlobalFilter).onChange(s=>ne(this,null,function*(){Lt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),new or.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=ie();n.setValue(i.setDoneDate).onChange(s=>ne(this,null,function*(){Lt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new or.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=ie();n.setValue(i.autoSuggestInEditor).onChange(s=>ne(this,null,function*(){Lt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new or.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=ie();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>ne(this,null,function*(){Lt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new or.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=ie();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>ne(this,null,function*(){Lt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))})}};var N_=require("obsidian");var fA=`${Ot}${Pt}${At}`;function k_(r,e,t){let n=[];n=n.concat(mA(r,e,t)),n=n.concat(yA(r,e,t));let i=hA(r,t),s=Cd(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function pA(r){if(Object.values(we).some(e=>e.length>0&&r.includes(e)))return!0}function hA(r,e){let t=[];return r.includes(At)||t.push({displayText:`${At} due date`,appendText:`${At} `}),r.includes(Ot)||t.push({displayText:`${Ot} start date`,appendText:`${Ot} `}),r.includes(Pt)||t.push({displayText:`${Pt} scheduled date`,appendText:`${Pt} `}),pA(r)||(t.push({displayText:`${we.High} high priority`,appendText:`${we.High} `}),t.push({displayText:`${we.Medium} medium priority`,appendText:`${we.Medium} `}),t.push({displayText:`${we.Low} low priority`,appendText:`${we.Low} `})),r.includes(Dt)||t.push({displayText:`${Dt} recurring (repeat)`,appendText:`${Dt} `}),t}function mA(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${fA}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=Cd(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?tr.parseDate(vn(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(M.dateFormat)}`,appendText:`${o} ${l.format(M.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(p=>u&&u.length>=c&&p.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let p of f){let m=`${tr.parseDate(p,!0).format(M.dateFormat)}`;i.push({suggestionType:"match",displayText:`${p} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function yA(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${Dt})\\s*([0-9a-zA-Z ]*)`,"ug"),a=Cd(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let p=(o=Re.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(p){let y=`${u} ${p} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${p}`,appendText:y,insertAt:a.index,insertSkip:a[0].length}),a[0]==y)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(p=>l&&l.length>=c&&p.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let p of f)i.push({suggestionType:"match",displayText:`${p}`,appendText:`${u} ${p} `,insertAt:a.index,insertSkip:a[0].length})}return i}function Cd(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var Za=class extends N_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(M.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=k_(n,i.ch,this.settings),a=[];for(let o of s)a.push(Wt($e({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var Xa=class extends C_.Plugin{onload(){return ne(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new Va({plugin:this})),hf({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new va({obsidianEvents:this.app.workspace});this.cache=new yr({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new Ea({plugin:this}),this.queryRenderer=new za({plugin:this,events:t}),this.registerEditorExtension(m_()),this.registerEditorSuggest(new Za(this.app,ie())),new ba({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return ne(this,null,function*(){let t=yield this.loadData();Lt(t)})}saveSettings(){return ne(this,null,function*(){yield this.saveData(ie())})}};
